var fairygui,__reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};!function(h){var t=function(n){function s(){var t=n.call(this)||this;return t._x=0,t._y=0,t._alpha=1,t._rotation=0,t._visible=!0,t._touchable=!0,t._grayed=!1,t._draggable=!1,t._scaleX=1,t._scaleY=1,t._skewX=0,t._skewY=0,t._pivotX=0,t._pivotY=0,t._pivotAsAnchor=!1,t._pivotOffsetX=0,t._pivotOffsetY=0,t._sortingOrder=0,t._internalVisible=!0,t._handlingController=!1,t._focusable=!1,t._pixelSnapping=!1,t.sourceWidth=0,t.sourceHeight=0,t.initWidth=0,t.initHeight=0,t.minWidth=0,t.minHeight=0,t.maxWidth=0,t.maxHeight=0,t._width=0,t._height=0,t._rawWidth=0,t._rawHeight=0,t._yOffset=0,t._sizePercentInGroup=0,t._sizeImplType=0,t._id=""+s._gInstanceCounter++,t._name="",t.createDisplayObject(),t._relations=new h.Relations(t),t._gears=[],t}return __extends(s,n),Object.defineProperty(s.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"x",{get:function(){return this._x},set:function(t){this.setXY(t,this._y)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"y",{get:function(){return this._y},set:function(t){this.setXY(this._x,t)},enumerable:!0,configurable:!0}),s.prototype.setXY=function(t,e){if(this._x!=t||this._y!=e){var i=t-this._x,n=e-this._y;this._x=t,this._y=e,this.handleXYChanged(),this instanceof h.GGroup&&this.moveChildren(i,n),this.updateGear(1),!this._parent||this._parent instanceof h.GList||(this._parent.setBoundsChangedFlag(),null!=this._group&&this._group.setBoundsChangedFlag(),this.dispatchEventWith(s.XY_CHANGED)),s.draggingObject!=this||s.sUpdateInDragging||this.localToGlobalRect(0,0,this.width,this.height,s.sGlobalRect)}},Object.defineProperty(s.prototype,"xMin",{get:function(){return this._pivotAsAnchor?this._x-this._width*this._pivotX:this._x},set:function(t){this._pivotAsAnchor?this.setXY(t+this._width*this._pivotX,this._y):this.setXY(t,this._y)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"yMin",{get:function(){return this._pivotAsAnchor?this._y-this._height*this._pivotY:this._y},set:function(t){this._pivotAsAnchor?this.setXY(this._x,t+this._height*this._pivotY):this.setXY(this._x,t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"pixelSnapping",{get:function(){return this._pixelSnapping},set:function(t){this._pixelSnapping!=t&&(this._pixelSnapping=t,this.handleXYChanged())},enumerable:!0,configurable:!0}),s.prototype.center=function(t){var e;void 0===t&&(t=!1),e=null!=this._parent?this.parent:this.root,this.setXY((e.width-this.width)/2,(e.height-this.height)/2),t&&(this.addRelation(e,h.RelationType.Center_Center),this.addRelation(e,h.RelationType.Middle_Middle))},Object.defineProperty(s.prototype,"width",{get:function(){return this.ensureSizeCorrect(),this._relations.sizeDirty&&this._relations.ensureRelationsSizeCorrect(),this._width},set:function(t){this.setSize(t,this._rawHeight)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"height",{get:function(){return this.ensureSizeCorrect(),this._relations.sizeDirty&&this._relations.ensureRelationsSizeCorrect(),this._height},set:function(t){this.setSize(this._rawWidth,t)},enumerable:!0,configurable:!0}),s.prototype.setSize=function(t,e,i){if(void 0===i&&(i=!1),this._rawWidth!=t||this._rawHeight!=e){this._rawWidth=t,this._rawHeight=e,t<this.minWidth&&(t=this.minWidth),e<this.minHeight&&(e=this.minHeight),0<this.maxWidth&&t>this.maxWidth&&(t=this.maxWidth),0<this.maxHeight&&e>this.maxHeight&&(e=this.maxHeight);var n=t-this._width,o=e-this._height;this._width=t,this._height=e,this.handleSizeChanged(),0==this._pivotX&&0==this._pivotY||(this._pivotAsAnchor?this.applyPivot():(i||this.setXY(this.x-this._pivotX*n,this.y-this._pivotY*o),this.updatePivotOffset())),this instanceof h.GGroup&&this.resizeChildren(n,o),this.updateGear(2),this._parent&&(this._relations.onOwnerSizeChanged(n,o,this._pivotAsAnchor||!i),this._parent.setBoundsChangedFlag(),null!=this._group&&this._group.setBoundsChangedFlag(!0)),this.dispatchEventWith(s.SIZE_CHANGED)}},s.prototype.ensureSizeCorrect=function(){},Object.defineProperty(s.prototype,"actualWidth",{get:function(){return this.width*Math.abs(this._scaleX)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"actualHeight",{get:function(){return this.height*Math.abs(this._scaleY)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"scaleX",{get:function(){return this._scaleX},set:function(t){this.setScale(t,this._scaleY)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"scaleY",{get:function(){return this._scaleY},set:function(t){this.setScale(this._scaleX,t)},enumerable:!0,configurable:!0}),s.prototype.setScale=function(t,e){this._scaleX==t&&this._scaleY==e||(this._scaleX=t,this._scaleY=e,this.handleScaleChanged(),this.applyPivot(),this.updateGear(2))},Object.defineProperty(s.prototype,"skewX",{get:function(){return this._skewX},set:function(t){this.setSkew(t,this._skewY)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"skewY",{get:function(){return this._skewY},set:function(t){this.setSkew(this._skewX,t)},enumerable:!0,configurable:!0}),s.prototype.setSkew=function(t,e){this._skewX==t&&this._skewY==e||(this._skewX=t,this._skewY=e,null!=this._displayObject&&(this._displayObject.skewX=t,this._displayObject.skewY=e),this.applyPivot())},Object.defineProperty(s.prototype,"pivotX",{get:function(){return this._pivotX},set:function(t){this.setPivot(t,this._pivotY)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"pivotY",{get:function(){return this._pivotY},set:function(t){this.setPivot(this._pivotX,t)},enumerable:!0,configurable:!0}),s.prototype.setPivot=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!1),this._pivotX==t&&this._pivotY==e&&this._pivotAsAnchor==i||(this._pivotX=t,this._pivotY=e,this._pivotAsAnchor=i,this.updatePivotOffset(),this.handleXYChanged())},Object.defineProperty(s.prototype,"pivotAsAnchor",{get:function(){return this._pivotAsAnchor},enumerable:!0,configurable:!0}),s.prototype.internalSetPivot=function(t,e,i){void 0===e&&(e=0),this._pivotX=t,this._pivotY=e,(this._pivotAsAnchor=i)&&this.handleXYChanged()},s.prototype.updatePivotOffset=function(){if(null!=this._displayObject)if(0!=this._pivotX||0!=this._pivotY){var t,e;0==this._sizeImplType?(t=this._pivotX*this._width,e=this._pivotY*this._height):(t=this._pivotX*this.sourceWidth,e=this._pivotY*this.sourceHeight);var i=this._displayObject.matrix.transformPoint(t,e,s.sHelperPoint);this._pivotOffsetX=this._pivotX*this._width-(i.x-this._displayObject.x),this._pivotOffsetY=this._pivotY*this._height-(i.y-this._displayObject.y)}else this._pivotOffsetX=0,this._pivotOffsetY=0},s.prototype.applyPivot=function(){0==this._pivotX&&0==this._pivotY||(this.updatePivotOffset(),this.handleXYChanged())},Object.defineProperty(s.prototype,"touchable",{get:function(){return this._touchable},set:function(t){if(this._touchable!=t){if(this._touchable=t,this.updateGear(3),this instanceof h.GImage||this instanceof h.GMovieClip||this instanceof h.GTextField&&!(this instanceof h.GTextInput)&&!(this instanceof h.GRichTextField))return;null!=this._displayObject&&(this._displayObject.touchEnabled=this._touchable,this._displayObject instanceof egret.DisplayObjectContainer&&(this._displayObject.touchChildren=this._touchable))}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"grayed",{get:function(){return this._grayed},set:function(t){this._grayed!=t&&(this._grayed=t,this.handleGrayedChanged(),this.updateGear(3))},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"enabled",{get:function(){return!this._grayed&&this._touchable},set:function(t){this.grayed=!t,this.touchable=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!=t&&(this._rotation=t,this._displayObject&&(this._displayObject.rotation=this.normalizeRotation),this.applyPivot(),this.updateGear(3))},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"normalizeRotation",{get:function(){var t=this._rotation%360;return 180<t?t-=360:t<-180&&(t+=360),t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha!=t&&(this._alpha=t,this.handleAlphaChanged(),this.updateGear(3))},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible!=t&&(this._visible=t,this.handleVisibleChanged(),this._parent&&this._parent.setBoundsChangedFlag())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"internalVisible",{get:function(){return this._internalVisible&&(!this._group||this._group.internalVisible)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"internalVisible2",{get:function(){return this._visible&&(!this._group||this._group.internalVisible2)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"sortingOrder",{get:function(){return this._sortingOrder},set:function(t){if(t<0&&(t=0),this._sortingOrder!=t){var e=this._sortingOrder;this._sortingOrder=t,null!=this._parent&&this._parent.childSortingOrderChanged(this,e,this._sortingOrder)}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"focusable",{get:function(){return this._focusable},set:function(t){this._focusable=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"focused",{get:function(){return this.root.focus==this},enumerable:!0,configurable:!0}),s.prototype.requestFocus=function(){for(var t=this;t&&!t._focusable;)t=t.parent;null!=t&&(this.root.focus=t)},Object.defineProperty(s.prototype,"tooltips",{get:function(){return this._tooltips},set:function(t){this._tooltips=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"blendMode",{get:function(){return this._displayObject.blendMode},set:function(t){this._displayObject.blendMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"filters",{get:function(){return this._displayObject.filters},set:function(t){this._displayObject.filters=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"inContainer",{get:function(){return null!=this._displayObject&&null!=this._displayObject.parent},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"onStage",{get:function(){return null!=this._displayObject&&null!=this._displayObject.stage},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"resourceURL",{get:function(){return null!=this.packageItem?"ui://"+this.packageItem.owner.id+this.packageItem.id:null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"group",{get:function(){return this._group},set:function(t){this._group!=t&&(null!=this._group&&this._group.setBoundsChangedFlag(!0),this._group=t,null!=this._group&&this._group.setBoundsChangedFlag(!0))},enumerable:!0,configurable:!0}),s.prototype.getGear=function(t){var e=this._gears[t];if(null==e){switch(t){case 0:e=new h.GearDisplay(this);break;case 1:e=new h.GearXY(this);break;case 2:e=new h.GearSize(this);break;case 3:e=new h.GearLook(this);break;case 4:e=new h.GearColor(this);break;case 5:e=new h.GearAnimation(this);break;case 6:e=new h.GearText(this);break;case 7:e=new h.GearIcon(this);break;default:throw"FairyGUI: invalid gear index!"}this._gears[t]=e}return e},s.prototype.updateGear=function(t){if(!this._underConstruct&&!this._gearLocked){var e=this._gears[t];null!=e&&null!=e.controller&&e.updateState()}},s.prototype.checkGearController=function(t,e){return null!=this._gears[t]&&this._gears[t].controller==e},s.prototype.updateGearFromRelations=function(t,e,i){null!=this._gears[t]&&this._gears[t].updateFromRelations(e,i)},s.prototype.addDisplayLock=function(){var t=this._gears[0];if(t&&t.controller){var e=t.addLock();return this.checkGearDisplay(),e}return 0},s.prototype.releaseDisplayLock=function(t){var e=this._gears[0];e&&e.controller&&(e.releaseLock(t),this.checkGearDisplay())},s.prototype.checkGearDisplay=function(){if(!this._handlingController){var t=null==this._gears[0]||this._gears[0].connected;t!=this._internalVisible&&(this._internalVisible=t,this._parent&&this._parent.childStateChanged(this))}},Object.defineProperty(s.prototype,"gearXY",{get:function(){return this.getGear(1)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"gearSize",{get:function(){return this.getGear(2)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"gearLook",{get:function(){return this.getGear(3)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"relations",{get:function(){return this._relations},enumerable:!0,configurable:!0}),s.prototype.addRelation=function(t,e,i){void 0===i&&(i=!1),this._relations.add(t,e,i)},s.prototype.removeRelation=function(t,e){void 0===e&&(e=0),this._relations.remove(t,e)},Object.defineProperty(s.prototype,"displayObject",{get:function(){return this._displayObject},enumerable:!0,configurable:!0}),s.prototype.setDisplayObject=function(t){this._displayObject=t},Object.defineProperty(s.prototype,"parent",{get:function(){return this._parent},set:function(t){this._parent=t},enumerable:!0,configurable:!0}),s.prototype.removeFromParent=function(){this._parent&&this._parent.removeChild(this)},Object.defineProperty(s.prototype,"root",{get:function(){if(this instanceof h.GRoot)return this;for(var t=this._parent;t;){if(t instanceof h.GRoot)return t;t=t.parent}return h.GRoot.inst},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"asCom",{get:function(){return this instanceof h.GComponent?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"asButton",{get:function(){return this instanceof h.GButton?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"asLabel",{get:function(){return this instanceof h.GLabel?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"asProgress",{get:function(){return this instanceof h.GProgressBar?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"asTextField",{get:function(){return this instanceof h.GTextField?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"asRichTextField",{get:function(){return this instanceof h.GRichTextField?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"asTextInput",{get:function(){return this instanceof h.GTextInput?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"asLoader",{get:function(){return this instanceof h.GLoader?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"asList",{get:function(){return this instanceof h.GList?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"asGraph",{get:function(){return this instanceof h.GGraph?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"asGroup",{get:function(){return this instanceof h.GGroup?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"asSlider",{get:function(){return this instanceof h.GSlider?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"asComboBox",{get:function(){return this instanceof h.GComboBox?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"asImage",{get:function(){return this instanceof h.GImage?this:null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"asMovieClip",{get:function(){return this instanceof h.GMovieClip?this:null},enumerable:!0,configurable:!0}),s.cast=function(t){return t.$owner},Object.defineProperty(s.prototype,"text",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"icon",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),s.prototype.dispose=function(){this.removeFromParent(),this._relations.dispose()},s.prototype.addClickListener=function(t,e){this.addEventListener(egret.TouchEvent.TOUCH_TAP,t,e)},s.prototype.removeClickListener=function(t,e){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,t,e)},s.prototype.hasClickListener=function(){return this.hasEventListener(egret.TouchEvent.TOUCH_TAP)},s.prototype.addEventListener=function(t,e,i){n.prototype.addEventListener.call(this,t,e,i),null!=this._displayObject&&this._displayObject.addEventListener(t,this._reDispatch,this)},s.prototype.removeEventListener=function(t,e,i){n.prototype.removeEventListener.call(this,t,e,i),null==this._displayObject||this.hasEventListener(t)||this._displayObject.removeEventListener(t,this._reDispatch,this)},s.prototype._reDispatch=function(t){this.dispatchEvent(t)},Object.defineProperty(s.prototype,"draggable",{get:function(){return this._draggable},set:function(t){this._draggable!=t&&(this._draggable=t,this.initDrag())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dragBounds",{get:function(){return this._dragBounds},set:function(t){this._dragBounds=t},enumerable:!0,configurable:!0}),s.prototype.startDrag=function(t){void 0===t&&(t=-1),null!=this._displayObject.stage&&this.dragBegin(null)},s.prototype.stopDrag=function(){this.dragEnd()},Object.defineProperty(s.prototype,"dragging",{get:function(){return s.draggingObject==this},enumerable:!0,configurable:!0}),s.prototype.localToGlobal=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),this._pivotAsAnchor&&(t+=this._pivotX*this._width,e+=this._pivotY*this._height),this._displayObject.localToGlobal(t,e,i)},s.prototype.globalToLocal=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0);var n=this._displayObject.globalToLocal(t,e,i);return this._pivotAsAnchor&&(n.x-=this._pivotX*this._width,n.y-=this._pivotY*this._height),n},s.prototype.localToRoot=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0);var n=this._displayObject.localToGlobal(t,e,i);return n.x/=h.GRoot.contentScaleFactor,n.y/=h.GRoot.contentScaleFactor,n},s.prototype.rootToLocal=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),t*=h.GRoot.contentScaleFactor,e*=h.GRoot.contentScaleFactor,this._displayObject.globalToLocal(t,e,i)},s.prototype.localToGlobalRect=function(t,e,i,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),null==o&&(o=new egret.Rectangle);var r=this.localToGlobal(t,e);return o.x=r.x,o.y=r.y,r=this.localToGlobal(t+i,e+n),o.right=r.x,o.bottom=r.y,o},s.prototype.globalToLocalRect=function(t,e,i,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),null==o&&(o=new egret.Rectangle);var r=this.globalToLocal(t,e);return o.x=r.x,o.y=r.y,r=this.globalToLocal(t+i,e+n),o.right=r.x,o.bottom=r.y,o},s.prototype.handleControllerChanged=function(t){this._handlingController=!0;for(var e=0;e<8;e++){var i=this._gears[e];null!=i&&i.controller==t&&i.apply()}this._handlingController=!1,this.checkGearDisplay()},s.prototype.createDisplayObject=function(){},s.prototype.switchDisplayObject=function(t){if(t!=this._displayObject){var e=this._displayObject;if(null!=this._displayObject.parent){var i=this._displayObject.parent.getChildIndex(this._displayObject);this._displayObject.parent.addChildAt(t,i),this._displayObject.parent.removeChild(this._displayObject)}this._displayObject=t,this._displayObject.x=e.x,this._displayObject.y=e.y,this._displayObject.rotation=e.rotation,this._displayObject.alpha=e.alpha,this._displayObject.visible=e.visible,this._displayObject.touchEnabled=e.touchEnabled,this._displayObject.scaleX=e.scaleX,this._displayObject.scaleY=e.scaleY,this._displayObject instanceof egret.DisplayObjectContainer&&(this._displayObject.touchChildren=this._touchable)}},s.prototype.handleXYChanged=function(){if(this._displayObject){var t=this._x,e=this._y+this._yOffset;this._pivotAsAnchor&&(t-=this._pivotX*this._width,e-=this._pivotY*this._height),this._pixelSnapping&&(t=Math.round(t),e=Math.round(e)),this._displayObject.x=t+this._pivotOffsetX,this._displayObject.y=e+this._pivotOffsetY}},s.prototype.handleSizeChanged=function(){null!=this._displayObject&&1==this._sizeImplType&&0!=this.sourceWidth&&0!=this.sourceHeight&&(this._displayObject.scaleX=this._width/this.sourceWidth*this._scaleX,this._displayObject.scaleY=this._height/this.sourceHeight*this._scaleY)},s.prototype.handleScaleChanged=function(){null!=this._displayObject&&(0==this._sizeImplType||0==this.sourceWidth||0==this.sourceHeight?(this._displayObject.scaleX=this._scaleX,this._displayObject.scaleY=this._scaleY):(this._displayObject.scaleX=this._width/this.sourceWidth*this._scaleX,this._displayObject.scaleY=this._height/this.sourceHeight*this._scaleY))},s.prototype.handleGrayedChanged=function(){if(this._displayObject)if(this._grayed){var t=new egret.ColorMatrixFilter(s.colorMatrix);this._displayObject.filters=[t]}else this._displayObject.filters=null},s.prototype.handleAlphaChanged=function(){this._displayObject&&(this._displayObject.alpha=this._alpha)},s.prototype.handleVisibleChanged=function(){this._displayObject&&(this._displayObject.visible=this.internalVisible2)},s.prototype.constructFromResource=function(){},s.prototype.setup_beforeAdd=function(t,e){var i,n;t.seek(e,0),t.skip(5),this._id=t.readS(),this._name=t.readS(),i=t.readInt(),n=t.readInt(),this.setXY(i,n),t.readBool()&&(this.initWidth=t.readInt(),this.initHeight=t.readInt(),this.setSize(this.initWidth,this.initHeight,!0)),t.readBool()&&(this.minWidth=t.readInt(),this.maxWidth=t.readInt(),this.minHeight=t.readInt(),this.maxHeight=t.readInt()),t.readBool()&&(i=t.readFloat(),n=t.readFloat(),this.setScale(i,n)),t.readBool()&&(i=t.readFloat(),n=t.readFloat(),this.setSkew(i,n)),t.readBool()&&(i=t.readFloat(),n=t.readFloat(),this.setPivot(i,n,t.readBool())),1!=(i=t.readFloat())&&(this.alpha=i),0!=(i=t.readFloat())&&(this.rotation=i),t.readBool()||(this.visible=!1),t.readBool()||(this.touchable=!1),t.readBool()&&(this.grayed=!0);var o=t.readByte();if(2==o?this.blendMode=egret.BlendMode.ADD:5==o&&(this.blendMode=egret.BlendMode.ERASE),1==t.readByte()){var r=new h.ColorMatrix;r.adjustBrightness(t.readFloat()),r.adjustContrast(t.readFloat()),r.adjustSaturation(t.readFloat()),r.adjustHue(t.readFloat());var s=new egret.ColorMatrixFilter(r.matrix);this.filters=[s]}var a=t.readS();null!=a&&(this.data=a)},s.prototype.setup_afterAdd=function(t,e){t.seek(e,1);var i=t.readS();null!=i&&(this.tooltips=i);var n=t.readShort();0<=n&&(this.group=this.parent.getChildAt(n)),t.seek(e,2);for(var o=t.readShort(),r=0;r<o;r++){var s=t.readShort();s+=t.position,this.getGear(t.readByte()).setup(t),t.position=s}},s.prototype.initDrag=function(){this._draggable?this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__begin,this):this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__begin,this)},s.prototype.dragBegin=function(t){null!=s.draggingObject&&s.draggingObject.stopDrag(),null!=t?(s.sGlobalDragStart.x=t.stageX,s.sGlobalDragStart.y=t.stageY):(s.sGlobalDragStart.x=h.GRoot.mouseX,s.sGlobalDragStart.y=h.GRoot.mouseY),this.localToGlobalRect(0,0,this.width,this.height,s.sGlobalRect),s.draggingObject=this,h.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.__moving2,this),h.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_END,this.__end2,this)},s.prototype.dragEnd=function(){s.draggingObject==this&&(h.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.__moving2,this),h.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_END,this.__end2,this),s.draggingObject=null)},s.prototype.reset=function(){h.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.__moving,this),h.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_END,this.__end,this)},s.prototype.__begin=function(t){null==this._touchDownPoint&&(this._touchDownPoint=new egret.Point),this._touchDownPoint.x=t.stageX,this._touchDownPoint.y=t.stageY,h.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.__moving,this),h.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_END,this.__end,this)},s.prototype.__end=function(t){this.reset()},s.prototype.__moving=function(t){var e=h.UIConfig.touchDragSensitivity;if(!(null!=this._touchDownPoint&&Math.abs(this._touchDownPoint.x-t.stageX)<e&&Math.abs(this._touchDownPoint.y-t.stageY)<e)){this.reset();var i=new h.DragEvent(h.DragEvent.DRAG_START);i.stageX=t.stageX,i.stageY=t.stageY,i.touchPointID=t.touchPointID,this.dispatchEvent(i),i.isDefaultPrevented()||this.dragBegin(t)}},s.prototype.__moving2=function(t){var e=t.stageX-s.sGlobalDragStart.x+s.sGlobalRect.x,i=t.stageY-s.sGlobalDragStart.y+s.sGlobalRect.y;if(null!=this._dragBounds){var n=h.GRoot.inst.localToGlobalRect(this._dragBounds.x,this._dragBounds.y,this._dragBounds.width,this._dragBounds.height,s.sDragHelperRect);e<n.x?e=n.x:e+s.sGlobalRect.width>n.right&&(e=n.right-s.sGlobalRect.width)<n.x&&(e=n.x),i<n.y?i=n.y:i+s.sGlobalRect.height>n.bottom&&(i=n.bottom-s.sGlobalRect.height)<n.y&&(i=n.y)}s.sUpdateInDragging=!0;var o=this.parent.globalToLocal(e,i,s.sHelperPoint);this.setXY(Math.round(o.x),Math.round(o.y)),s.sUpdateInDragging=!1;var r=new h.DragEvent(h.DragEvent.DRAG_MOVING);r.stageX=t.stageX,r.stageY=t.stageY,r.touchPointID=t.touchPointID,this.dispatchEvent(r)},s.prototype.__end2=function(t){if(s.draggingObject==this){this.stopDrag();var e=new h.DragEvent(h.DragEvent.DRAG_END);e.stageX=t.stageX,e.stageY=t.stageY,e.touchPointID=t.touchPointID,this.dispatchEvent(e)}},s._gInstanceCounter=0,s.XY_CHANGED="__xyChanged",s.SIZE_CHANGED="__sizeChanged",s.SIZE_DELAY_CHANGE="__sizeDelayChange",s.GEAR_STOP="gearStop",s.colorMatrix=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],s.sGlobalDragStart=new egret.Point,s.sGlobalRect=new egret.Rectangle,s.sHelperPoint=new egret.Point,s.sDragHelperRect=new egret.Rectangle,s}(egret.EventDispatcher);h.GObject=t,__reflect(t.prototype,"fairygui.GObject")}(fairygui||(fairygui={})),function(t){var e=function(){function t(){this._readPos=0,this.smallFontSize=12,this.normalFontSize=14,this.largeFontSize=16,this.defaultImgWidth=0,this.defaultImgHeight=0,this._handlers={},this._handlers.url=this.onTag_URL,this._handlers.img=this.onTag_IMG,this._handlers.b=this.onTag_Simple,this._handlers.i=this.onTag_Simple,this._handlers.u=this.onTag_Simple,this._handlers.sup=this.onTag_Simple,this._handlers.sub=this.onTag_Simple,this._handlers.color=this.onTag_COLOR,this._handlers.font=this.onTag_FONT,this._handlers.size=this.onTag_SIZE}return t.prototype.onTag_URL=function(t,e,i){return e?"</a>":null!=i?'<a href="'+i+'" target="_blank">':'<a href="'+this.getTagText()+'" target="_blank">'},t.prototype.onTag_IMG=function(t,e,i){if(e)return null;var n=this.getTagText(!0);return n?this.defaultImgWidth?'<img src="'+n+'" width="'+this.defaultImgWidth+'" height="'+this.defaultImgHeight+'"/>':'<img src="'+n+'"/>':null},t.prototype.onTag_Simple=function(t,e,i){return e?"</"+t+">":"<"+t+">"},t.prototype.onTag_COLOR=function(t,e,i){return e?"</font>":'<font color="'+i+'">'},t.prototype.onTag_FONT=function(t,e,i){return e?"</font>":'<font face="'+i+'">'},t.prototype.onTag_SIZE=function(t,e,i){return e?"</font>":("normal"==i?i=""+this.normalFontSize:"small"==i?i=""+this.smallFontSize:"large"==i?i=""+this.largeFontSize:i.length&&"+"==i.charAt(0)?i=""+(this.smallFontSize+parseInt(i.substr(1))):i.length&&"-"==i.charAt(0)&&(i=""+(this.smallFontSize-parseInt(i.substr(1)))),'<font size="'+i+'">')},t.prototype.getTagText=function(t){void 0===t&&(t=!1);for(var e,i=this._readPos,n="";-1!=(e=this._text.indexOf("[",i));){if(92!=this._text.charCodeAt(e-1)){n+=this._text.substring(i,e);break}n+=this._text.substring(i,e-1),n+="[",i=e+1}return-1==e?null:(t&&(this._readPos=e),n)},t.prototype.parse=function(t,e){void 0===e&&(e=!1),this._text=t;for(var i,n,o,r,s,a,h,l=0,c="";-1!=(i=this._text.indexOf("[",l));)if(0<i&&92==this._text.charCodeAt(i-1))c+=this._text.substring(l,i-1),c+="[",l=i+1;else{if(c+=this._text.substring(l,i),l=i,-1==(i=this._text.indexOf("]",l)))break;o="/"==this._text.charAt(l+1),r=this._text.substring(o?l+2:l+1,i),this._readPos=i+1,a=s=null,-1!=(n=r.indexOf("="))&&(s=r.substring(n+1),r=r.substring(0,n)),r=r.toLowerCase(),null!=(h=this._handlers[r])?e||null!=(a=h.call(this,r,o,s))&&(c+=a):c+=this._text.substring(l,this._readPos),l=this._readPos}return l<this._text.length&&(c+=this._text.substr(l)),this._text=null,c},t.inst=new t,t}();t.UBBParser=e,__reflect(e.prototype,"fairygui.UBBParser")}(fairygui||(fairygui={})),function(r){var t=function(){function t(t){this._owner=t}return Object.defineProperty(t.prototype,"controller",{get:function(){return this._controller},set:function(t){t!=this._controller&&(this._controller=t,this._controller&&this.init())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tweenConfig",{get:function(){return null==this._tweenConfig&&(this._tweenConfig=new s),this._tweenConfig},enumerable:!0,configurable:!0}),t.prototype.setup=function(t){var e,i,n;if(this._controller=this._owner.parent.getControllerAt(t.readShort()),this.init(),this instanceof r.GearDisplay){e=t.readShort();var o=[];for(i=0;i<e;i++)o[i]=t.readS();this.pages=o}else{for(e=t.readShort(),i=0;i<e;i++)null!=(n=t.readS())&&this.addStatus(n,t);t.readBool()&&this.addStatus(null,t)}t.readBool()&&(this._tweenConfig=new s,this._tweenConfig.easeType=t.readByte(),this._tweenConfig.duration=t.readFloat(),this._tweenConfig.delay=t.readFloat())},t.prototype.updateFromRelations=function(t,e){},t.prototype.addStatus=function(t,e){},t.prototype.init=function(){},t.prototype.apply=function(){},t.prototype.updateState=function(){},t.disableAllTweenEffect=!1,t}();r.GearBase=t,__reflect(t.prototype,"fairygui.GearBase");var s=function(){this.tween=!0,this.easeType=r.EaseType.QuadOut,this.duration=.3,this.delay=0};r.GearTweenConfig=s,__reflect(s.prototype,"fairygui.GearTweenConfig")}(fairygui||(fairygui={})),function(t){var e,i,n,o,r,s,a,h,l,c,_,u,p,d,g,f,y,m;(e=t.ButtonMode||(t.ButtonMode={}))[e.Common=0]="Common",e[e.Check=1]="Check",e[e.Radio=2]="Radio",(i=t.AutoSizeType||(t.AutoSizeType={}))[i.None=0]="None",i[i.Both=1]="Both",i[i.Height=2]="Height",(n=t.AlignType||(t.AlignType={}))[n.Left=0]="Left",n[n.Center=1]="Center",n[n.Right=2]="Right",(o=t.VertAlignType||(t.VertAlignType={}))[o.Top=0]="Top",o[o.Middle=1]="Middle",o[o.Bottom=2]="Bottom",(r=t.LoaderFillType||(t.LoaderFillType={}))[r.None=0]="None",r[r.Scale=1]="Scale",r[r.ScaleMatchHeight=2]="ScaleMatchHeight",r[r.ScaleMatchWidth=3]="ScaleMatchWidth",r[r.ScaleFree=4]="ScaleFree",r[r.ScaleNoBorder=5]="ScaleNoBorder",(s=t.ListLayoutType||(t.ListLayoutType={}))[s.SingleColumn=0]="SingleColumn",s[s.SingleRow=1]="SingleRow",s[s.FlowHorizontal=2]="FlowHorizontal",s[s.FlowVertical=3]="FlowVertical",s[s.Pagination=4]="Pagination",(a=t.ListSelectionMode||(t.ListSelectionMode={}))[a.Single=0]="Single",a[a.Multiple=1]="Multiple",a[a.Multiple_SingleClick=2]="Multiple_SingleClick",a[a.None=3]="None",(h=t.OverflowType||(t.OverflowType={}))[h.Visible=0]="Visible",h[h.Hidden=1]="Hidden",h[h.Scroll=2]="Scroll",(l=t.PackageItemType||(t.PackageItemType={}))[l.Image=0]="Image",l[l.MovieClip=1]="MovieClip",l[l.Sound=2]="Sound",l[l.Component=3]="Component",l[l.Atlas=4]="Atlas",l[l.Font=5]="Font",l[l.Swf=6]="Swf",l[l.Misc=7]="Misc",l[l.Unknown=8]="Unknown",(c=t.ObjectType||(t.ObjectType={}))[c.Image=0]="Image",c[c.MovieClip=1]="MovieClip",c[c.Swf=2]="Swf",c[c.Graph=3]="Graph",c[c.Loader=4]="Loader",c[c.Group=5]="Group",c[c.Text=6]="Text",c[c.RichText=7]="RichText",c[c.InputText=8]="InputText",c[c.Component=9]="Component",c[c.List=10]="List",c[c.Label=11]="Label",c[c.Button=12]="Button",c[c.ComboBox=13]="ComboBox",c[c.ProgressBar=14]="ProgressBar",c[c.Slider=15]="Slider",c[c.ScrollBar=16]="ScrollBar",(_=t.ProgressTitleType||(t.ProgressTitleType={}))[_.Percent=0]="Percent",_[_.ValueAndMax=1]="ValueAndMax",_[_.Value=2]="Value",_[_.Max=3]="Max",(u=t.ScrollBarDisplayType||(t.ScrollBarDisplayType={}))[u.Default=0]="Default",u[u.Visible=1]="Visible",u[u.Auto=2]="Auto",u[u.Hidden=3]="Hidden",(p=t.ScrollType||(t.ScrollType={}))[p.Horizontal=0]="Horizontal",p[p.Vertical=1]="Vertical",p[p.Both=2]="Both",(d=t.FlipType||(t.FlipType={}))[d.None=0]="None",d[d.Horizontal=1]="Horizontal",d[d.Vertical=2]="Vertical",d[d.Both=3]="Both",(g=t.ChildrenRenderOrder||(t.ChildrenRenderOrder={}))[g.Ascent=0]="Ascent",g[g.Descent=1]="Descent",g[g.Arch=2]="Arch",(f=t.GroupLayoutType||(t.GroupLayoutType={}))[f.None=0]="None",f[f.Horizontal=1]="Horizontal",f[f.Vertical=2]="Vertical",(y=t.PopupDirection||(t.PopupDirection={}))[y.Auto=0]="Auto",y[y.Up=1]="Up",y[y.Down=2]="Down",(m=t.RelationType||(t.RelationType={}))[m.Left_Left=0]="Left_Left",m[m.Left_Center=1]="Left_Center",m[m.Left_Right=2]="Left_Right",m[m.Center_Center=3]="Center_Center",m[m.Right_Left=4]="Right_Left",m[m.Right_Center=5]="Right_Center",m[m.Right_Right=6]="Right_Right",m[m.Top_Top=7]="Top_Top",m[m.Top_Middle=8]="Top_Middle",m[m.Top_Bottom=9]="Top_Bottom",m[m.Middle_Middle=10]="Middle_Middle",m[m.Bottom_Top=11]="Bottom_Top",m[m.Bottom_Middle=12]="Bottom_Middle",m[m.Bottom_Bottom=13]="Bottom_Bottom",m[m.Width=14]="Width",m[m.Height=15]="Height",m[m.LeftExt_Left=16]="LeftExt_Left",m[m.LeftExt_Right=17]="LeftExt_Right",m[m.RightExt_Left=18]="RightExt_Left",m[m.RightExt_Right=19]="RightExt_Right",m[m.TopExt_Top=20]="TopExt_Top",m[m.TopExt_Bottom=21]="TopExt_Bottom",m[m.BottomExt_Top=22]="BottomExt_Top",m[m.BottomExt_Bottom=23]="BottomExt_Bottom",m[m.Size=24]="Size"}(fairygui||(fairygui={})),function(e){var t=function(){function t(){}return t.createAction=function(t){switch(t){case 0:return new e.PlayTransitionAction;case 1:return new e.ChangePageAction}return null},t.prototype.run=function(t,e,i){null!=this.fromPage&&0!=this.fromPage.length&&-1==this.fromPage.indexOf(e)||null!=this.toPage&&0!=this.toPage.length&&-1==this.toPage.indexOf(i)?this.leave(t):this.enter(t)},t.prototype.enter=function(t){},t.prototype.leave=function(t){},t.prototype.setup=function(t){var e,i;for(e=t.readShort(),this.fromPage=[],i=0;i<e;i++)this.fromPage[i]=t.readS();for(e=t.readShort(),this.toPage=[],i=0;i<e;i++)this.toPage[i]=t.readS()},t}();e.ControllerAction=t,__reflect(t.prototype,"fairygui.ControllerAction")}(fairygui||(fairygui={})),function(S){var t=function(a){function t(){var t=a.call(this)||this;return t._sortingChildCount=0,t._childrenRenderOrder=S.ChildrenRenderOrder.Ascent,t._apexIndex=0,t._children=new Array,t._controllers=new Array,t._transitions=new Array,t._margin=new S.Margin,t._alignOffset=new egret.Point,t}return __extends(t,a),t.prototype.createDisplayObject=function(){this._rootContainer=new S.UIContainer,(this._rootContainer.$owner=this).setDisplayObject(this._rootContainer),this._container=this._rootContainer},t.prototype.dispose=function(){var t,e;for(e=this._transitions.length,t=0;t<e;++t){this._transitions[t].dispose()}for(e=this._controllers.length,t=0;t<e;++t){this._controllers[t].dispose()}for(this._scrollPane&&this._scrollPane.dispose(),t=(e=this._children.length)-1;0<=t;--t){var i=this._children[t];i.parent=null,i.dispose()}this._boundsChanged=!1,a.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"displayListContainer",{get:function(){return this._container},enumerable:!0,configurable:!0}),t.prototype.addChild=function(t){return this.addChildAt(t,this._children.length),t},t.prototype.addChildAt=function(t,e){if(void 0===e&&(e=0),!t)throw"child is null";var i=this._children.length;if(0<=e&&e<=i){if(t.parent==this)this.setChildIndex(t,e);else{t.removeFromParent();var n=(t.parent=this)._children.length;0!=t.sortingOrder?(this._sortingChildCount++,e=this.getInsertPosForSortingChild(t)):0<this._sortingChildCount&&e>n-this._sortingChildCount&&(e=n-this._sortingChildCount),e==n?this._children.push(t):this._children.splice(e,0,t),this.childStateChanged(t),this.setBoundsChangedFlag()}return t}throw"Invalid child index"},t.prototype.getInsertPosForSortingChild=function(t){var e=this._children.length,i=0;for(i=0;i<e;i++){var n=this._children[i];if(n!=t&&t.sortingOrder<n.sortingOrder)break}return i},t.prototype.removeChild=function(t,e){void 0===e&&(e=!1);var i=this._children.indexOf(t);return-1!=i&&this.removeChildAt(i,e),t},t.prototype.removeChildAt=function(t,e){if(void 0===e&&(e=!1),0<=t&&t<this.numChildren){var i=this._children[t];return i.parent=null,0!=i.sortingOrder&&this._sortingChildCount--,this._children.splice(t,1),i.group=null,i.inContainer&&(this._container.removeChild(i.displayObject),this._childrenRenderOrder==S.ChildrenRenderOrder.Arch&&S.GTimers.inst.callLater(this.buildNativeDisplayList,this)),e&&i.dispose(),this.setBoundsChangedFlag(),i}throw"Invalid child index"},t.prototype.removeChildren=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=-1),void 0===i&&(i=!1),(e<0||e>=this.numChildren)&&(e=this.numChildren-1);for(var n=t;n<=e;++n)this.removeChildAt(t,i)},t.prototype.getChildAt=function(t){if(void 0===t&&(t=0),0<=t&&t<this.numChildren)return this._children[t];throw"Invalid child index"},t.prototype.getChild=function(t){for(var e=this._children.length,i=0;i<e;++i)if(this._children[i].name==t)return this._children[i];return null},t.prototype.getVisibleChild=function(t){for(var e=this._children.length,i=0;i<e;++i){var n=this._children[i];if(n.internalVisible&&n.internalVisible&&n.name==t)return n}return null},t.prototype.getChildInGroup=function(t,e){for(var i=this._children.length,n=0;n<i;++n){var o=this._children[n];if(o.group==e&&o.name==t)return o}return null},t.prototype.getChildById=function(t){for(var e=this._children.length,i=0;i<e;++i)if(this._children[i]._id==t)return this._children[i];return null},t.prototype.getChildIndex=function(t){return this._children.indexOf(t)},t.prototype.setChildIndex=function(t,e){void 0===e&&(e=0);var i=this._children.indexOf(t);if(-1==i)throw"Not a child of this container";if(0==t.sortingOrder){var n=this._children.length;0<this._sortingChildCount&&e>n-this._sortingChildCount-1&&(e=n-this._sortingChildCount-1),this._setChildIndex(t,i,e)}},t.prototype.setChildIndexBefore=function(t,e){var i=this._children.indexOf(t);if(-1==i)throw"Not a child of this container";if(0!=t.sortingOrder)return i;var n=this._children.length;return 0<this._sortingChildCount&&e>n-this._sortingChildCount-1&&(e=n-this._sortingChildCount-1),i<e?this._setChildIndex(t,i,e-1):this._setChildIndex(t,i,e)},t.prototype._setChildIndex=function(t,e,i){void 0===i&&(i=0);var n=this._children.length;if(n<i&&(i=n),e==i)return e;if(this._children.splice(e,1),this._children.splice(i,0,t),t.inContainer){var o,r=0;if(this._childrenRenderOrder==S.ChildrenRenderOrder.Ascent){for(o=0;o<i;o++)this._children[o].inContainer&&r++;r==this._container.numChildren&&r--,this._container.setChildIndex(t.displayObject,r)}else if(this._childrenRenderOrder==S.ChildrenRenderOrder.Descent){for(o=n-1;i<o;o--)this._children[o].inContainer&&r++;r==this._container.numChildren&&r--,this._container.setChildIndex(t.displayObject,r)}else S.GTimers.inst.callLater(this.buildNativeDisplayList,this);this.setBoundsChangedFlag()}return i},t.prototype.swapChildren=function(t,e){var i=this._children.indexOf(t),n=this._children.indexOf(e);if(-1==i||-1==n)throw"Not a child of this container";this.swapChildrenAt(i,n)},t.prototype.swapChildrenAt=function(t,e){void 0===e&&(e=0);var i=this._children[t],n=this._children[e];this.setChildIndex(i,e),this.setChildIndex(n,t)},Object.defineProperty(t.prototype,"numChildren",{get:function(){return this._children.length},enumerable:!0,configurable:!0}),t.prototype.isAncestorOf=function(t){if(null==t)return!1;for(var e=t.parent;e;){if(e==this)return!0;e=e.parent}return!1},t.prototype.addController=function(t){this._controllers.push(t),(t.parent=this).applyController(t)},t.prototype.getControllerAt=function(t){return this._controllers[t]},t.prototype.getController=function(t){for(var e=this._controllers.length,i=0;i<e;++i){var n=this._controllers[i];if(n.name==t)return n}return null},t.prototype.removeController=function(t){var e=this._controllers.indexOf(t);if(-1==e)throw"controller not exists";t.parent=null,this._controllers.splice(e,1);for(var i=this._children.length,n=0;n<i;n++){this._children[n].handleControllerChanged(t)}},Object.defineProperty(t.prototype,"controllers",{get:function(){return this._controllers},enumerable:!0,configurable:!0}),t.prototype.childStateChanged=function(t){if(!this._buildingDisplayList){var e,i,n=this._children.length;if(t instanceof S.GGroup)for(i=0;i<n;i++)(e=this._children[i]).group==t&&this.childStateChanged(e);else if(t.displayObject)if(t.internalVisible){if(!t.displayObject.parent){var o=0;if(this._childrenRenderOrder==S.ChildrenRenderOrder.Ascent){for(i=0;i<n&&(e=this._children[i])!=t;i++)null!=e.displayObject&&null!=e.displayObject.parent&&o++;this._container.addChildAt(t.displayObject,o)}else if(this._childrenRenderOrder==S.ChildrenRenderOrder.Descent){for(i=n-1;0<=i&&(e=this._children[i])!=t;i--)null!=e.displayObject&&null!=e.displayObject.parent&&o++;this._container.addChildAt(t.displayObject,o)}else this._container.addChild(t.displayObject),S.GTimers.inst.callLater(this.buildNativeDisplayList,this)}}else t.displayObject.parent&&this._container.removeChild(t.displayObject)}},t.prototype.buildNativeDisplayList=function(){var t,e,i=this._children.length;if(0!=i)switch(this._childrenRenderOrder){case S.ChildrenRenderOrder.Ascent:for(t=0;t<i;t++)null!=(e=this._children[t]).displayObject&&e.internalVisible&&this._container.addChild(e.displayObject);break;case S.ChildrenRenderOrder.Descent:for(t=i-1;0<=t;t--)null!=(e=this._children[t]).displayObject&&e.internalVisible&&this._container.addChild(e.displayObject);break;case S.ChildrenRenderOrder.Arch:for(t=0;t<this._apexIndex;t++)null!=(e=this._children[t]).displayObject&&e.internalVisible&&this._container.addChild(e.displayObject);for(t=i-1;t>=this._apexIndex;t--)null!=(e=this._children[t]).displayObject&&e.internalVisible&&this._container.addChild(e.displayObject)}},t.prototype.applyController=function(t){this._applyingController=t;for(var e=this._children.length,i=0;i<e;i++)this._children[i].handleControllerChanged(t);this._applyingController=null,t.runActions()},t.prototype.applyAllControllers=function(){for(var t=this._controllers.length,e=0;e<t;++e)this.applyController(this._controllers[e])},t.prototype.adjustRadioGroupDepth=function(t,e){var i,n,o=this._children.length,r=-1,s=-1;for(i=0;i<o;i++)(n=this._children[i])==t?r=i:n instanceof S.GButton&&n.relatedController==e&&s<i&&(s=i);r<s&&(null!=this._applyingController&&this._children[s].handleControllerChanged(this._applyingController),this.swapChildrenAt(r,s))},t.prototype.getTransitionAt=function(t){return this._transitions[t]},t.prototype.getTransition=function(t){for(var e=this._transitions.length,i=0;i<e;++i){var n=this._transitions[i];if(n.name==t)return n}return null},t.prototype.isChildInView=function(t){return null!=this._rootContainer.scrollRect?0<=t.x+t.width&&t.x<=this.width&&0<=t.y+t.height&&t.y<=this.height:null==this._scrollPane||this._scrollPane.isChildInView(t)},t.prototype.getFirstChildInView=function(){for(var t=this._children.length,e=0;e<t;++e){var i=this._children[e];if(this.isChildInView(i))return e}return-1},Object.defineProperty(t.prototype,"scrollPane",{get:function(){return this._scrollPane},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opaque",{get:function(){return this._opaque},set:function(t){this._opaque!=t&&(this._opaque=t,this._opaque?this.updateOpaque():this._rootContainer.hitArea=null)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"margin",{get:function(){return this._margin},set:function(t){this._margin.copy(t),null!=this._rootContainer.scrollRect&&(this._container.x=this._margin.left+this._alignOffset.x,this._container.y=this._margin.top+this._alignOffset.y),this.handleSizeChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childrenRenderOrder",{get:function(){return this._childrenRenderOrder},set:function(t){this._childrenRenderOrder!=t&&(this._childrenRenderOrder=t,this.buildNativeDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"apexIndex",{get:function(){return this._apexIndex},set:function(t){this._apexIndex!=t&&(this._apexIndex=t,this._childrenRenderOrder==S.ChildrenRenderOrder.Arch&&this.buildNativeDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._rootContainer.mask},set:function(t){this._rootContainer.mask=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baseUserData",{get:function(){var t=this.packageItem.rawData;return t.seek(0,4),t.readS()},enumerable:!0,configurable:!0}),t.prototype.updateOpaque=function(){this._rootContainer.hitArea||(this._rootContainer.hitArea=new egret.Rectangle),this._rootContainer.hitArea.setTo(0,0,this.width,this.height)},t.prototype.updateScrollRect=function(){var t=this._rootContainer.scrollRect;null==t&&(t=new egret.Rectangle);var e=this.width-this._margin.right,i=this.height-this._margin.bottom;t.setTo(0,0,e,i),this._rootContainer.scrollRect=t},t.prototype.setupScroll=function(t){this._rootContainer==this._container&&(this._container=new egret.DisplayObjectContainer,this._rootContainer.addChild(this._container)),this._scrollPane=new S.ScrollPane(this),this._scrollPane.setup(t),this.setBoundsChangedFlag()},t.prototype.setupOverflow=function(t){t==S.OverflowType.Hidden?(this._rootContainer==this._container&&(this._container=new egret.DisplayObjectContainer,this._rootContainer.addChild(this._container)),this.updateScrollRect(),this._container.x=this._margin.left,this._container.y=this._margin.top):0==this._margin.left&&0==this._margin.top||(this._rootContainer==this._container&&(this._container=new egret.DisplayObjectContainer,this._rootContainer.addChild(this._container)),this._container.x=this._margin.left,this._container.y=this._margin.top),this.setBoundsChangedFlag()},t.prototype.handleSizeChanged=function(){this._scrollPane?this._scrollPane.onOwnerSizeChanged():null!=this._rootContainer.scrollRect&&this.updateScrollRect(),this._opaque&&this.updateOpaque()},t.prototype.handleGrayedChanged=function(){var t=this.getController("grayed");if(null==t)for(var e=this.grayed,i=this._children.length,n=0;n<i;++n)this._children[n].grayed=e;else t.selectedIndex=this.grayed?1:0},t.prototype.handleControllerChanged=function(t){a.prototype.handleControllerChanged.call(this,t),null!=this._scrollPane&&this._scrollPane.handleControllerChanged(t)},t.prototype.setBoundsChangedFlag=function(){(this._scrollPane||this._trackBounds)&&(this._boundsChanged||(this._boundsChanged=!0,egret.callLater(this.__render,this)))},t.prototype.__render=function(){if(this._boundsChanged){var t=this._children.length;if(0<t)for(var e=0;e<t;e++){this._children[e].ensureSizeCorrect()}this.updateBounds()}},t.prototype.ensureBoundsCorrect=function(){var t=this._children.length;if(0<t)for(var e=0;e<t;e++){this._children[e].ensureSizeCorrect()}this._boundsChanged&&this.updateBounds()},t.prototype.updateBounds=function(){var t=0,e=0,i=0,n=0,o=this._children.length;if(0<o){t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY;var r=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=0,h=0;for(h=0;h<o;h++){var l=this._children[h];(a=l.x)<t&&(t=a),(a=l.y)<e&&(e=a),r<(a=l.x+l.actualWidth)&&(r=a),s<(a=l.y+l.actualHeight)&&(s=a)}i=r-t,n=s-e}this.setBounds(t,e,i,n)},t.prototype.setBounds=function(t,e,i,n){void 0===n&&(n=0),this._boundsChanged=!1,this._scrollPane&&this._scrollPane.setContentSize(Math.round(t+i),Math.round(e+n))},Object.defineProperty(t.prototype,"viewWidth",{get:function(){return null!=this._scrollPane?this._scrollPane.viewWidth:this.width-this._margin.left-this._margin.right},set:function(t){null!=this._scrollPane?this._scrollPane.viewWidth=t:this.width=t+this._margin.left+this._margin.right},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewHeight",{get:function(){return null!=this._scrollPane?this._scrollPane.viewHeight:this.height-this._margin.top-this._margin.bottom},set:function(t){null!=this._scrollPane?this._scrollPane.viewHeight=t:this.height=t+this._margin.top+this._margin.bottom},enumerable:!0,configurable:!0}),t.prototype.getSnappingPosition=function(t,e,i){i||(i=new egret.Point);var n=this._children.length;if(0==n)return i.x=0,i.y=0,i;this.ensureBoundsCorrect();var o=null,r=null,s=0;if(0!=e){for(;s<n;s++)if(e<(o=this._children[s]).y){if(0==s){e=0;break}e=e<(r=this._children[s-1]).y+r.actualHeight/2?r.y:o.y;break}s==n&&(e=o.y)}if(0!=t){for(0<s&&s--;s<n;s++)if(t<(o=this._children[s]).x){if(0==s){t=0;break}t=t<(r=this._children[s-1]).x+r.actualWidth/2?r.x:o.x;break}s==n&&(t=o.x)}return i.x=t,i.y=e,i},t.prototype.childSortingOrderChanged=function(t,e,i){if(void 0===i&&(i=0),0==i)this._sortingChildCount--,this.setChildIndex(t,this._children.length);else{0==e&&this._sortingChildCount++;var n=this._children.indexOf(t),o=this.getInsertPosForSortingChild(t);n<o?this._setChildIndex(t,n,o-1):this._setChildIndex(t,n,o)}},t.prototype.constructFromResource=function(){this.constructFromResource2(null,0)},t.prototype.constructFromResource2=function(t,e){var i,n,o,r,s,a;this.packageItem.decoded||(this.packageItem.decoded=!0,S.TranslationHelper.translateComponent(this.packageItem));var h=this.packageItem.rawData;h.seek(0,0),this._underConstruct=!0,this.sourceWidth=h.readInt(),this.sourceHeight=h.readInt(),this.initWidth=this.sourceWidth,this.initHeight=this.sourceHeight,this.setSize(this.sourceWidth,this.sourceHeight),h.readBool()&&(this.minWidth=h.readInt(),this.maxWidth=h.readInt(),this.minHeight=h.readInt(),this.maxHeight=h.readInt()),h.readBool()&&(s=h.readFloat(),a=h.readFloat(),this.internalSetPivot(s,a,h.readBool())),h.readBool()&&(this._margin.top=h.readInt(),this._margin.bottom=h.readInt(),this._margin.left=h.readInt(),this._margin.right=h.readInt());var l=h.readByte();if(l==S.OverflowType.Scroll){var c=h.position;h.seek(0,7),this.setupScroll(h),h.position=c}else this.setupOverflow(l);h.readBool()&&h.skip(8),this._buildingDisplayList=!0,h.seek(0,1);var _,u=h.readShort();for(i=0;i<u;i++){r=h.readShort(),r+=h.position;var p=new S.Controller;this._controllers.push(p),p.parent=this,p.setup(h),h.position=r}h.seek(0,2);var d=h.readShort();for(i=0;i<d;i++){if(n=h.readShort(),o=h.position,null!=t)_=t[e+i];else{h.seek(o,0);var g,f=h.readByte(),y=h.readS(),m=h.readS(),b=null;if(null!=y)b=null!=(g=null!=m?S.UIPackage.getById(m):this.packageItem.owner)?g.getItemById(y):null;null!=b?((_=S.UIObjectFactory.newObject(b)).packageItem=b,_.constructFromResource()):_=S.UIObjectFactory.newObject2(f)}_._underConstruct=!0,_.setup_beforeAdd(h,o),(_.parent=this)._children.push(_),h.position=o+n}for(h.seek(0,3),this.relations.setup(h,!0),h.seek(0,2),h.skip(2),i=0;i<d;i++)r=h.readShort(),r+=h.position,h.seek(h.position,3),this._children[i].relations.setup(h,!1),h.position=r;for(h.seek(0,2),h.skip(2),i=0;i<d;i++)r=h.readShort(),r+=h.position,(_=this._children[i]).setup_afterAdd(h,h.position),_._underConstruct=!1,h.position=r;h.seek(0,4),h.skip(2),this.opaque=h.readBool();var v=h.readShort();-1!=v&&(this.mask=this.getChildAt(v).displayObject,h.readBool());h.readS();h.seek(0,5);var w=h.readShort();for(i=0;i<w;i++){r=h.readShort(),r+=h.position;var C=new S.Transition(this);C.setup(h),this._transitions.push(C),h.position=r}0<this._transitions.length&&(this.displayObject.addEventListener(egret.Event.ADDED_TO_STAGE,this.___added,this),this.displayObject.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.___removed,this)),this.applyAllControllers(),this._buildingDisplayList=!1,this._underConstruct=!1,this.buildNativeDisplayList(),this.setBoundsChangedFlag(),this.packageItem.objectType!=S.ObjectType.Component&&this.constructExtension(h),this.constructFromXML(null)},t.prototype.constructExtension=function(t){},t.prototype.constructFromXML=function(t){},t.prototype.setup_afterAdd=function(t,e){a.prototype.setup_afterAdd.call(this,t,e),t.seek(e,4);var i=t.readShort();null!=i&&null!=this._scrollPane&&(this._scrollPane.pageController=this._parent.getControllerAt(i));for(var n=t.readShort(),o=0;o<n;o++){var r=this.getController(t.readS()),s=t.readS();null!=r&&(r.selectedPageId=s)}},t.prototype.___added=function(t){for(var e=this._transitions.length,i=0;i<e;++i)this._transitions[i].onOwnerAddedToStage()},t.prototype.___removed=function(t){for(var e=this._transitions.length,i=0;i<e;++i)this._transitions[i].onOwnerRemovedFromStage()},t}(S.GObject);S.GComponent=t,__reflect(t.prototype,"fairygui.GComponent")}(fairygui||(fairygui={})),function(i){var t=function(){function t(){this._count=0,this._pool={}}return t.prototype.clear=function(){for(var t in this._pool)for(var e=this._pool[t],i=e.length,n=0;n<i;n++)e[n].dispose();this._pool={},this._count=0},Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),t.prototype.getObject=function(t){if(null==(t=i.UIPackage.normalizeURL(t)))return null;var e=this._pool[t];return null!=e&&e.length?(this._count--,e.shift()):i.UIPackage.createObjectFromURL(t)},t.prototype.returnObject=function(t){var e=t.resourceURL;if(e){var i=this._pool[e];null==i&&(i=new Array,this._pool[e]=i),this._count++,i.push(t)}},t}();i.GObjectPool=t,__reflect(t.prototype,"fairygui.GObjectPool")}(fairygui||(fairygui={})),function(G){var t=function(n){function z(){var t=n.call(this)||this;return t._fontSize=0,t._leading=0,t._letterSpacing=0,t._textWidth=0,t._textHeight=0,t._fontSize=12,t._align=G.AlignType.Left,t._verticalAlign=G.VertAlignType.Top,t._text="",t._leading=3,t._color=0,t._templateVars=null,t._autoSize=G.AutoSizeType.Both,t._widthAutoSize=!0,t._heightAutoSize=!0,t._bitmapPool=new Array,t}return __extends(z,n),z.prototype.createDisplayObject=function(){this._textField=new egret.TextField,(this._textField.$owner=this)._textField.touchEnabled=!1,this.setDisplayObject(this._textField)},z.prototype.switchBitmapMode=function(t){t&&this.displayObject==this._textField?(null==this._bitmapContainer&&(this._bitmapContainer=new egret.Sprite,this._bitmapContainer.$owner=this),this.switchDisplayObject(this._bitmapContainer)):t||this.displayObject!=this._bitmapContainer||this.switchDisplayObject(this._textField)},z.prototype.dispose=function(){n.prototype.dispose.call(this),this._bitmapFont=null},Object.defineProperty(z.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t,null==this._text&&(this._text=""),this.updateGear(6),this.parent&&this.parent._underConstruct?this.renderNow():this.render()},enumerable:!0,configurable:!0}),z.prototype.updateTextFieldText=function(){var t=this._text;null!=this._templateVars&&(t=this.parseTemplate(t)),this._ubbEnabled?(t=t.replace(/<br>/g,"\n"),this._textField.textFlow=(new egret.HtmlTextParser).parser(G.ToolSet.parseUBB(G.ToolSet.encodeHTML(t)))):this._textField.text=t},Object.defineProperty(z.prototype,"font",{get:function(){return this._font},set:function(t){this._font!=t&&(this._font=t,this.updateTextFormat())},enumerable:!0,configurable:!0}),Object.defineProperty(z.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){t<0||this._fontSize!=t&&(this._fontSize=t,this.updateTextFormat())},enumerable:!0,configurable:!0}),Object.defineProperty(z.prototype,"color",{get:function(){return this._color},set:function(t){this._color!=t&&(this._color=t,this.updateGear(4),this.updateTextFormat())},enumerable:!0,configurable:!0}),Object.defineProperty(z.prototype,"align",{get:function(){return this._align},set:function(t){this._align!=t&&(this._align=t,this._textField.textAlign=this.getAlignTypeString(this._align),this._bitmapFont&&!this._underConstruct&&this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(z.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this._textField.verticalAlign=this.getVertAlignTypeString(this._verticalAlign),this._bitmapFont&&!this._underConstruct&&this.render())},enumerable:!0,configurable:!0}),z.prototype.getAlignTypeString=function(t){return t==G.AlignType.Left?egret.HorizontalAlign.LEFT:t==G.AlignType.Center?egret.HorizontalAlign.CENTER:egret.HorizontalAlign.RIGHT},z.prototype.getVertAlignTypeString=function(t){return t==G.VertAlignType.Top?egret.VerticalAlign.TOP:t==G.VertAlignType.Middle?egret.VerticalAlign.MIDDLE:egret.VerticalAlign.BOTTOM},Object.defineProperty(z.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!=t&&(this._leading=t,this.updateTextFormat())},enumerable:!0,configurable:!0}),Object.defineProperty(z.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!=t&&(this._letterSpacing=t,this.updateTextFormat())},enumerable:!0,configurable:!0}),Object.defineProperty(z.prototype,"underline",{get:function(){return!1},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(z.prototype,"bold",{get:function(){return this._textField.bold},set:function(t){this._textField.bold=t},enumerable:!0,configurable:!0}),Object.defineProperty(z.prototype,"italic",{get:function(){return this._textField.italic},set:function(t){this._textField.italic=t},enumerable:!0,configurable:!0}),Object.defineProperty(z.prototype,"singleLine",{get:function(){return!this._textField.multiline},set:function(t){t=!t,this._textField.multiline!=t&&(this._textField.multiline=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(z.prototype,"stroke",{get:function(){return this._textField.stroke},set:function(t){this._textField.stroke=t},enumerable:!0,configurable:!0}),Object.defineProperty(z.prototype,"strokeColor",{get:function(){return this._textField.strokeColor},set:function(t){this._textField.strokeColor=t,this.updateGear(4)},enumerable:!0,configurable:!0}),Object.defineProperty(z.prototype,"ubbEnabled",{get:function(){return this._ubbEnabled},set:function(t){this._ubbEnabled!=t&&(this._ubbEnabled=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(z.prototype,"autoSize",{get:function(){return this._autoSize},set:function(t){this._autoSize!=t&&(this._autoSize=t,this._widthAutoSize=t==G.AutoSizeType.Both,this._heightAutoSize=t==G.AutoSizeType.Both||t==G.AutoSizeType.Height,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(z.prototype,"textWidth",{get:function(){return this._requireRender&&this.renderNow(),this._textWidth},enumerable:!0,configurable:!0}),z.prototype.ensureSizeCorrect=function(){this._sizeDirty&&this._requireRender&&this.renderNow()},z.prototype.updateTextFormat=function(){if(this._textField.size=this._fontSize,this._bitmapFont=null,G.ToolSet.startsWith(this._font,"ui://")){var t=G.UIPackage.getItemByURL(this._font);t&&(this._bitmapFont=t.owner.getItemAsset(t))}null==this._bitmapFont&&(this._font?this._textField.fontFamily=this._font:this._textField.fontFamily=G.UIConfig.defaultFont),this.grayed?this._textField.textColor=11184810:this._textField.textColor=this._color,this._textField.lineSpacing=this._leading,this._underConstruct||this.render()},z.prototype.render=function(){this._requireRender||(this._requireRender=!0,egret.callLater(this.__render,this)),this._sizeDirty||!this._widthAutoSize&&!this._heightAutoSize||(this._sizeDirty=!0,this.dispatchEventWith(G.GObject.SIZE_DELAY_CHANGE))},z.prototype.__render=function(){this._requireRender&&this.renderNow()},z.prototype.renderNow=function(t){if(void 0===t&&(t=!0),this._requireRender=!1,this._sizeDirty=!1,null==this._bitmapFont){this.switchBitmapMode(!1),this._textField.width=this._widthAutoSize?1e4:Math.ceil(this.width),this.updateTextFieldText(),this._textWidth=Math.ceil(this._textField.textWidth),0<this._textWidth&&(this._textWidth+=4),this._textHeight=Math.ceil(this._textField.textHeight),0<this._textHeight&&(this._textHeight+=4);var e,i=0;this._widthAutoSize?(e=this._textWidth,this._textField.width=e):e=this.width,this._heightAutoSize?(i=this._textHeight,this._textField.height!=this._textHeight&&(this._textField.height=this._textHeight)):(i=this.height,this._textHeight>i&&(this._textHeight=i)),t&&(this._updatingSize=!0,this.setSize(e,i),this._updatingSize=!1)}else this.renderWithBitmapFont(t)},z.prototype.renderWithBitmapFont=function(t){this.switchBitmapMode(!0);for(var e=this._bitmapContainer.numChildren,i=0;i<e;i++){var n=this._bitmapContainer.getChildAt(i);this._bitmapPool.push(n)}this._bitmapContainer.removeChildren(),this._lines?R.returnList(this._lines):this._lines=new Array;var o,r=this._letterSpacing,s=this._leading-1,a=this.width-2*z.GUTTER_X,h=0,l=0,c=0,_=0,u=0,p=0,d=0,g=0,f=0,y="",m=z.GUTTER_Y,b=!this._widthAutoSize&&this._textField.multiline,v=this._bitmapFont.resizable?this._fontSize/this._bitmapFont.size:1;this._textWidth=0,this._textHeight=0;var w=this._text;null!=this._templateVars&&(w=this.parseTemplate(w));for(var C=w.length,S=0;S<C;++S){var T=w.charAt(S),x=T.charCodeAt(0);if(10!=x){if(65<=x&&x<=90||97<=x&&x<=122?(0==p&&(d=h),p++):(0<p&&(g=h),p=0),32==x)_=Math.ceil(this._fontSize/2),u=this._fontSize;else{var I=this._bitmapFont.glyphs[T];I?(_=Math.ceil(I.advance*v),u=Math.ceil(I.lineHeight*v)):u=_=0}if(c<u&&(c=u),l<u&&(l=u),0!=h&&(h+=r),h+=_,!b||h<=a)y+=T;else{if((o=R.borrow()).height=l,o.textHeight=c,0==y.length)o.text=T;else if(0<p&&0<g){var O=(y+=T).length-p;o.text=G.ToolSet.trimRight(y.substr(0,O)),o.width=g,y=y.substr(O),h-=d}else o.text=y,o.width=h-(_+r),y=T,h=_,c=l=u;o.y=m,m+=o.height+s,o.width>this._textWidth&&(this._textWidth=o.width),g=d=p=0,this._lines.push(o)}}else y+=T,(o=R.borrow()).width=h,0==c&&(0==f&&(f=this._fontSize),0==l&&(l=f),c=l),f=o.height=l,o.textHeight=c,o.text=y,o.y=m,m+=o.height+s,o.width>this._textWidth&&(this._textWidth=o.width),this._lines.push(o),y="",g=d=p=c=l=h=0}0<y.length&&((o=R.borrow()).width=h,0==l&&(l=f),0==c&&(c=l),o.height=l,o.textHeight=c,o.text=y,o.y=m,o.width>this._textWidth&&(this._textWidth=o.width),this._lines.push(o)),0<this._textWidth&&(this._textWidth+=2*z.GUTTER_X),0==this._lines.length?this._textHeight=0:(o=this._lines[this._lines.length-1],this._textHeight=o.y+o.height+z.GUTTER_Y);var P,j=0;if(P=this._widthAutoSize?0==this._textWidth?0:this._textWidth:this.width,j=this._heightAutoSize?0==this._textHeight?0:this._textHeight:this.height,t&&(this._updatingSize=!0,this.setSize(P,j),this._updatingSize=!1,this.doAlign()),0!=P&&0!=j){var L=z.GUTTER_X,k=0,E=0;a=this.width-2*z.GUTTER_X;var B=this._lines.length;for(i=0;i<B;i++){o=this._lines[i],L=z.GUTTER_X,k=this._align==G.AlignType.Center?(a-o.width)/2:this._align==G.AlignType.Right?a-o.width:0,C=o.text.length;for(var A=0;A<C;A++){var M;if(10!=(x=(T=o.text.charAt(A)).charCodeAt(0)))if(32!=x)if(null!=(I=this._bitmapFont.glyphs[T]))E=(o.height+o.textHeight)/2-Math.ceil(I.lineHeight*v),this._bitmapPool.length?M=this._bitmapPool.pop():(M=new egret.Bitmap).smoothing=!0,M.x=L+k+Math.ceil(I.offsetX*v),M.y=o.y+E+Math.ceil(I.offsetY*v),M.texture=I.texture,M.scaleX=v,M.scaleY=v,this._bitmapContainer.addChild(M),L+=r+Math.ceil(I.advance*v);else L+=r;else L+=r+Math.ceil(this._fontSize/2)}}}},z.prototype.handleSizeChanged=function(){this._updatingSize||(null!=this._bitmapFont?this._widthAutoSize?this.doAlign():this.render():this._underConstruct?(this._textField.width=this.width,this._textField.height=this.height):this._widthAutoSize||(this._heightAutoSize?this._textField.width=this.width:(this._textField.width=this.width,this._textField.height=this.height)))},z.prototype.parseTemplate=function(t){for(var e,i,n,o,r=0,s="";-1!=(e=t.indexOf("{",r));)if(0<e&&92==t.charCodeAt(e-1))s+=t.substring(r,e-1),s+="{",r=e+1;else{if(s+=t.substring(r,e),r=e,-1==(e=t.indexOf("}",r)))break;e!=r+1?-1!=(i=(n=t.substring(r+1,e)).indexOf("="))?s+=null==(o=this._templateVars[n.substring(0,i)])?n.substring(i+1):o:null!=(o=this._templateVars[n])&&(s+=o):s+=t.substr(r,2),r=e+1}return r<t.length&&(s+=t.substr(r)),s},Object.defineProperty(z.prototype,"templateVars",{get:function(){return this._templateVars},set:function(t){null==this._templateVars&&null==t||(this._templateVars=t,this.flushVars())},enumerable:!0,configurable:!0}),z.prototype.setVar=function(t,e){return this._templateVars||(this._templateVars={}),this._templateVars[t]=e,this},z.prototype.flushVars=function(){this.render()},z.prototype.handleGrayedChanged=function(){n.prototype.handleGrayedChanged.call(this),this.updateTextFormat()},z.prototype.doAlign=function(){if(this._verticalAlign==G.VertAlignType.Top||0==this._textHeight)this._yOffset=z.GUTTER_Y;else{var t=this.height-this._textHeight;t<0&&(t=0),this._verticalAlign==G.VertAlignType.Middle?this._yOffset=Math.floor(t/2):this._yOffset=Math.floor(t)}this.displayObject.y=this.y+this._yOffset},z.prototype.setup_beforeAdd=function(t,e){n.prototype.setup_beforeAdd.call(this,t,e),t.seek(e,5),this._font=t.readS(),this._fontSize=t.readShort(),this._color=t.readColor(),this.align=t.readByte(),this.verticalAlign=t.readByte(),this._leading=t.readShort(),this._letterSpacing=t.readShort(),this._ubbEnabled=t.readBool(),this._autoSize=t.readByte(),this._widthAutoSize=this._autoSize==G.AutoSizeType.Both,this._heightAutoSize=this._autoSize==G.AutoSizeType.Both||this._autoSize==G.AutoSizeType.Height,t.readBool(),this._textField.italic=t.readBool(),this._textField.bold=t.readBool(),this._textField.multiline=!t.readBool(),t.readBool()&&(this._textField.strokeColor=t.readColor(),this.stroke=t.readFloat()+1),t.readBool()&&t.skip(12),t.readBool()&&(this._templateVars={})},z.prototype.setup_afterAdd=function(t,e){n.prototype.setup_afterAdd.call(this,t,e),this.updateTextFormat(),t.seek(e,6);var i=t.readS();null!=i&&(this.text=i),this._sizeDirty=!1},z.GUTTER_X=2,z.GUTTER_Y=2,z}(G.GObject);G.GTextField=t,__reflect(t.prototype,"fairygui.GTextField");var R=function(){function o(){this.width=0,this.height=0,this.textHeight=0,this.y=0}return o.borrow=function(){if(o.pool.length){var t=o.pool.pop();return t.width=0,t.height=0,t.textHeight=0,t.text=null,t.y=0,t}return new o},o.returns=function(t){o.pool.push(t)},o.returnList=function(t){for(var e=t.length,i=0;i<e;i++){var n=t[i];o.pool.push(n)}t.length=0},o.pool=[],o}();G.LineInfo=R,__reflect(R.prototype,"fairygui.LineInfo")}(fairygui||(fairygui={})),function(t){var e=function(){function t(){this.width=0,this.height=0,this.tileGridIndice=0,this.interval=0,this.repeatDelay=0}return t.prototype.load=function(){return this.owner.getItemAsset(this)},t.prototype.toString=function(){return this.name},t}();t.PackageItem=e,__reflect(e.prototype,"fairygui.PackageItem")}(fairygui||(fairygui={})),function(t){var e=function(){this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.width=0,this.height=0,this.advance=0,this.lineHeight=0,this.channel=0};(fairygui||(fairygui={})).BMGlyph=e,__reflect(e.prototype,"fairygui.BMGlyph")}(),function(t){var e=function(r){function t(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=-1);var o=r.call(this,t,!1)||this;return o.touchPointID=0,o.stageX=e,o.stageY=i,o.touchPointID=n,o}return __extends(t,r),t.prototype.preventDefault=function(){this._prevented=!0},t.prototype.isDefaultPrevented=function(){return this._prevented},t.DRAG_START="__dragStart",t.DRAG_END="__dragEnd",t.DRAG_MOVING="__dragMoving",t}(egret.Event);t.DragEvent=e,__reflect(e.prototype,"fairygui.DragEvent")}(fairygui||(fairygui={})),function(t){var e=function(n){function t(t,e){void 0===e&&(e=null);var i=n.call(this,t,!1)||this;return i.source=e,i}return __extends(t,n),t.DROP="__drop",t}(egret.Event);t.DropEvent=e,__reflect(e.prototype,"fairygui.DropEvent")}(fairygui||(fairygui={})),function(t){var e=function(r){function t(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=0),void 0===n&&(n=0);var o=r.call(this,t,!1)||this;return o.itemObject=e,o.stageX=i,o.stageY=n,o}return __extends(t,r),t.CLICK="___itemClick",t}(egret.Event);t.ItemEvent=e,__reflect(e.prototype,"fairygui.ItemEvent")}(fairygui||(fairygui={})),function(t){var e=function(e){function t(t){return e.call(this,t,!1)||this}return __extends(t,e),t.CHANGED="___stateChanged",t}(egret.Event);t.StateChangeEvent=e,__reflect(e.prototype,"fairygui.StateChangeEvent")}(fairygui||(fairygui={})),function(s){var t=function(e){function n(){var t=e.call(this)||this;return t._selectedIndex=0,t._previousIndex=0,t.changing=!1,t._pageIds=[],t._pageNames=[],t._selectedIndex=-1,t._previousIndex=-1,t}return __extends(n,e),n.prototype.dispose=function(){},Object.defineProperty(n.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){if(this._selectedIndex!=t){if(t>this._pageIds.length-1)throw"index out of bounds: "+t;this.changing=!0,this._previousIndex=this._selectedIndex,this._selectedIndex=t,this.parent.applyController(this),this.dispatchEvent(new s.StateChangeEvent(s.StateChangeEvent.CHANGED)),this.changing=!1}},enumerable:!0,configurable:!0}),n.prototype.setSelectedIndex=function(t){if(void 0===t&&(t=0),this._selectedIndex!=t){if(t>this._pageIds.length-1)throw"index out of bounds: "+t;this.changing=!0,this._previousIndex=this._selectedIndex,this._selectedIndex=t,this.parent.applyController(this),this.changing=!1}},Object.defineProperty(n.prototype,"previsousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectedPage",{get:function(){return-1==this._selectedIndex?null:this._pageNames[this._selectedIndex]},set:function(t){var e=this._pageNames.indexOf(t);-1==e&&(e=0),this.selectedIndex=e},enumerable:!0,configurable:!0}),n.prototype.setSelectedPage=function(t){var e=this._pageNames.indexOf(t);-1==e&&(e=0),this.setSelectedIndex(e)},Object.defineProperty(n.prototype,"previousPage",{get:function(){return-1==this._previousIndex?null:this._pageNames[this._previousIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pageCount",{get:function(){return this._pageIds.length},enumerable:!0,configurable:!0}),n.prototype.getPageName=function(t){return void 0===t&&(t=0),this._pageNames[t]},n.prototype.addPage=function(t){void 0===t&&(t=""),this.addPageAt(t,this._pageIds.length)},n.prototype.addPageAt=function(t,e){void 0===e&&(e=0);var i=""+n._nextPageId++;e==this._pageIds.length?(this._pageIds.push(i),this._pageNames.push(t)):(this._pageIds.splice(e,0,i),this._pageNames.splice(e,0,t))},n.prototype.removePage=function(t){var e=this._pageNames.indexOf(t);-1!=e&&(this._pageIds.splice(e,1),this._pageNames.splice(e,1),this._selectedIndex>=this._pageIds.length?this.selectedIndex=this._selectedIndex-1:this.parent.applyController(this))},n.prototype.removePageAt=function(t){void 0===t&&(t=0),this._pageIds.splice(t,1),this._pageNames.splice(t,1),this._selectedIndex>=this._pageIds.length?this.selectedIndex=this._selectedIndex-1:this.parent.applyController(this)},n.prototype.clearPages=function(){this._pageIds.length=0,this._pageNames.length=0,-1!=this._selectedIndex?this.selectedIndex=-1:this.parent.applyController(this)},n.prototype.hasPage=function(t){return-1!=this._pageNames.indexOf(t)},n.prototype.getPageIndexById=function(t){return this._pageIds.indexOf(t)},n.prototype.getPageIdByName=function(t){var e=this._pageNames.indexOf(t);return-1!=e?this._pageIds[e]:null},n.prototype.getPageNameById=function(t){var e=this._pageIds.indexOf(t);return-1!=e?this._pageNames[e]:null},n.prototype.getPageId=function(t){return void 0===t&&(t=0),this._pageIds[t]},Object.defineProperty(n.prototype,"selectedPageId",{get:function(){return-1==this._selectedIndex?null:this._pageIds[this._selectedIndex]},set:function(t){var e=this._pageIds.indexOf(t);this.selectedIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"oppositePageId",{set:function(t){0<this._pageIds.indexOf(t)?this.selectedIndex=0:1<this._pageIds.length&&(this.selectedIndex=1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"previousPageId",{get:function(){return-1==this._previousIndex?null:this._pageIds[this._previousIndex]},enumerable:!0,configurable:!0}),n.prototype.runActions=function(){if(this._actions)for(var t=this._actions.length,e=0;e<t;e++)this._actions[e].run(this,this.previousPageId,this.selectedPageId)},n.prototype.setup=function(t){var e,i,n=t.position;t.seek(n,0),this.name=t.readS(),this.autoRadioGroupDepth=t.readBool(),t.seek(n,1);var o=t.readShort();for(e=0;e<o;e++)this._pageIds.push(t.readS()),this._pageNames.push(t.readS());if(t.seek(n,2),0<(o=t.readShort()))for(null==this._actions&&(this._actions=new Array),e=0;e<o;e++){i=t.readShort(),i+=t.position;var r=s.ControllerAction.createAction(t.readByte());r.setup(t),this._actions.push(r),t.position=i}null!=this.parent&&0<this._pageIds.length?this._selectedIndex=0:this._selectedIndex=-1},n._nextPageId=0,n}(egret.EventDispatcher);s.Controller=t,__reflect(t.prototype,"fairygui.Controller")}(fairygui||(fairygui={})),function(t){var e=function(){function e(){}return e.getFileName=function(t){var e=t.lastIndexOf("/");return-1!=e&&(t=t.substr(e+1)),-1!=(e=t.lastIndexOf("\\"))&&(t=t.substr(e+1)),-1!=(e=t.lastIndexOf("."))?t.substring(0,e):t},e.startsWith=function(t,e,i){return void 0===i&&(i=!1),!!t&&(!(t.length<e.length)&&(t=t.substring(0,e.length),i?t.toLowerCase()==e.toLowerCase():t==e))},e.endsWith=function(t,e,i){return void 0===i&&(i=!1),!!t&&(!(t.length<e.length)&&(t=t.substring(t.length-e.length),i?t.toLowerCase()==e.toLowerCase():t==e))},e.trim=function(t){return e.trimLeft(e.trimRight(t))},e.trimLeft=function(t){for(var e="",i=0;i<t.length&&(" "==(e=t.charAt(i))||"\n"==e||"\r"==e);i++);return t.substr(i)},e.trimRight=function(t){for(var e="",i=t.length-1;0<=i&&(" "==(e=t.charAt(i))||"\n"==e||"\r"==e);i--);return t.substring(0,i+1)},e.convertToHtmlColor=function(t,e){var i;void 0===e&&(e=!1),i=e?(t>>24&255).toString(16):"";var n=(t>>16&255).toString(16),o=(t>>8&255).toString(16),r=(255&t).toString(16);return 1==i.length&&(i="0"+i),1==n.length&&(n="0"+n),1==o.length&&(o="0"+o),1==r.length&&(r="0"+r),"#"+i+n+o+r},e.convertFromHtmlColor=function(t,e){return void 0===e&&(e=!1),t.length<1?0:("#"==t.charAt(0)&&(t=t.substr(1)),8==t.length?(parseInt(t.substr(0,2),16)<<24)+parseInt(t.substr(2),16):e?4278190080+parseInt(t,16):parseInt(t,16))},e.displayObjectToGObject=function(t){for(;null!=t&&!(t instanceof egret.Stage);){if(t.$owner)return t.$owner;t=t.parent}return null},e.encodeHTML=function(t){return t?t.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;").replace("'","&apos;"):""},e.parseUBB=function(t){return e.defaultUBBParser.parse(t)},e.clamp=function(t,e,i){return t<e?t=e:i<t&&(t=i),t},e.clamp01=function(t){return 1<t?t=1:t<0&&(t=0),t},e.lerp=function(t,e,i){return t+i*(e-t)},e.defaultUBBParser=new t.UBBParser,e}();t.ToolSet=e,__reflect(e.prototype,"fairygui.ToolSet")}(fairygui||(fairygui={})),function(t){var e=function(){function r(){this.matrix=new Array(r.LENGTH),this.reset()}return r.create=function(t,e,i,n){var o=new r;return o.adjustColor(t,e,i,n),o},r.prototype.reset=function(){for(var t=0;t<r.LENGTH;t++)this.matrix[t]=r.IDENTITY_MATRIX[t]},r.prototype.invert=function(){this.multiplyMatrix([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0])},r.prototype.adjustColor=function(t,e,i,n){this.adjustHue(n),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i)},r.prototype.adjustBrightness=function(t){t=255*this.cleanValue(t,1),this.multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0])},r.prototype.adjustContrast=function(t){var e=(t=this.cleanValue(t,1))+1,i=128*(1-e);this.multiplyMatrix([e,0,0,0,i,0,e,0,0,i,0,0,e,0,i,0,0,0,1,0])},r.prototype.adjustSaturation=function(t){t=this.cleanValue(t,1);var e=1-(t+=1),i=e*r.LUMA_R,n=e*r.LUMA_G,o=e*r.LUMA_B;this.multiplyMatrix([i+t,n,o,0,0,i,n+t,o,0,0,i,n,o+t,0,0,0,0,0,1,0])},r.prototype.adjustHue=function(t){t=this.cleanValue(t,1),t*=Math.PI;var e=Math.cos(t),i=Math.sin(t);this.multiplyMatrix([r.LUMA_R+e*(1-r.LUMA_R)+i*-r.LUMA_R,r.LUMA_G+e*-r.LUMA_G+i*-r.LUMA_G,r.LUMA_B+e*-r.LUMA_B+i*(1-r.LUMA_B),0,0,r.LUMA_R+e*-r.LUMA_R+.143*i,r.LUMA_G+e*(1-r.LUMA_G)+.14*i,r.LUMA_B+e*-r.LUMA_B+-.283*i,0,0,r.LUMA_R+e*-r.LUMA_R+i*-(1-r.LUMA_R),r.LUMA_G+e*-r.LUMA_G+i*r.LUMA_G,r.LUMA_B+e*(1-r.LUMA_B)+i*r.LUMA_B,0,0,0,0,0,1,0])},r.prototype.concat=function(t){t.length==r.LENGTH&&this.multiplyMatrix(t)},r.prototype.clone=function(){var t=new r;return t.copyMatrix(this.matrix),t},r.prototype.copyMatrix=function(t){for(var e=r.LENGTH,i=0;i<e;i++)this.matrix[i]=t[i]},r.prototype.multiplyMatrix=function(t){for(var e=[],i=0,n=0;n<4;++n){for(var o=0;o<5;++o)e[i+o]=t[i]*this.matrix[o]+t[i+1]*this.matrix[o+5]+t[i+2]*this.matrix[o+10]+t[i+3]*this.matrix[o+15]+(4==o?t[i+4]:0);i+=5}this.copyMatrix(e)},r.prototype.cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},r.LENGTH=(r.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]).length,r.LUMA_R=.299,r.LUMA_G=.587,r.LUMA_B=.114,r}();t.ColorMatrix=e,__reflect(e.prototype,"fairygui.ColorMatrix")}(fairygui||(fairygui={})),function(l){var t=function(){function h(){}return h.evaluate=function(t,e,i,n,o){switch(t){case l.EaseType.Linear:return e/i;case l.EaseType.SineIn:return 1-Math.cos(e/i*h._PiOver2);case l.EaseType.SineOut:return Math.sin(e/i*h._PiOver2);case l.EaseType.SineInOut:return-.5*(Math.cos(Math.PI*e/i)-1);case l.EaseType.QuadIn:return(e/=i)*e;case l.EaseType.QuadOut:return-(e/=i)*(e-2);case l.EaseType.QuadInOut:return(e/=.5*i)<1?.5*e*e:-.5*(--e*(e-2)-1);case l.EaseType.CubicIn:return(e/=i)*e*e;case l.EaseType.CubicOut:return(e=e/i-1)*e*e+1;case l.EaseType.CubicInOut:return(e/=.5*i)<1?.5*e*e*e:.5*((e-=2)*e*e+2);case l.EaseType.QuartIn:return(e/=i)*e*e*e;case l.EaseType.QuartOut:return-((e=e/i-1)*e*e*e-1);case l.EaseType.QuartInOut:return(e/=.5*i)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2);case l.EaseType.QuintIn:return(e/=i)*e*e*e*e;case l.EaseType.QuintOut:return(e=e/i-1)*e*e*e*e+1;case l.EaseType.QuintInOut:return(e/=.5*i)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2);case l.EaseType.ExpoIn:return 0==e?0:Math.pow(2,10*(e/i-1));case l.EaseType.ExpoOut:return e==i?1:1-Math.pow(2,-10*e/i);case l.EaseType.ExpoInOut:return 0==e?0:e==i?1:(e/=.5*i)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e));case l.EaseType.CircIn:return-(Math.sqrt(1-(e/=i)*e)-1);case l.EaseType.CircOut:return Math.sqrt(1-(e=e/i-1)*e);case l.EaseType.CircInOut:return(e/=.5*i)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1);case l.EaseType.ElasticIn:var r;return 0==e?0:1==(e/=i)?1:(0==o&&(o=.3*i),n<1?(n=1,r=o/4):r=o/h._TwoPi*Math.asin(1/n),-n*Math.pow(2,10*(e-=1))*Math.sin((e*i-r)*h._TwoPi/o));case l.EaseType.ElasticOut:var s;return 0==e?0:1==(e/=i)?1:(0==o&&(o=.3*i),n<1?(n=1,s=o/4):s=o/h._TwoPi*Math.asin(1/n),n*Math.pow(2,-10*e)*Math.sin((e*i-s)*h._TwoPi/o)+1);case l.EaseType.ElasticInOut:var a;return 0==e?0:2==(e/=.5*i)?1:(0==o&&(o=i*(.3*1.5)),n<1?(n=1,a=o/4):a=o/h._TwoPi*Math.asin(1/n),e<1?n*Math.pow(2,10*(e-=1))*Math.sin((e*i-a)*h._TwoPi/o)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e*i-a)*h._TwoPi/o)*.5+1);case l.EaseType.BackIn:return(e/=i)*e*((n+1)*e-n);case l.EaseType.BackOut:return(e=e/i-1)*e*((n+1)*e+n)+1;case l.EaseType.BackInOut:return(e/=.5*i)<1?e*e*((1+(n*=1.525))*e-n)*.5:.5*((e-=2)*e*((1+(n*=1.525))*e+n)+2);case l.EaseType.BounceIn:return c.easeIn(e,i);case l.EaseType.BounceOut:return c.easeOut(e,i);case l.EaseType.BounceInOut:return c.easeInOut(e,i);default:return-(e/=i)*(e-2)}},h._PiOver2=.5*Math.PI,h._TwoPi=2*Math.PI,h}();l.EaseManager=t,__reflect(t.prototype,"fairygui.EaseManager");var c=function(){function i(){}return i.easeIn=function(t,e){return 1-i.easeOut(e-t,e)},i.easeOut=function(t,e){return(t/=e)<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},i.easeInOut=function(t,e){return t<.5*e?.5*i.easeIn(2*t,e):.5*i.easeOut(2*t-e,e)+.5},i}();__reflect(c.prototype,"Bounce")}(fairygui||(fairygui={})),function(t){var e=function(){function t(){}return t.Linear=0,t.SineIn=1,t.SineOut=2,t.SineInOut=3,t.QuadIn=4,t.QuadOut=5,t.QuadInOut=6,t.CubicIn=7,t.CubicOut=8,t.CubicInOut=9,t.QuartIn=10,t.QuartOut=11,t.QuartInOut=12,t.QuintIn=13,t.QuintOut=14,t.QuintInOut=15,t.ExpoIn=16,t.ExpoOut=17,t.ExpoInOut=18,t.CircIn=19,t.CircOut=20,t.CircInOut=21,t.ElasticIn=22,t.ElasticOut=23,t.ElasticInOut=24,t.BackIn=25,t.BackOut=26,t.BackInOut=27,t.BounceIn=28,t.BounceOut=29,t.BounceInOut=30,t.Custom=31,t}();t.EaseType=e,__reflect(e.prototype,"fairygui.EaseType")}(fairygui||(fairygui={})),function(l){var t=function(){function t(){}return t.to=function(t,e,i){return l.TweenManager.createTween()._to(t,e,i)},t.to2=function(t,e,i,n,o){return l.TweenManager.createTween()._to2(t,e,i,n,o)},t.to3=function(t,e,i,n,o,r,s){return l.TweenManager.createTween()._to3(t,e,i,n,o,r,s)},t.to4=function(t,e,i,n,o,r,s,a,h){return l.TweenManager.createTween()._to4(t,e,i,n,o,r,s,a,h)},t.toColor=function(t,e,i){return l.TweenManager.createTween()._toColor(t,e,i)},t.delayedCall=function(t){return l.TweenManager.createTween().setDelay(t)},t.shake=function(t,e,i,n){return l.TweenManager.createTween()._shake(t,e,i,n)},t.isTweening=function(t,e){return l.TweenManager.isTweening(t,e)},t.kill=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=null),l.TweenManager.killTweens(t,!1,null)},t.getTween=function(t,e){return void 0===e&&(e=null),l.TweenManager.getTween(t,e)},t.catchCallbackExceptions=!0,t}();l.GTween=t,__reflect(t.prototype,"fairygui.GTween")}(fairygui||(fairygui={})),function(l){var t=function(){function t(){this._startValue=new l.TweenValue,this._endValue=new l.TweenValue,this._value=new l.TweenValue,this._deltaValue=new l.TweenValue,this._reset()}return t.prototype.setDelay=function(t){return this._delay=t,this},Object.defineProperty(t.prototype,"delay",{get:function(){return this._delay},enumerable:!0,configurable:!0}),t.prototype.setDuration=function(t){return this._duration=t,this},Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0}),t.prototype.setBreakpoint=function(t){return this._breakpoint=t,this},t.prototype.setEase=function(t){return this._easeType=t,this},t.prototype.setEasePeriod=function(t){return this._easePeriod=t,this},t.prototype.setEaseOvershootOrAmplitude=function(t){return this._easeOvershootOrAmplitude=t,this},t.prototype.setRepeat=function(t,e){return void 0===e&&(e=!1),this._repeat=t,this._yoyo=e,this},Object.defineProperty(t.prototype,"repeat",{get:function(){return this._repeat},enumerable:!0,configurable:!0}),t.prototype.setTimeScale=function(t){return this._timeScale=t,this},t.prototype.setSnapping=function(t){return this._snapping=t,this},t.prototype.setTarget=function(t,e){return void 0===e&&(e=null),this._target=t,this._propType=e,this},Object.defineProperty(t.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),t.prototype.setUserData=function(t){return this._userData=t,this},Object.defineProperty(t.prototype,"userData",{get:function(){return this._userData},enumerable:!0,configurable:!0}),t.prototype.onUpdate=function(t,e){return this._onUpdate=t,this._onUpdateCaller=e,this},t.prototype.onStart=function(t,e){return this._onStart=t,this._onStartCaller=e,this},t.prototype.onComplete=function(t,e){return this._onComplete=t,this._onCompleteCaller=e,this},Object.defineProperty(t.prototype,"startValue",{get:function(){return this._startValue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endValue",{get:function(){return this._endValue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deltaValue",{get:function(){return this._deltaValue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"normalizedTime",{get:function(){return this._normalizedTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"completed",{get:function(){return 0!=this._ended},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allCompleted",{get:function(){return 1==this._ended},enumerable:!0,configurable:!0}),t.prototype.setPaused=function(t){return this._paused=t,this},t.prototype.seek=function(t){if(!this._killed){if(this._elapsedTime=t,this._elapsedTime<this._delay){if(!this._started)return;this._elapsedTime=this._delay}this.update()}},t.prototype.kill=function(t){void 0===t&&(t=!1),this._killed||(t&&(0==this._ended&&(0<=this._breakpoint?this._elapsedTime=this._delay+this._breakpoint:0<=this._repeat?this._elapsedTime=this._delay+this._duration*(this._repeat+1):this._elapsedTime=this._delay+2*this._duration,this.update()),this.callCompleteCallback()),this._killed=!0)},t.prototype._to=function(t,e,i){return this._valueSize=1,this._startValue.x=t,this._endValue.x=e,this._duration=i,this},t.prototype._to2=function(t,e,i,n,o){return this._valueSize=2,this._startValue.x=t,this._endValue.x=i,this._startValue.y=e,this._endValue.y=n,this._duration=o,this},t.prototype._to3=function(t,e,i,n,o,r,s){return this._valueSize=3,this._startValue.x=t,this._endValue.x=n,this._startValue.y=e,this._endValue.y=o,this._startValue.z=i,this._endValue.z=r,this._duration=s,this},t.prototype._to4=function(t,e,i,n,o,r,s,a,h){return this._valueSize=4,this._startValue.x=t,this._endValue.x=o,this._startValue.y=e,this._endValue.y=r,this._startValue.z=i,this._endValue.z=s,this._startValue.w=n,this._endValue.w=a,this._duration=h,this},t.prototype._toColor=function(t,e,i){return this._valueSize=4,this._startValue.color=t,this._endValue.color=e,this._duration=i,this},t.prototype._shake=function(t,e,i,n){return this._valueSize=5,this._startValue.x=t,this._startValue.y=e,this._startValue.w=i,this._duration=n,this},t.prototype._init=function(){this._delay=0,this._duration=0,this._breakpoint=-1,this._easeType=l.EaseType.QuadOut,this._timeScale=1,this._easePeriod=0,this._easeOvershootOrAmplitude=1.70158,this._snapping=!1,this._repeat=0,this._yoyo=!1,this._valueSize=0,this._started=!1,this._paused=!1,this._killed=!1,this._elapsedTime=0,this._normalizedTime=0,this._ended=0},t.prototype._reset=function(){this._target=null,this._userData=null,this._onStart=this._onUpdate=this._onComplete=null,this._onStartCaller=this._onUpdateCaller=this._onCompleteCaller=null},t.prototype._update=function(t){if(1!=this._timeScale&&(t*=this._timeScale),0!=t){if(0!=this._ended)return this.callCompleteCallback(),void(this._killed=!0);this._elapsedTime+=t,this.update(),0!=this._ended&&(this._killed||(this.callCompleteCallback(),this._killed=!0))}},t.prototype.update=function(){if((this._ended=0)!=this._valueSize){if(!this._started){if(this._elapsedTime<this._delay)return;if(this._started=!0,this.callStartCallback(),this._killed)return}var t=!1,e=this._elapsedTime-this._delay;if(0<=this._breakpoint&&e>=this._breakpoint&&(e=this._breakpoint,this._ended=2),0!=this._repeat){var i=Math.floor(e/this._duration);e-=this._duration*i,this._yoyo&&(t=i%2==1),0<this._repeat&&this._repeat-i<0&&(this._yoyo&&(t=this._repeat%2==1),e=this._duration,this._ended=1)}else e>=this._duration&&(e=this._duration,this._ended=1);if(this._normalizedTime=l.EaseManager.evaluate(this._easeType,t?this._duration-e:e,this._duration,this._easeOvershootOrAmplitude,this._easePeriod),this._value.setZero(),this._deltaValue.setZero(),5==this._valueSize)if(0==this._ended){var n=this._startValue.w*(1-this._normalizedTime),o=n*(.5<Math.random()?1:-1),r=n*(.5<Math.random()?1:-1);this._deltaValue.x=o,this._deltaValue.y=r,this._value.x=this._startValue.x+o,this._value.y=this._startValue.y+r}else this._value.x=this._startValue.x,this._value.y=this._startValue.y;else for(var s=0;s<this._valueSize;s++){var a=this._startValue.getField(s),h=a+(this._endValue.getField(s)-a)*this._normalizedTime;this._snapping&&(h=Math.round(h)),this._deltaValue.setField(s,h-this._value.getField(s)),this._value.setField(s,h)}if(null!=this._target&&null!=this._propType)if(this._propType instanceof Function)switch(this._valueSize){case 1:this._propType.call(this._target,this._value.x);break;case 2:this._propType.call(this._target,this._value.x,this._value.y);break;case 3:this._propType.call(this._target,this._value.x,this._value.y,this._value.z);break;case 4:this._propType.call(this._target,this._value.x,this._value.y,this._value.z,this._value.w);break;case 5:this._propType.call(this._target,this._value.color);break;case 6:this._propType.call(this._target,this._value.x,this._value.y)}else 5==this._valueSize?this._target[this._propType]=this._value.color:this._target[this._propType]=this._value.x;this.callUpdateCallback()}else this._elapsedTime>=this._delay+this._duration&&(this._ended=1)},t.prototype.callStartCallback=function(){if(null!=this._onStart)try{this._onStart.call(this._onStartCaller,this)}catch(t){console.log("FairyGUI: error in start callback > "+t)}},t.prototype.callUpdateCallback=function(){if(null!=this._onUpdate)try{this._onUpdate.call(this._onUpdateCaller,this)}catch(t){console.log("FairyGUI: error in update callback > "+t)}},t.prototype.callCompleteCallback=function(){if(null!=this._onComplete)try{this._onComplete.call(this._onCompleteCaller,this)}catch(t){console.log("FairyGUI: error in complete callback > "+t)}},t}();l.GTweener=t,__reflect(t.prototype,"fairygui.GTweener")}(fairygui||(fairygui={})),function(e){var t=function(){function h(){}return h.createTween=function(){var t;return h._inited||(egret.startTick(h.update,null),h._inited=!0,h._lastTime=egret.getTimer()),(t=0<h._tweenerPool.length?h._tweenerPool.pop():new e.GTweener)._init(),h._activeTweens[h._totalActiveTweens++]=t,h._totalActiveTweens==h._activeTweens.length&&(h._activeTweens.length=h._activeTweens.length+Math.ceil(.5*h._activeTweens.length)),t},h.isTweening=function(t,e){if(null==t)return!1;for(var i=null==e||null==e,n=0;n<h._totalActiveTweens;n++){var o=h._activeTweens[n];if(null!=o&&o.target==t&&!o._killed&&(i||o._propType==e))return!0}return!1},h.killTweens=function(t,e,i){if(null==t)return!1;for(var n=!1,o=h._totalActiveTweens,r=null==i||null==i,s=0;s<o;s++){var a=h._activeTweens[s];null==a||a.target!=t||a._killed||!r&&a._propType!=i||(a.kill(e),n=!0)}return n},h.getTween=function(t,e){if(null==t)return null;for(var i=h._totalActiveTweens,n=null==e||null==e,o=0;o<i;o++){var r=h._activeTweens[o];if(null!=r&&r.target==t&&!r._killed&&(n||r._propType==e))return r}return null},h.update=function(t){var e=t-h._lastTime;h._lastTime=t,e/=1e3;for(var i=h._totalActiveTweens,n=-1,o=0;o<i;o++){var r=h._activeTweens[o];null==r?(-1==n&&(n=o),0):r._killed?(r._reset(),h._tweenerPool.push(r),h._activeTweens[o]=null,-1==n&&(n=o),0):(r._paused||r._update(e),-1!=n&&(h._activeTweens[n]=r,h._activeTweens[o]=null,n++))}if(0<=n){if(h._totalActiveTweens!=i){var s=i;for(i=h._totalActiveTweens-i,o=0;o<i;o++)h._activeTweens[n++]=h._activeTweens[s++]}h._totalActiveTweens=n}return!1},h._activeTweens=new Array(30),h._tweenerPool=new Array,h._totalActiveTweens=0,h._lastTime=0,h._inited=!1,h}();e.TweenManager=t,__reflect(t.prototype,"fairygui.TweenManager")}(fairygui||(fairygui={})),function(t){var e=function(){function t(){this.x=this.y=this.z=this.w=0}return Object.defineProperty(t.prototype,"color",{get:function(){return(this.w<<24)+(this.x<<16)+(this.y<<8)+this.z},set:function(t){this.x=(16711680&t)>>16,this.y=(65280&t)>>8,this.z=255&t,this.w=(4278190080&t)>>24},enumerable:!0,configurable:!0}),t.prototype.getField=function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("Index out of bounds: "+t)}},t.prototype.setField=function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("Index out of bounds: "+t)}},t.prototype.setZero=function(){this.x=this.y=this.z=this.w=0},t}();t.TweenValue=e,__reflect(e.prototype,"fairygui.TweenValue")}(fairygui||(fairygui={})),function(t){var e=function(e){function t(){var t=e.call(this)||this;return t.playTimes=1,t.delay=0,t.stopOnExit=!1,t}return __extends(t,e),t.prototype.enter=function(t){var e=t.parent.getTransition(this.transitionName);e&&(this._currentTransition&&this._currentTransition.playing?e.changePlayTimes(this.playTimes):e.play(null,null,null,this.playTimes,this.delay),this._currentTransition=e)},t.prototype.leave=function(t){this.stopOnExit&&this._currentTransition&&(this._currentTransition.stop(),this._currentTransition=null)},t.prototype.setup=function(t){e.prototype.setup.call(this,t),this.transitionName=t.readS(),this.playTimes=t.readInt(),this.delay=t.readFloat(),this.stopOnExit=t.readBool()},t}(t.ControllerAction);t.PlayTransitionAction=e,__reflect(e.prototype,"fairygui.PlayTransitionAction")}(fairygui||(fairygui={})),function(n){var t=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.init=function(){this._default=new o(this._owner.width,this._owner.height,this._owner.scaleX,this._owner.scaleY),this._storage={}},t.prototype.addStatus=function(t,e){var i;null==t?i=this._default:(i=new o,this._storage[t]=i),i.width=e.readInt(),i.height=e.readInt(),i.scaleX=e.readFloat(),i.scaleY=e.readFloat()},t.prototype.apply=function(){var t=this._storage[this._controller.selectedPageId];if(t||(t=this._default),this._tweenConfig&&this._tweenConfig.tween&&!n.UIPackage._constructing&&!n.GearBase.disableAllTweenEffect){if(null!=this._tweenConfig._tweener){if(this._tweenConfig._tweener.endValue.x==t.width&&this._tweenConfig._tweener.endValue.y==t.height&&this._tweenConfig._tweener.endValue.z==t.scaleX&&this._tweenConfig._tweener.endValue.w==t.scaleY)return;this._tweenConfig._tweener.kill(!0),this._tweenConfig._tweener=null}var e=t.width!=this._owner.width||t.height!=this._owner.height,i=t.scaleX!=this._owner.scaleX||t.scaleY!=this._owner.scaleY;(e||i)&&(this._owner.checkGearController(0,this._controller)&&(this._tweenConfig._displayLockToken=this._owner.addDisplayLock()),this._tweenConfig._tweener=n.GTween.to4(this._owner.width,this._owner.height,this._owner.scaleX,this._owner.scaleY,t.width,t.height,t.scaleX,t.scaleY,this._tweenConfig.duration).setDelay(this._tweenConfig.delay).setEase(this._tweenConfig.easeType).setUserData((e?1:0)+(i?2:0)).setTarget(this).onUpdate(this.__tweenUpdate,this).onComplete(this.__tweenComplete,this))}else this._owner._gearLocked=!0,this._owner.setSize(t.width,t.height,this._owner.gearXY.controller==this._controller),this._owner.setScale(t.scaleX,t.scaleY),this._owner._gearLocked=!1},t.prototype.__tweenUpdate=function(t){var e=t.userData;this._owner._gearLocked=!0,0!=(1&e)&&this._owner.setSize(t.value.x,t.value.y,this._owner.checkGearController(1,this._controller)),0!=(2&e)&&this._owner.setScale(t.value.z,t.value.w),this._owner._gearLocked=!1},t.prototype.__tweenComplete=function(){0!=this._tweenConfig._displayLockToken&&(this._owner.releaseDisplayLock(this._tweenConfig._displayLockToken),this._tweenConfig._displayLockToken=0),this._tweenConfig._tweener=null},t.prototype.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new o,this._storage[this._controller.selectedPageId]=t),t.width=this._owner.width,t.height=this._owner.height,t.scaleX=this._owner.scaleX,t.scaleY=this._owner.scaleY},t.prototype.updateFromRelations=function(t,e){if(null!=this._controller&&null!=this._storage){for(var i in this._storage){var n=this._storage[i];n.width+=t,n.height+=e}this._default.width+=t,this._default.height+=e,this.updateState()}},t}(n.GearBase);n.GearSize=t,__reflect(t.prototype,"fairygui.GearSize");var o=function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.width=t,this.height=e,this.scaleX=i,this.scaleY=n};__reflect(o.prototype,"GearSizeValue")}(fairygui||(fairygui={})),function(i){var t=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.init=function(){this._default=new egret.Point(this._owner.x,this._owner.y),this._storage={}},t.prototype.addStatus=function(t,e){var i;null==t?i=this._default:(i=new egret.Point,this._storage[t]=i),i.x=e.readInt(),i.y=e.readInt()},t.prototype.apply=function(){var t=this._storage[this._controller.selectedPageId];if(t||(t=this._default),this._tweenConfig&&this._tweenConfig.tween&&!i.UIPackage._constructing&&!i.GearBase.disableAllTweenEffect){if(null!=this._tweenConfig._tweener){if(this._tweenConfig._tweener.endValue.x==t.x&&this._tweenConfig._tweener.endValue.y==t.y)return;this._tweenConfig._tweener.kill(!0),this._tweenConfig._tweener=null}this._owner.x==t.x&&this._owner.y==t.y||(this._owner.checkGearController(0,this._controller)&&(this._tweenConfig._displayLockToken=this._owner.addDisplayLock()),this._tweenConfig._tweener=i.GTween.to2(this._owner.x,this._owner.y,t.x,t.y,this._tweenConfig.duration).setDelay(this._tweenConfig.delay).setEase(this._tweenConfig.easeType).setTarget(this).onUpdate(this.__tweenUpdate,this).onComplete(this.__tweenComplete,this))}else this._owner._gearLocked=!0,this._owner.setXY(t.x,t.y),this._owner._gearLocked=!1},t.prototype.__tweenUpdate=function(t){this._owner._gearLocked=!0,this._owner.setXY(t.value.x,t.value.y),this._owner._gearLocked=!1},t.prototype.__tweenComplete=function(){0!=this._tweenConfig._displayLockToken&&(this._owner.releaseDisplayLock(this._tweenConfig._displayLockToken),this._tweenConfig._displayLockToken=0),this._tweenConfig._tweener=null},t.prototype.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new egret.Point,this._storage[this._controller.selectedPageId]=t),t.x=this._owner.x,t.y=this._owner.y},t.prototype.updateFromRelations=function(t,e){if(null!=this._controller&&null!=this._storage){for(var i in this._storage){var n=this._storage[i];n.x+=t,n.y+=e}this._default.x+=t,this._default.y+=e,this.updateState()}},t}(i.GearBase);i.GearXY=t,__reflect(t.prototype,"fairygui.GearXY")}(fairygui||(fairygui={})),function(t){var e=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.init=function(){this._default=this._owner.text,this._storage={}},t.prototype.addStatus=function(t,e){null==t?this._default=e.readS():this._storage[t]=e.readS()},t.prototype.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];this._owner.text=void 0!==t?t:this._default,this._owner._gearLocked=!1},t.prototype.updateState=function(){this._storage[this._controller.selectedPageId]=this._owner.text},t}(t.GearBase);t.GearText=e,__reflect(e.prototype,"fairygui.GearText")}(fairygui||(fairygui={})),function(t){var e=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.init=function(){this._default=this._owner.icon,this._storage={}},t.prototype.addStatus=function(t,e){null==t?this._default=e.readS():this._storage[t]=e.readS()},t.prototype.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];this._owner.icon=void 0!==t?t:this._default,this._owner._gearLocked=!1},t.prototype.updateState=function(){this._storage[this._controller.selectedPageId]=this._owner.icon},t}(t.GearBase);t.GearIcon=e,__reflect(e.prototype,"fairygui.GearIcon")}(fairygui||(fairygui={})),function(t){var e=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.init=function(){this._default=new n(this._owner.playing,this._owner.frame),this._storage={}},t.prototype.addStatus=function(t,e){var i;null==t?i=this._default:(i=new n,this._storage[t]=i),i.playing=e.readBool(),i.frame=e.readInt()},t.prototype.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];t||(t=this._default),this._owner.frame=t.frame,this._owner.playing=t.playing,this._owner._gearLocked=!1},t.prototype.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new n,this._storage[this._controller.selectedPageId]=t),t.frame=this._owner.frame,t.playing=this._owner.playing},t}(t.GearBase);t.GearAnimation=e,__reflect(e.prototype,"fairygui.GearAnimation");var n=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=0),this.playing=t,this.frame=e};__reflect(n.prototype,"GearAnimationValue")}(fairygui||(fairygui={})),function(t){var e=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.init=function(){null!=this._owner.strokeColor?this._default=new n(this._owner.color,this._owner.strokeColor):this._default=new n(this._owner.color),this._storage={}},t.prototype.addStatus=function(t,e){var i;null==t?i=this._default:(i=new n,this._storage[t]=i),i.color=e.readColor(),i.strokeColor=e.readColor()},t.prototype.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];t||(t=this._default),this._owner.color=t.color,null==this._owner.strokeColor||isNaN(t.strokeColor)||(this._owner.strokeColor=t.strokeColor),this._owner._gearLocked=!1},t.prototype.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new n(null,null),this._storage[this._controller.selectedPageId]=t),t.color=this._owner.color,null!=this._owner.strokeColor&&(t.strokeColor=this._owner.strokeColor)},t}(t.GearBase);t.GearColor=e,__reflect(e.prototype,"fairygui.GearColor");var n=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.color=t,this.strokeColor=e};__reflect(n.prototype,"GearColorValue")}(fairygui||(fairygui={})),function(t){var e=function(i){function t(t){var e=i.call(this,t)||this;return e._displayLockToken=1,e._visible=0,e}return __extends(t,i),t.prototype.init=function(){this.pages=null},t.prototype.apply=function(){this._displayLockToken++,0==this._displayLockToken&&(this._displayLockToken=1),null==this.pages||0==this.pages.length||-1!=this.pages.indexOf(this._controller.selectedPageId)?this._visible=1:this._visible=0},t.prototype.addLock=function(){return this._visible++,this._displayLockToken},t.prototype.releaseLock=function(t){t==this._displayLockToken&&this._visible--},Object.defineProperty(t.prototype,"connected",{get:function(){return null==this._controller||0<this._visible},enumerable:!0,configurable:!0}),t}(t.GearBase);t.GearDisplay=e,__reflect(e.prototype,"fairygui.GearDisplay")}(fairygui||(fairygui={})),function(n){var t=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.init=function(){this._default=new o(this._owner.alpha,this._owner.rotation,this._owner.grayed,this._owner.touchable),this._storage={}},t.prototype.addStatus=function(t,e){var i;null==t?i=this._default:(i=new o,this._storage[t]=i),i.alpha=e.readFloat(),i.rotation=e.readFloat(),i.grayed=e.readBool(),i.touchable=e.readBool()},t.prototype.apply=function(){var t=this._storage[this._controller.selectedPageId];if(t||(t=this._default),this._tweenConfig&&this._tweenConfig.tween&&!n.UIPackage._constructing&&!n.GearBase.disableAllTweenEffect){if(this._owner._gearLocked=!0,this._owner.grayed=t.grayed,this._owner.touchable=t.touchable,this._owner._gearLocked=!1,null!=this._tweenConfig._tweener){if(this._tweenConfig._tweener.endValue.x==t.alpha&&this._tweenConfig._tweener.endValue.y==t.rotation)return;this._tweenConfig._tweener.kill(!0),this._tweenConfig._tweener=null}var e=t.alpha!=this._owner.alpha,i=t.rotation!=this._owner.rotation;(e||i)&&(this._owner.checkGearController(0,this._controller)&&(this._tweenConfig._displayLockToken=this._owner.addDisplayLock()),this._tweenConfig._tweener=n.GTween.to2(this._owner.alpha,this._owner.rotation,t.alpha,t.rotation,this._tweenConfig.duration).setDelay(this._tweenConfig.delay).setEase(this._tweenConfig.easeType).setUserData((e?1:0)+(i?2:0)).setTarget(this).onUpdate(this.__tweenUpdate,this).onComplete(this.__tweenComplete,this))}else this._owner._gearLocked=!0,this._owner.grayed=t.grayed,this._owner.touchable=t.touchable,this._owner.alpha=t.alpha,this._owner.rotation=t.rotation,this._owner._gearLocked=!1},t.prototype.__tweenUpdate=function(t){var e=t.userData;this._owner._gearLocked=!0,0!=(1&e)&&(this._owner.alpha=t.value.x),0!=(2&e)&&(this._owner.rotation=t.value.y),this._owner._gearLocked=!1},t.prototype.__tweenComplete=function(){0!=this._tweenConfig._displayLockToken&&(this._owner.releaseDisplayLock(this._tweenConfig._displayLockToken),this._tweenConfig._displayLockToken=0),this._tweenConfig._tweener=null},t.prototype.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new o,this._storage[this._controller.selectedPageId]=t),t.alpha=this._owner.alpha,t.rotation=this._owner.rotation,t.grayed=this._owner.grayed,t.touchable=this._owner.touchable},t}(n.GearBase);n.GearLook=t,__reflect(t.prototype,"fairygui.GearLook");var o=function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=!1),void 0===n&&(n=!0),this.alpha=t,this.rotation=e,this.grayed=i,this.touchable=n};__reflect(o.prototype,"GearLookValue")}(fairygui||(fairygui={})),function(o){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.enter=function(t){if(this.controllerName){var e;if(this.objectId){var i=t.parent.getChildById(this.objectId);if(!(i instanceof o.GComponent))return;e=i}else e=t.parent;if(e){var n=e.getController(this.controllerName);n&&n!=t&&!n.changing&&(n.selectedPageId=this.targetPage)}}},t.prototype.setup=function(t){e.prototype.setup.call(this,t),this.objectId=t.readS(),this.controllerName=t.readS(),this.targetPage=t.readS()},t}(o.ControllerAction);o.ChangePageAction=t,__reflect(t.prototype,"fairygui.ChangePageAction")}(fairygui||(fairygui={})),function(d){var t=function(){function s(t){this._ownerBaseX=0,this._ownerBaseY=0,this._totalTimes=0,this._totalTasks=0,this._playing=!1,this._paused=!1,this._options=0,this._reversed=!1,this._totalDuration=0,this._autoPlay=!1,this._autoPlayTimes=1,this._autoPlayDelay=0,this._timeScale=1,this._startTime=0,this._endTime=0,this._owner=t,this._items=new Array}return s.prototype.play=function(t,e,i,n,o,r,s){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=1),void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=-1),this._play(t,e,i,n,o,r,s,!1)},s.prototype.playReverse=function(t,e,i,n,o){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=1),void 0===o&&(o=0),this._play(t,e,i,n,o,0,-1,!0)},s.prototype.changePlayTimes=function(t){this._totalTimes=t},s.prototype.setAutoPlay=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=0),this._autoPlay!=t&&(this._autoPlay=t,this._autoPlayTimes=e,this._autoPlayDelay=i,this._autoPlay?this._owner.onStage&&this.play(null,null,this._autoPlayTimes,this._autoPlayDelay):this._owner.onStage||this.stop(!1,!0))},s.prototype._play=function(t,e,i,n,o,r,s,a){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=1),void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=-1),void 0===a&&(a=!1),this.stop(!0,!0),this._totalTimes=n,this._reversed=a,this._startTime=r,this._endTime=s,this._playing=!0,this._paused=!1,this._onComplete=t,this._onCompleteParam=i,this._onCompleteCaller=e;for(var h=this._items.length,l=0;l<h;l++){var c=this._items[l];if(null==c.target?c.targetId?c.target=this._owner.getChildById(c.targetId):c.target=this._owner:c.target!=this._owner&&c.target.parent!=this._owner&&(c.target=null),null!=c.target&&c.type==g.Transition){var _=c.target.getTransition(c.value.transName);if(_==this&&(_=null),null!=_)if(0==c.value.playTimes){var u;for(u=l-1;0<=u;u--){var p=this._items[u];if(p.type==g.Transition&&p.value.trans==_){p.value.stopTime=c.time-p.time;break}}u<0?c.value.stopTime=0:_=null}else c.value.stopTime=-1;c.value.trans=_}}0==o?this.onDelayedPlay():d.GTween.delayedCall(o).onComplete(this.onDelayedPlay,this)},s.prototype.stop=function(t,e){if(void 0===t&&(t=!0),void 0===e&&(e=!1),this._playing){this._playing=!1,this._totalTasks=0,this._totalTimes=0;var i=this._onComplete,n=this._onCompleteParam,o=this._onCompleteCaller;this._onComplete=null,this._onCompleteParam=null,this._onCompleteCaller=null,d.GTween.kill(this);var r=this._items.length;if(this._reversed)for(var s=r-1;0<=s;s--){var a=this._items[s];null!=a.target&&this.stopItem(a,t)}else for(s=0;s<r;s++)null!=(a=this._items[s]).target&&this.stopItem(a,t);e&&null!=i&&i.call(o,n)}},s.prototype.stopItem=function(t,e){if(0!=t.displayLockToken&&(t.target.releaseDisplayLock(t.displayLockToken),t.displayLockToken=0),null!=t.tweener&&(t.tweener.kill(e),t.tweener=null,t.type!=g.Shake||e||(t.target._gearLocked=!0,t.target.setXY(t.target.x-t.value.lastOffsetX,t.target.y-t.value.lastOffsetY),t.target._gearLocked=!1)),t.type==g.Transition){var i=t.value.trans;null!=i&&i.stop(e,!1)}},s.prototype.setPaused=function(t){if(this._playing&&this._paused!=t){this._paused=t;var e=d.GTween.getTween(this);null!=e&&e.setPaused(t);for(var i=this._items.length,n=0;n<i;n++){var o=this._items[n];null!=o.target&&(o.type==g.Transition?null!=o.value.trans&&o.value.trans.setPaused(t):o.type==g.Animation&&(t?(o.value.flag=o.target.playing,o.target.playing=!1):o.target.playing=o.value.flag),null!=o.tweener&&o.tweener.setPaused(t))}}},s.prototype.dispose=function(){this._playing&&d.GTween.kill(this);for(var t=this._items.length,e=0;e<t;e++){var i=this._items[e];null!=i.tweener&&(i.tweener.kill(),i.tweener=null),i.target=null,(i.hook=null)!=i.tweenConfig&&(i.tweenConfig.endHook=null)}this._items.length=0,this._playing=!1,this._onComplete=null,this._onCompleteCaller=null,this._onCompleteParam=null},Object.defineProperty(s.prototype,"playing",{get:function(){return this._playing},enumerable:!0,configurable:!0}),s.prototype.setValue=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n,o=this._items.length,r=0;r<o;r++){var s=this._items[r];if(s.label==t)n=null!=s.tweenConfig?s.tweenConfig.startValue:s.value;else{if(null==s.tweenConfig||s.tweenConfig.endLabel!=t)continue;n=s.tweenConfig.endValue}switch(s.type){case g.XY:case g.Size:case g.Pivot:case g.Scale:case g.Skew:n.b1=!0,n.b2=!0,n.f1=parseFloat(e[0]),n.f2=parseFloat(e[1]);break;case g.Alpha:case g.Rotation:case g.Color:n.f1=parseFloat(e[0]);break;case g.Animation:n.frame=parseInt(e[0]),1<e.length&&(n.playing=e[1]);break;case g.Visible:n.visible=e[0];break;case g.Sound:n.sound=e[0],1<e.length&&(n.volume=parseFloat(e[1]));break;case g.Transition:n.transName=e[0],1<e.length&&(n.playTimes=parseInt(e[1]));break;case g.Shake:n.amplitude=parseFloat(e[0]),1<e.length&&(n.duration=parseFloat(e[1]));break;case g.ColorFilter:n.f1=parseFloat(e[0]),n.f2=parseFloat(e[1]),n.f3=parseFloat(e[2]),n.f4=parseFloat(e[3]);break;case g.Text:case g.Icon:n.text=e[0]}}},s.prototype.setHook=function(t,e,i){for(var n=this._items.length,o=0;o<n;o++){var r=this._items[o];if(r.label==t){r.hook=e,r.hookCaller=i;break}if(null!=r.tweenConfig&&r.tweenConfig.endLabel==t){r.tweenConfig.endHook=e,r.tweenConfig.endHookCaller=i;break}}},s.prototype.clearHooks=function(){for(var t=this._items.length,e=0;e<t;e++){var i=this._items[e];i.hook=null,(i.hookCaller=null)!=i.tweenConfig&&(i.tweenConfig.endHook=null,i.tweenConfig.endHookCaller=null)}},s.prototype.setTarget=function(t,e){for(var i=this._items.length,n=0;n<i;n++){var o=this._items[n];o.label==t&&(o.targetId=e.id,o.target=null)}},s.prototype.setDuration=function(t,e){for(var i=this._items.length,n=0;n<i;n++){var o=this._items[n];null!=o.tweenConfig&&o.label==t&&(o.tweenConfig.duration=e)}},s.prototype.getLabelTime=function(t){for(var e=this._items.length,i=0;i<e;i++){var n=this._items[i];if(n.label==t)return n.time;if(null!=n.tweenConfig&&n.tweenConfig.endLabel==t)return n.time+n.tweenConfig.duration}return Number.NaN},Object.defineProperty(s.prototype,"timeScale",{get:function(){return this._timeScale},set:function(t){if(this._timeScale!=t&&(this._timeScale=t,this._playing))for(var e=this._items.length,i=0;i<e;i++){var n=this._items[i];null!=n.tweener?n.tweener.setTimeScale(t):n.type==g.Transition?null!=n.value.trans&&(n.value.trans.timeScale=t):n.type==g.Animation&&null!=n.target&&(n.target.timeScale=t)}},enumerable:!0,configurable:!0}),s.prototype.updateFromRelations=function(t,e,i){var n=this._items.length;if(0!=n)for(var o=0;o<n;o++){var r=this._items[o];r.type==g.XY&&r.targetId==t&&(null!=r.tweenConfig?(r.tweenConfig.startValue.f1+=e,r.tweenConfig.startValue.f2+=i,r.tweenConfig.endValue.f1+=e,r.tweenConfig.endValue.f2+=i):(r.value.f1+=e,r.value.f2+=i))}},s.prototype.onOwnerAddedToStage=function(){this._autoPlay&&!this._playing&&this.play(null,null,null,this._autoPlayTimes,this._autoPlayDelay)},s.prototype.onOwnerRemovedFromStage=function(){0==(this._options&s.OPTION_AUTO_STOP_DISABLED)&&this.stop(0!=(this._options&s.OPTION_AUTO_STOP_AT_END),!1)},s.prototype.onDelayedPlay=function(){if(this.internalPlay(),this._playing=0<this._totalTasks,this._playing){if(0!=(this._options&s.OPTION_IGNORE_DISPLAY_CONTROLLER))for(var t=this._items.length,e=0;e<t;e++){var i=this._items[e];null!=i.target&&i.target!=this._owner&&(i.displayLockToken=i.target.addDisplayLock())}}else if(null!=this._onComplete){var n=this._onComplete,o=this._onCompleteParam,r=this._onCompleteCaller;this._onComplete=null,this._onCompleteParam=null,this._onCompleteCaller=null,n.call(r,o)}},s.prototype.internalPlay=function(){this._ownerBaseX=this._owner.x,this._ownerBaseY=this._owner.y,this._totalTasks=0;var t,e,i=this._items.length,n=!1;if(this._reversed)for(e=i-1;0<=e;e--)null!=(t=this._items[e]).target&&this.playItem(t);else for(e=0;e<i;e++)null!=(t=this._items[e]).target&&(t.type==g.Animation&&0!=this._startTime&&t.time<=this._startTime?(n=!0,t.value.flag=!1):this.playItem(t));n&&this.skipAnimations()},s.prototype.playItem=function(t){var e;if(null!=t.tweenConfig){if(e=this._reversed?this._totalDuration-t.time-t.tweenConfig.duration:t.time,-1==this._endTime||e<=this._endTime){var i,n;switch(this._reversed?(i=t.tweenConfig.endValue,n=t.tweenConfig.startValue):(i=t.tweenConfig.startValue,n=t.tweenConfig.endValue),t.value.b1=i.b1||n.b1,t.value.b2=i.b2||n.b2,t.type){case g.XY:case g.Size:case g.Scale:case g.Skew:t.tweener=d.GTween.to2(i.f1,i.f2,n.f1,n.f2,t.tweenConfig.duration);break;case g.Alpha:case g.Rotation:t.tweener=d.GTween.to(i.f1,n.f1,t.tweenConfig.duration);break;case g.Color:t.tweener=d.GTween.toColor(i.f1,n.f1,t.tweenConfig.duration);break;case g.ColorFilter:t.tweener=d.GTween.to4(i.f1,i.f2,i.f3,i.f4,n.f1,n.f2,n.f3,n.f4,t.tweenConfig.duration)}t.tweener.setDelay(e).setEase(t.tweenConfig.easeType).setRepeat(t.tweenConfig.repeat,t.tweenConfig.yoyo).setTimeScale(this._timeScale).setTarget(t).onStart(this.onTweenStart,this).onUpdate(this.onTweenUpdate,this).onComplete(this.onTweenComplete,this),0<=this._endTime&&t.tweener.setBreakpoint(this._endTime-e),this._totalTasks++}}else t.type==g.Shake?(e=this._reversed?this._totalDuration-t.time-t.value.duration:t.time,t.value.offsetX=t.value.offsetY=0,t.value.lastOffsetX=t.value.lastOffsetY=0,t.tweener=d.GTween.shake(0,0,t.value.amplitude,t.value.duration).setDelay(e).setTimeScale(this._timeScale).setTarget(t).onUpdate(this.onTweenUpdate,this).onComplete(this.onTweenComplete,this),0<=this._endTime&&t.tweener.setBreakpoint(this._endTime-t.time),this._totalTasks++):(e=this._reversed?this._totalDuration-t.time:t.time)<=this._startTime?(this.applyValue(t),this.callHook(t,!1)):(-1==this._endTime||e<=this._endTime)&&(this._totalTasks++,t.tweener=d.GTween.delayedCall(e).setTimeScale(this._timeScale).setTarget(t).onComplete(this.onDelayedPlayItem,this));null!=t.tweener&&t.tweener.seek(this._startTime)},s.prototype.skipAnimations=function(){for(var t,e,i,n,o,r,s=this._items.length,a=0;a<s;a++)if(!((r=this._items[a]).type!=g.Animation||r.time>this._startTime||(n=r.value).flag)){t=(o=r.target).frame,e=o.playing?0:-1,i=0;for(var h=a;h<s;h++)(r=this._items[h]).type!=g.Animation||r.target!=o||r.time>this._startTime||((n=r.value).flag=!0,-1!=n.frame?(t=n.frame,e=n.playing?r.time:-1,i=0):n.playing?e<0&&(e=r.time):(0<=e&&(i+=r.time-e),e=-1),this.callHook(r,!1));0<=e&&(i+=this._startTime-e),o.playing=0<=e,o.frame=t,0<i&&o.advance(1e3*i)}},s.prototype.onDelayedPlayItem=function(t){var e=t.target;e.tweener=null,this._totalTasks--,this.applyValue(e),this.callHook(e,!1),this.checkAllComplete()},s.prototype.onTweenStart=function(t){var e,i,n=t.target;n.type!=g.XY&&n.type!=g.Size||(this._reversed?(e=n.tweenConfig.endValue,i=n.tweenConfig.startValue):(e=n.tweenConfig.startValue,i=n.tweenConfig.endValue),n.type==g.XY?n.target!=this._owner?(e.b1||(e.f1=n.target.x),e.b2||(e.f2=n.target.y)):(e.b1||(e.f1=n.target.x-this._ownerBaseX),e.b2||(e.f2=n.target.y-this._ownerBaseY)):(e.b1||(e.f1=n.target.width),e.b2||(e.f2=n.target.height)),i.b1||(i.f1=e.f1),i.b2||(i.f2=e.f2),t.startValue.x=e.f1,t.startValue.y=e.f2,t.endValue.x=i.f1,t.endValue.y=i.f2);this.callHook(n,!1)},s.prototype.onTweenUpdate=function(t){var e=t.target;switch(e.type){case g.XY:case g.Size:case g.Scale:case g.Skew:e.value.f1=t.value.x,e.value.f2=t.value.y;break;case g.Alpha:case g.Rotation:e.value.f1=t.value.x;break;case g.Color:e.value.f1=t.value.color;break;case g.ColorFilter:e.value.f1=t.value.x,e.value.f2=t.value.y,e.value.f3=t.value.z,e.value.f4=t.value.w;break;case g.Shake:e.value.offsetX=t.deltaValue.x,e.value.offsetY=t.deltaValue.y}this.applyValue(e)},s.prototype.onTweenComplete=function(t){var e=t.target;e.tweener=null,this._totalTasks--,t.allCompleted&&this.callHook(e,!0),this.checkAllComplete()},s.prototype.onPlayTransCompleted=function(t){this._totalTasks--,this.checkAllComplete()},s.prototype.callHook=function(t,e){e?null!=t.tweenConfig&&null!=t.tweenConfig.endHook&&t.tweenConfig.endHook.call(t.tweenConfig.endHookCaller):t.time>=this._startTime&&null!=t.hook&&t.hook.call(t.hookCaller)},s.prototype.checkAllComplete=function(){if(this._playing&&0==this._totalTasks)if(this._totalTimes<0)this.internalPlay();else if(this._totalTimes--,0<this._totalTimes)this.internalPlay();else{this._playing=!1;for(var t=this._items.length,e=0;e<t;e++){var i=this._items[e];null!=i.target&&0!=i.displayLockToken&&(i.target.releaseDisplayLock(i.displayLockToken),i.displayLockToken=0)}if(null!=this._onComplete){var n=this._onComplete,o=this._onCompleteParam,r=this._onCompleteCaller;this._onComplete=null,this._onCompleteParam=null,this._onCompleteCaller=null,n.call(r,o)}}},s.prototype.applyValue=function(t){switch(t.target._gearLocked=!0,t.type){case g.XY:var e,i;if(t.target==this._owner)e=t.value.b1?t.value.f1+this._ownerBaseX:t.target.x,i=t.value.b2?t.value.f2+this._ownerBaseY:t.target.y,t.target.setXY(e,i);else t.value.b1||(t.value.f1=t.target.x),t.value.b2||(t.value.f2=t.target.y),t.target.setXY(t.value.f1,t.value.f2);break;case g.Size:t.value.b1||(t.value.f1=t.target.width),t.value.b2||(t.value.f2=t.target.height),t.target.setSize(t.value.f1,t.value.f2);break;case g.Pivot:t.target.setPivot(t.value.f1,t.value.f2,t.target.pivotAsAnchor);break;case g.Alpha:t.target.alpha=t.value.f1;break;case g.Rotation:t.target.rotation=t.value.f1;break;case g.Scale:t.target.setScale(t.value.f1,t.value.f2);break;case g.Skew:t.target.setSkew(t.value.f1,t.value.f2);break;case g.Color:t.target.color=t.value.f1;break;case g.Animation:0<=t.value.frame&&(t.target.frame=t.value.frame),t.target.playing=t.value.playing,t.target.timeScale=this._timeScale;break;case g.Visible:t.target.visible=t.value.visible;break;case g.Transition:if(this._playing){var n=t.value.trans;if(null!=n){this._totalTasks++;var o=this._startTime>t.time?this._startTime-t.time:0,r=0<=this._endTime?this._endTime-t.time:-1;0<=t.value.stopTime&&(r<0||r>t.value.stopTime)&&(r=t.value.stopTime),n.timeScale=this._timeScale,n._play(this.onPlayTransCompleted,this,t,t.value.playTimes,0,o,r,this._reversed)}}break;case g.Sound:if(this._playing&&t.time>=this._startTime){if(null==t.value.audioClip){var s=d.UIPackage.getItemByURL(t.value.sound);s&&(t.value.audioClip=s.owner.getItemAsset(s))}t.value.audioClip&&d.GRoot.inst.playOneShotSound(t.value.audioClip,t.value.volume)}break;case g.Shake:t.target.setXY(t.target.x-t.value.lastOffsetX+t.value.offsetX,t.target.y-t.value.lastOffsetY+t.value.offsetY),t.value.lastOffsetX=t.value.offsetX,t.value.lastOffsetY=t.value.offsetY;break;case g.ColorFilter:var a,h=t.target.filters;h&&h[0]instanceof egret.ColorMatrixFilter?a=h[0]:h=[a=new egret.ColorMatrixFilter];var l=new d.ColorMatrix;l.adjustBrightness(t.value.f1),l.adjustContrast(t.value.f2),l.adjustSaturation(t.value.f3),l.adjustHue(t.value.f4),a.matrix=l.matrix,t.target.filters=h;break;case g.Text:t.target.text=t.value.text;break;case g.Icon:t.target.icon=t.value.text}t.target._gearLocked=!1},s.prototype.setup=function(t){this.name=t.readS(),this._options=t.readInt(),this._autoPlay=t.readBool(),this._autoPlayTimes=t.readInt(),this._autoPlayDelay=t.readFloat();for(var e=t.readShort(),i=0;i<e;i++){var n=t.readShort(),o=t.position;t.seek(o,0);var r=new a(t.readByte());(this._items[i]=r).time=t.readFloat();var s=t.readShort();r.targetId=s<0?"":this._owner.getChildAt(s).id,r.label=t.readS(),t.readBool()?(t.seek(o,1),r.tweenConfig=new h,r.tweenConfig.duration=t.readFloat(),r.time+r.tweenConfig.duration>this._totalDuration&&(this._totalDuration=r.time+r.tweenConfig.duration),r.tweenConfig.easeType=t.readByte(),r.tweenConfig.repeat=t.readInt(),r.tweenConfig.yoyo=t.readBool(),r.tweenConfig.endLabel=t.readS(),t.seek(o,2),this.decodeValue(r,t,r.tweenConfig.startValue),t.seek(o,3),this.decodeValue(r,t,r.tweenConfig.endValue)):(r.time>this._totalDuration&&(this._totalDuration=r.time),t.seek(o,2),this.decodeValue(r,t,r.value)),t.position=o+n}},s.prototype.decodeValue=function(t,e,i){switch(t.type){case g.XY:case g.Size:case g.Pivot:case g.Skew:i.b1=e.readBool(),i.b2=e.readBool(),i.f1=e.readFloat(),i.f2=e.readFloat();break;case g.Alpha:case g.Rotation:i.f1=e.readFloat();break;case g.Scale:i.f1=e.readFloat(),i.f2=e.readFloat();break;case g.Color:i.f1=e.readColor();break;case g.Animation:i.playing=e.readBool(),i.frame=e.readInt();break;case g.Visible:i.visible=e.readBool();break;case g.Sound:i.sound=e.readS(),i.volume=e.readFloat();break;case g.Transition:i.transName=e.readS(),i.playTimes=e.readInt();break;case g.Shake:i.amplitude=e.readFloat(),i.duration=e.readFloat();break;case g.ColorFilter:i.f1=e.readFloat(),i.f2=e.readFloat(),i.f3=e.readFloat(),i.f4=e.readFloat();break;case g.Text:case g.Icon:i.text=e.readS()}},s.OPTION_IGNORE_DISPLAY_CONTROLLER=1,s.OPTION_AUTO_STOP_DISABLED=2,s.OPTION_AUTO_STOP_AT_END=4,s}();d.Transition=t,__reflect(t.prototype,"fairygui.Transition");var g=function(){function t(){}return t.XY=0,t.Size=1,t.Scale=2,t.Pivot=3,t.Alpha=4,t.Rotation=5,t.Color=6,t.Animation=7,t.Visible=8,t.Sound=9,t.Transition=10,t.Shake=11,t.ColorFilter=12,t.Skew=13,t.Text=14,t.Icon=15,t.Unknown=16,t}();__reflect(g.prototype,"TransitionActionType");var a=function(t){switch(this.type=t){case g.XY:case g.Size:case g.Scale:case g.Pivot:case g.Skew:case g.Alpha:case g.Rotation:case g.Color:case g.ColorFilter:this.value=new l;break;case g.Animation:this.value=new i;break;case g.Shake:this.value=new r;break;case g.Sound:this.value=new n;break;case g.Transition:this.value=new o;break;case g.Visible:this.value=new e;break;case g.Text:case g.Icon:this.value=new s}};__reflect(a.prototype,"TransitionItem");var h=function(){this.duration=0,this.repeat=0,this.yoyo=!1,this.easeType=d.EaseType.QuadOut,this.startValue=new l,this.endValue=new l};__reflect(h.prototype,"TweenConfig");var e=function(){};__reflect(e.prototype,"TValue_Visible");var i=function(){};__reflect(i.prototype,"TValue_Animation");var n=function(){};__reflect(n.prototype,"TValue_Sound");var o=function(){};__reflect(o.prototype,"TValue_Transition");var r=function(){};__reflect(r.prototype,"TValue_Shake");var s=function(){};__reflect(s.prototype,"TValue_Text");var l=function(){this.f1=this.f2=this.f3=this.f4=0,this.b1=this.b2=!0};__reflect(l.prototype,"TValue")}(fairygui||(fairygui={})),function(t){var e=function(){this.addDelay=0,this.rect=new egret.Rectangle};(fairygui||(fairygui={})).Frame=e,__reflect(e.prototype,"fairygui.Frame")}(),function(o){var t=function(i){function t(){var t=i.call(this)||this;return t.interval=0,t.repeatDelay=0,t.timeScale=1,t._playing=!0,t._frameCount=0,t._frame=0,t._start=0,t._end=0,t._times=0,t._endAt=0,t._status=0,t._smoothing=!0,t._frameElapsed=0,t._reversed=!1,t._repeatedCount=0,egret.nativeRender||(t.$renderNode=new egret.sys.NormalBitmapNode),t.touchEnabled=!1,t.setPlaySettings(),t}return __extends(t,i),t.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(11)},Object.defineProperty(t.prototype,"frames",{get:function(){return this._frames},set:function(t){this._frames=t,null!=this._frames?this._frameCount=this._frames.length:this._frameCount=0,(-1==this._end||this._end>this._frameCount-1)&&(this._end=this._frameCount-1),(-1==this._endAt||this._endAt>this._frameCount-1)&&(this._endAt=this._frameCount-1),(this._frame<0||this._frame>this._frameCount-1)&&(this._frame=this._frameCount-1),this.drawFrame(),this._frameElapsed=0,this._repeatedCount=0,this._reversed=!1,this.checkTimer()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frameCount",{get:function(){return this._frameCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame!=t&&(null!=this._frames&&t>=this._frameCount&&(t=this._frameCount-1),this._frame=t,this._frameElapsed=0,this.drawFrame())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},set:function(t){this._playing!=t&&(this._playing=t,this.checkTimer())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"smoothing",{get:function(){return this._smoothing},set:function(t){this._smoothing=t},enumerable:!0,configurable:!0}),t.prototype.rewind=function(){this._frame=0,this._frameElapsed=0,this._reversed=!1,this._repeatedCount=0,this.drawFrame()},t.prototype.syncStatus=function(t){this._frame=t._frame,this._frameElapsed=t._frameElapsed,this._reversed=t._reversed,this._repeatedCount=t._repeatedCount,this.drawFrame()},t.prototype.advance=function(t){for(var e=this._frame,i=this._reversed,n=t;;){var o=this.interval+this._frames[this._frame].addDelay;if(0==this._frame&&0<this._repeatedCount&&(o+=this.repeatDelay),t<o){this._frameElapsed=0;break}if(t-=o,this.swing?this._reversed?(this._frame--,this._frame<=0&&(this._frame=0,this._repeatedCount++,this._reversed=!this._reversed)):(this._frame++,this._frame>this._frameCount-1&&(this._frame=Math.max(0,this._frameCount-2),this._repeatedCount++,this._reversed=!this._reversed)):(this._frame++,this._frame>this._frameCount-1&&(this._frame=0,this._repeatedCount++)),this._frame==e&&this._reversed==i){var r=n-t;t-=Math.floor(t/r)*r}}this.drawFrame()},t.prototype.setPlaySettings=function(t,e,i,n,o,r){void 0===t&&(t=0),void 0===e&&(e=-1),void 0===i&&(i=0),void 0===n&&(n=-1),void 0===o&&(o=null),void 0===r&&(r=null),this._start=t,this._end=e,(-1==this._end||this._end>this._frameCount-1)&&(this._end=this._frameCount-1),this._times=i,this._endAt=n,-1==this._endAt&&(this._endAt=this._end),this._status=0,this._callback=o,this._callbackObj=r,this.frame=t},t.prototype.update=function(){if(this._playing&&0!=this._frameCount&&3!=this._status){var t=o.GTimers.deltaTime;1!=this.timeScale&&(t*=this.timeScale),this._frameElapsed+=t;var e=this.interval+this._frames[this._frame].addDelay;if(0==this._frame&&0<this._repeatedCount&&(e+=this.repeatDelay),!(this._frameElapsed<e)){if(this._frameElapsed-=e,this._frameElapsed>this.interval&&(this._frameElapsed=this.interval),this.swing?this._reversed?(this._frame--,this._frame<=0&&(this._frame=0,this._repeatedCount++,this._reversed=!this._reversed)):(this._frame++,this._frame>this._frameCount-1&&(this._frame=Math.max(0,this._frameCount-2),this._repeatedCount++,this._reversed=!this._reversed)):(this._frame++,this._frame>this._frameCount-1&&(this._frame=0,this._repeatedCount++)),1==this._status)this._frame=this._start,this._frameElapsed=0,this._status=0;else if(2==this._status){if(this._frame=this._endAt,this._frameElapsed=0,this._status=3,null!=this._callback){var i=this._callback,n=this._callbackObj;this._callback=null,this._callbackObj=null,i.call(n)}}else this._frame==this._end&&(0<this._times?(this._times--,0==this._times?this._status=2:this._status=1):0!=this._start&&(this._status=1));this.drawFrame()}}},t.prototype.drawFrame=function(){if(0<this._frameCount&&this._frame<this._frames.length){var t=this._frames[this._frame];this._texture=t.texture,this._frameRect=t.rect}else this._texture=null;if(this.$updateRenderNode){this.$renderDirty=!0;var e=this.$parent;e&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp());var i=this.$maskedObject;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp())}else{this.$invalidateContentBounds()}},t.prototype.checkTimer=function(){this._playing&&0<this._frameCount&&null!=this.stage?o.GTimers.inst.add(1,0,this.update,this):o.GTimers.inst.remove(this.update,this)},t.prototype.$updateRenderNode=function(){var t=this._texture;if(t){var e=Math.round(t.$offsetX)+this._frameRect.x,i=Math.round(t.$offsetY)+this._frameRect.y,n=t.$bitmapWidth,o=t.$bitmapHeight,r=t.$getTextureWidth(),s=t.$getTextureHeight(),a=Math.round(t.$getScaleBitmapWidth()),h=Math.round(t.$getScaleBitmapHeight()),l=t.$sourceWidth,c=t.$sourceHeight;egret.sys.BitmapNode.$updateTextureData(this.$renderNode,t.$bitmapData,t.$bitmapX,t.$bitmapY,n,o,e,i,r,s,a,h,l,c,egret.BitmapFillMode.SCALE,this._smoothing)}},t.prototype.$measureContentBounds=function(t){if(this._texture){var e=this._frameRect.x,i=this._frameRect.y,n=this._texture.$getTextureWidth(),o=this._texture.$getTextureHeight();t.setTo(e,i,n,o)}else t.setEmpty()},t.prototype.$onAddToStage=function(t,e){i.prototype.$onAddToStage.call(this,t,e),this._playing&&0<this._frameCount&&o.GTimers.inst.add(1,0,this.update,this)},t.prototype.$onRemoveFromStage=function(){i.prototype.$onRemoveFromStage.call(this),o.GTimers.inst.remove(this.update,this)},t}(egret.DisplayObject);o.MovieClip=t,__reflect(t.prototype,"fairygui.MovieClip")}(fairygui||(fairygui={})),function(t){var e=function(s){function t(){var t=s.call(this)||this;return t.touchEnabled=!0,t.touchChildren=!0,t}return __extends(t,s),Object.defineProperty(t.prototype,"hitArea",{get:function(){return this._hitArea},set:function(t){this._hitArea&&t?(this._hitArea.x=t.x,this._hitArea.y=t.y,this._hitArea.width=t.width,this._hitArea.height=t.height):this._hitArea=t?t.clone():null},enumerable:!0,configurable:!0}),t.prototype.$hitTest=function(t,e){var i=s.prototype.$hitTest.call(this,t,e);if(i==this){if(!this.touchEnabled||null==this._hitArea)return null}else if(null==i&&this.touchEnabled&&this.visible&&null!=this._hitArea){var n=this.$getInvertedConcatenatedMatrix(),o=n.a*t+n.c*e+n.tx,r=n.b*t+n.d*e+n.ty;this._hitArea.contains(o,r)&&(i=this)}return i},t}(egret.DisplayObjectContainer);t.UIContainer=e,__reflect(e.prototype,"fairygui.UIContainer")}(fairygui||(fairygui={})),function(a){var t=function(o){function s(){var t=o.call(this)||this;return t._mode=a.ButtonMode.Common,t._title="",t._icon="",t._sound=a.UIConfig.buttonSound,t._soundVolumeScale=a.UIConfig.buttonSoundVolumeScale,t._pageOption=new a.PageOption,t._changeStateOnClick=!0,t._downEffect=0,t._downEffectValue=.8,t}return __extends(s,o),Object.defineProperty(s.prototype,"icon",{get:function(){return this._icon},set:function(t){this._icon=t,t=this._selected&&this._selectedIcon?this._selectedIcon:this._icon,null!=this._iconObject&&(this._iconObject.icon=t),this.updateGear(7)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"selectedIcon",{get:function(){return this._selectedIcon},set:function(t){this._selectedIcon=t,t=this._selected&&this._selectedIcon?this._selectedIcon:this._icon,null!=this._iconObject&&(this._iconObject.icon=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"title",{get:function(){return this._title},set:function(t){this._title=t,this._titleObject&&(this._titleObject.text=this._selected&&this._selectedTitle?this._selectedTitle:this._title),this.updateGear(6)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"text",{get:function(){return this.title},set:function(t){this.title=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"selectedTitle",{get:function(){return this._selectedTitle},set:function(t){this._selectedTitle=t,this._titleObject&&(this._titleObject.text=this._selected&&this._selectedTitle?this._selectedTitle:this._title)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"titleColor",{get:function(){var t=this.getTextField();return null!=t?t.color:0},set:function(t){var e=this.getTextField();null!=e&&(e.color=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"titleFontSize",{get:function(){var t=this.getTextField();return null!=t?t.fontSize:0},set:function(t){var e=this.getTextField();null!=e&&(e.fontSize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"sound",{get:function(){return this._sound},set:function(t){this._sound=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"soundVolumeScale",{get:function(){return this._soundVolumeScale},set:function(t){this._soundVolumeScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"selected",{get:function(){return this._selected},set:function(t){if(this._mode!=a.ButtonMode.Common&&this._selected!=t){if(this._selected=t,this.grayed&&this._buttonController&&this._buttonController.hasPage(s.DISABLED)?this._selected?this.setState(s.SELECTED_DISABLED):this.setState(s.DISABLED):this._selected?this.setState(this._over?s.SELECTED_OVER:s.DOWN):this.setState(this._over?s.OVER:s.UP),this._selectedTitle&&this._titleObject&&(this._titleObject.text=this._selected?this._selectedTitle:this._title),this._selectedIcon){var e=this._selected?this._selectedIcon:this._icon;null!=this._iconObject&&(this._iconObject.icon=e)}this._relatedController&&this._parent&&!this._parent._buildingDisplayList&&(this._selected?(this._relatedController.selectedPageId=this._pageOption.id,this._relatedController.autoRadioGroupDepth&&this._parent.adjustRadioGroupDepth(this,this._relatedController)):this._mode==a.ButtonMode.Check&&this._relatedController.selectedPageId==this._pageOption.id&&(this._relatedController.oppositePageId=this._pageOption.id))}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode!=t&&(t==a.ButtonMode.Common&&(this.selected=!1),this._mode=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"relatedController",{get:function(){return this._relatedController},set:function(t){t!=this._relatedController&&(this._relatedController=t,this._pageOption.controller=t,this._pageOption.clear())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"pageOption",{get:function(){return this._pageOption},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"changeStateOnClick",{get:function(){return this._changeStateOnClick},set:function(t){this._changeStateOnClick=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"linkedPopup",{get:function(){return this._linkedPopup},set:function(t){this._linkedPopup=t},enumerable:!0,configurable:!0}),s.prototype.getTextField=function(){return this._titleObject instanceof a.GTextField?this._titleObject:this._titleObject instanceof a.GLabel?this._titleObject.getTextField():this._titleObject instanceof s?this._titleObject.getTextField():null},s.prototype.addStateListener=function(t,e){this.addEventListener(a.StateChangeEvent.CHANGED,t,e)},s.prototype.removeStateListener=function(t,e){this.removeEventListener(a.StateChangeEvent.CHANGED,t,e)},s.prototype.fireClick=function(t){void 0===t&&(t=!0),t&&this._mode==a.ButtonMode.Common&&(this.setState(s.OVER),a.GTimers.inst.add(100,1,function(){this.setState(s.DOWN)},this),a.GTimers.inst.add(200,1,function(){this.setState(s.UP)},this)),this.__click(null)},s.prototype.setState=function(t){if(this._buttonController&&(this._buttonController.selectedPage=t),1==this._downEffect){var e=this.numChildren;if(t==s.DOWN||t==s.SELECTED_OVER||t==s.SELECTED_DISABLED)for(var i=255*this._downEffectValue,n=(i<<16)+(i<<8)+i,o=0;o<e;o++){null==(r=this.getChildAt(o)).color||r instanceof a.GTextField||(r.color=n)}else for(o=0;o<e;o++){var r;null==(r=this.getChildAt(o)).color||r instanceof a.GTextField||(r.color=16777215)}}else 2==this._downEffect&&(t==s.DOWN||t==s.SELECTED_OVER||t==s.SELECTED_DISABLED?this._downScaled||(this._downScaled=!0,this.setScale(this.scaleX*this._downEffectValue,this.scaleY*this._downEffectValue)):this._downScaled&&(this._downScaled=!1,this.setScale(this.scaleX/this._downEffectValue,this.scaleY/this._downEffectValue)))},s.prototype.handleControllerChanged=function(t){o.prototype.handleControllerChanged.call(this,t),this._relatedController==t&&(this.selected=this._pageOption.id==t.selectedPageId)},s.prototype.handleGrayedChanged=function(){this._buttonController&&this._buttonController.hasPage(s.DISABLED)?this.grayed?this._selected&&this._buttonController.hasPage(s.SELECTED_DISABLED)?this.setState(s.SELECTED_DISABLED):this.setState(s.DISABLED):this._selected?this.setState(s.DOWN):this.setState(s.UP):o.prototype.handleGrayedChanged.call(this)},s.prototype.constructExtension=function(t){t.seek(0,6),this._mode=t.readByte();var e=t.readS();e&&(this._sound=e),this._soundVolumeScale=t.readFloat(),this._downEffect=t.readByte(),this._downEffectValue=t.readFloat(),2==this._downEffect&&this.setPivot(.5,.5,this.pivotAsAnchor),this._buttonController=this.getController("button"),this._titleObject=this.getChild("title"),this._iconObject=this.getChild("icon"),null!=this._titleObject&&(this._title=this._titleObject.text),null!=this._iconObject&&(this._icon=this._iconObject.icon),this._mode==a.ButtonMode.Common&&this.setState(s.UP),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__mousedown,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__click,this)},s.prototype.setup_afterAdd=function(t,e){var i,n;(o.prototype.setup_afterAdd.call(this,t,e),t.seek(e,6))&&(t.readByte()==this.packageItem.objectType&&(null!=(i=t.readS())&&(this.title=i),null!=(i=t.readS())&&(this.selectedTitle=i),null!=(i=t.readS())&&(this.icon=i),null!=(i=t.readS())&&(this.selectedIcon=i),t.readBool()&&(this.titleColor=t.readColor()),0!=(n=t.readInt())&&(this.titleFontSize=n),0<=(n=t.readShort())&&(this._relatedController=this.parent.getControllerAt(n)),this.pageOption.id=t.readS(),null!=(i=t.readS())&&(this._sound=i),t.readBool()&&(this._soundVolumeScale=t.readFloat()),this.selected=t.readBool()))},s.prototype.__rollover=function(t){this._buttonController&&this._buttonController.hasPage(s.OVER)&&(this._over=!0,this._down||this.setState(this._selected?s.SELECTED_OVER:s.OVER))},s.prototype.__rollout=function(t){this._buttonController&&this._buttonController.hasPage(s.OVER)&&(this._over=!1,this._down||this.setState(this._selected?s.DOWN:s.UP))},s.prototype.__mousedown=function(t){this._down=!0,a.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_END,this.__mouseup,this),this._mode==a.ButtonMode.Common&&(this.grayed&&this._buttonController&&this._buttonController.hasPage(s.DISABLED)?this.setState(s.SELECTED_DISABLED):this.setState(s.DOWN)),null!=this._linkedPopup&&(this._linkedPopup instanceof a.Window?this._linkedPopup.toggleStatus():this.root.togglePopup(this._linkedPopup,this))},s.prototype.__mouseup=function(t){this._down&&(a.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_END,this.__mouseup,this),this._down=!1,this._mode==a.ButtonMode.Common&&(this.grayed&&this._buttonController&&this._buttonController.hasPage(s.DISABLED)?this.setState(s.DISABLED):this._over?this.setState(s.OVER):this.setState(s.UP)))},s.prototype.__click=function(t){this._sound&&(game.PlayerModule&&game.PlayerModule.instance.recordBtn(this),this.grayed?game.SoundManager&&game.SoundManager.Instance.playSound("button3",this._soundVolumeScale):this._sound&&game.SoundManager&&game.SoundManager.Instance.playSound(this._sound,this._soundVolumeScale)),this._mode==a.ButtonMode.Check?this._changeStateOnClick&&(this.selected=!this._selected,this.dispatchEvent(new a.StateChangeEvent(a.StateChangeEvent.CHANGED))):this._mode==a.ButtonMode.Radio?this._changeStateOnClick&&!this._selected&&(this.selected=!0,this.dispatchEvent(new a.StateChangeEvent(a.StateChangeEvent.CHANGED))):this._relatedController&&(this._relatedController.selectedPageId=this._pageOption.id)},s.UP="up",s.DOWN="down",s.OVER="over",s.SELECTED_OVER="selectedOver",s.DISABLED="disabled",s.SELECTED_DISABLED="selectedDisabled",s}(a.GComponent);a.GButton=t,__reflect(t.prototype,"fairygui.GButton")}(fairygui||(fairygui={})),function(o){var t=function(a){function t(){var t=a.call(this)||this;return t._visibleItemCount=0,t._selectedIndex=0,t._popupDirection=o.PopupDirection.Auto,t._visibleItemCount=o.UIConfig.defaultComboBoxVisibleItemCount,t._itemsUpdated=!0,t._selectedIndex=-1,t._items=[],t._values=[],t}return __extends(t,a),Object.defineProperty(t.prototype,"text",{get:function(){return this._titleObject?this._titleObject.text:null},set:function(t){this._titleObject&&(this._titleObject.text=t),this.updateGear(6)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return this._iconObject?this._iconObject.icon:null},set:function(t){this._iconObject&&(this._iconObject.icon=t),this.updateGear(7)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titleColor",{get:function(){var t=this.getTextField();return null!=t?t.color:0},set:function(t){var e=this.getTextField();null!=e&&(e.color=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titleFontSize",{get:function(){var t=this.getTextField();return null!=t?t.fontSize:0},set:function(t){var e=this.getTextField();null!=e&&(e.fontSize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleItemCount",{get:function(){return this._visibleItemCount},set:function(t){this._visibleItemCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"popupDirection",{get:function(){return this._popupDirection},set:function(t){this._popupDirection=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this._items},set:function(t){t?this._items=t.concat():this._items.length=0,0<this._items.length?(this._selectedIndex>=this._items.length?this._selectedIndex=this._items.length-1:-1==this._selectedIndex&&(this._selectedIndex=0),this.text=this._items[this._selectedIndex],null!=this._icons&&this._selectedIndex<this._icons.length&&(this.icon=this._icons[this._selectedIndex])):(this.text="",null!=this._icons&&(this.icon=null),this._selectedIndex=-1),this._itemsUpdated=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"icons",{get:function(){return this._icons},set:function(t){this._icons=t,null!=this._icons&&-1!=this._selectedIndex&&this._selectedIndex<this._icons.length&&(this.icon=this._icons[this._selectedIndex])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){return this._values},set:function(t){t?this._values=t.concat():this._values.length=0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){this._selectedIndex!=t&&(this._selectedIndex=t,0<=this.selectedIndex&&this.selectedIndex<this._items.length?(this.text=this._items[this._selectedIndex],null!=this._icons&&this._selectedIndex<this._icons.length&&(this.icon=this._icons[this._selectedIndex])):(this.text="",null!=this._icons&&(this.icon=null)),this.updateSelectionController())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._values[this._selectedIndex]},set:function(t){this.selectedIndex=this._values.indexOf(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectionController",{get:function(){return this._selectionController},set:function(t){this._selectionController=t},enumerable:!0,configurable:!0}),t.prototype.getTextField=function(){return this._titleObject instanceof o.GTextField?this._titleObject:this._titleObject instanceof o.GLabel?this._titleObject.getTextField():this._titleObject instanceof o.GButton?this._titleObject.getTextField():null},t.prototype.setState=function(t){this._buttonController&&(this._buttonController.selectedPage=t)},t.prototype.constructExtension=function(t){var e;if(this._buttonController=this.getController("button"),this._titleObject=this.getChild("title"),this._iconObject=this.getChild("icon"),e=t.readS()){if(this.dropdown=o.UIPackage.createObjectFromURL(e),!this.dropdown)return void console.error("");if(this.dropdown.name="this.dropdown",this._list=this.dropdown.getChild("list").asList,null==this._list)return void console.error(this.resourceURL+": list");this._list.addEventListener(o.ItemEvent.CLICK,this.__clickItem,this),this._list.addRelation(this.dropdown,o.RelationType.Width),this._list.removeRelation(this.dropdown,o.RelationType.Height),this.dropdown.addRelation(this._list,o.RelationType.Height),this.dropdown.removeRelation(this._list,o.RelationType.Width),this.dropdown.displayObject.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.__popupWinClosed,this)}this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__mousedown,this)},t.prototype.handleControllerChanged=function(t){a.prototype.handleControllerChanged.call(this,t),this._selectionController==t&&(this.selectedIndex=t.selectedIndex)},t.prototype.updateSelectionController=function(){if(null!=this._selectionController&&!this._selectionController.changing&&this._selectedIndex<this._selectionController.pageCount){var t=this._selectionController;this._selectionController=null,t.selectedIndex=this._selectedIndex,this._selectionController=t}},t.prototype.dispose=function(){this.dropdown&&(this.dropdown.dispose(),this.dropdown=null),a.prototype.dispose.call(this)},t.prototype.setup_afterAdd=function(t,e){if(a.prototype.setup_afterAdd.call(this,t,e),t.seek(e,6)&&t.readByte()==this.packageItem.objectType){var i,n,o,r,s=t.readShort();for(i=0;i<s;i++)o=t.readShort(),o+=t.position,this._items[i]=t.readS(),this._values[i]=t.readS(),null!=(r=t.readS())&&(null==this._icons&&(this._icons=new Array),this._icons[i]=r),t.position=o;null!=(r=t.readS())?(this.text=r,this._selectedIndex=this._items.indexOf(r)):0<this._items.length?(this._selectedIndex=0,this.text=this._items[0]):this._selectedIndex=-1,null!=(r=t.readS())&&(this.icon=r),t.readBool()&&(this.titleColor=t.readColor()),0<(n=t.readInt())&&(this._visibleItemCount=n),this._popupDirection=t.readByte(),0<=(n=t.readShort())&&(this._selectionController=this.parent.getControllerAt(n))}},t.prototype.showDropdown=function(){if(this._itemsUpdated){this._itemsUpdated=!1,this._list.removeChildrenToPool();for(var t=this._items.length,e=0;e<t;e++){var i=this._list.addItemFromPool();i.name=e<this._values.length?this._values[e]:"",i.text=this._items[e],i.icon=null!=this._icons&&e<this._icons.length?this._icons[e]:null}this._list.resizeToFit(this._visibleItemCount)}this._list.selectedIndex=-1,this.dropdown.width=this.width;var n=null;this._popupDirection==o.PopupDirection.Down?n=!0:this._popupDirection==o.PopupDirection.Up&&(n=!1),this.root.togglePopup(this.dropdown,this,n),this.dropdown.parent&&this.setState(o.GButton.DOWN)},t.prototype.__popupWinClosed=function(t){this._over?this.setState(o.GButton.OVER):this.setState(o.GButton.UP)},t.prototype.__clickItem=function(t){o.GTimers.inst.add(100,1,this.__clickItem2,this,this._list.getChildIndex(t.itemObject))},t.prototype.__clickItem2=function(t){this.dropdown.parent instanceof o.GRoot&&this.dropdown.parent.hidePopup(),this._selectedIndex=t,0<=this._selectedIndex?this.text=this._items[this._selectedIndex]:this.text="",this.dispatchEvent(new o.StateChangeEvent(o.StateChangeEvent.CHANGED))},t.prototype.__rollover=function(t){this._over=!0,this._down||this.dropdown&&this.dropdown.parent||this.setState(o.GButton.OVER)},t.prototype.__rollout=function(t){this._over=!1,this._down||this.dropdown&&this.dropdown.parent||this.setState(o.GButton.UP)},t.prototype.__mousedown=function(t){t.target instanceof egret.TextField&&t.target.type==egret.TextFieldType.INPUT||(this._down=!0,o.GRoot.inst.nativeStage.addEventListener(egret.TouchEvent.TOUCH_END,this.__mouseup,this),this.dropdown&&this.showDropdown())},t.prototype.__mouseup=function(t){this._down&&(this._down=!1,o.GRoot.inst.nativeStage.removeEventListener(egret.TouchEvent.TOUCH_END,this.__mouseup,this),this.dropdown&&!this.dropdown.parent&&(this._over?this.setState(o.GButton.OVER):this.setState(o.GButton.UP)))},t}(o.GComponent);o.GComboBox=t,__reflect(t.prototype,"fairygui.GComboBox")}(fairygui||(fairygui={})),function(a){var t=function(s){function t(){var t=s.call(this)||this;return t._type=0,t._lineSize=0,t._lineColor=0,t._fillColor=0,t._lineSize=1,t._lineAlpha=1,t._fillAlpha=1,t._fillColor=16777215,t._cornerRadius=null,t}return __extends(t,s),Object.defineProperty(t.prototype,"graphics",{get:function(){return this._graphics||(this.delayCreateDisplayObject(),this._graphics=this.displayObject.graphics),this._graphics},enumerable:!0,configurable:!0}),t.prototype.drawRect=function(t,e,i,n,o,r){void 0===r&&(r=null),this._type=1,this._lineSize=t,this._lineColor=e,this._lineAlpha=i,this._fillColor=n,this._fillAlpha=o,this._cornerRadius=r,this.drawCommon()},t.prototype.drawEllipse=function(t,e,i,n,o){this._type=2,this._lineSize=t,this._lineColor=e,this._lineAlpha=i,this._fillColor=n,this._fillAlpha=o,this._cornerRadius=null,this.drawCommon()},t.prototype.clearGraphics=function(){this._graphics&&(this._type=0,this._graphics.clear())},Object.defineProperty(t.prototype,"color",{get:function(){return this._fillColor},set:function(t){this._fillColor=t,0!=this._type&&this.drawCommon()},enumerable:!0,configurable:!0}),t.prototype.drawCommon=function(){this.graphics,this._graphics.clear();var t=this.width,e=this.height;0!=t&&0!=e&&(0==this._lineSize?this._graphics.lineStyle(0,0,0):this._graphics.lineStyle(this._lineSize,this._lineColor,this._lineAlpha),this._graphics.beginFill(this._fillColor,this._fillAlpha),1==this._type?this._cornerRadius?1==this._cornerRadius.length?this._graphics.drawRoundRect(0,0,t,e,2*this._cornerRadius[0],2*this._cornerRadius[0]):this._graphics.drawRoundRect(0,0,t,e,2*this._cornerRadius[0],2*this._cornerRadius[1]):this._graphics.drawRect(0,0,t,e):this._graphics.drawEllipse(0,0,t,e),this._graphics.endFill())},t.prototype.replaceMe=function(t){if(!this._parent)throw"parent not set";t.name=this.name,t.alpha=this.alpha,t.rotation=this.rotation,t.visible=this.visible,t.touchable=this.touchable,t.grayed=this.grayed,t.setXY(this.x,this.y),t.setSize(this.width,this.height);var e=this._parent.getChildIndex(this);this._parent.addChildAt(t,e),t.relations.copyFrom(this.relations),this._parent.removeChild(this,!0)},t.prototype.addBeforeMe=function(t){if(null==this._parent)throw"parent not set";var e=this._parent.getChildIndex(this);this._parent.addChildAt(t,e)},t.prototype.addAfterMe=function(t){if(null==this._parent)throw"parent not set";var e=this._parent.getChildIndex(this);e++,this._parent.addChildAt(t,e)},t.prototype.setNativeObject=function(t){this.delayCreateDisplayObject(),this.displayObject.addChild(t)},t.prototype.delayCreateDisplayObject=function(){if(this.displayObject)this.displayObject.graphics.clear(),this.displayObject.removeChildren(),this._graphics=null;else{var t=new a.UISprite;(t.$owner=this).setDisplayObject(t),this._parent&&this._parent.childStateChanged(this),this.handleXYChanged(),t.alpha=this.alpha,t.rotation=this.rotation,t.visible=this.visible,t.touchEnabled=this.touchable,t.touchChildren=this.touchable,t.hitArea=new egret.Rectangle(0,0,this.width,this.height)}},t.prototype.handleSizeChanged=function(){this._graphics&&0!=this._type&&this.drawCommon(),this.displayObject instanceof a.UISprite&&(null==this.displayObject.hitArea?this.displayObject.hitArea=new egret.Rectangle(0,0,this.width,this.height):(this.displayObject.hitArea.width=this.width,this.displayObject.hitArea.height=this.height))},t.prototype.setup_beforeAdd=function(t,e){t.seek(e,5);var i=t.readByte();if(0!=i){this._lineSize=t.readInt();var n=t.readColor(!0);if(this._lineColor=16777215&n,this._lineAlpha=(n>>24&255)/255,n=t.readColor(!0),this._fillColor=16777215&n,this._fillAlpha=(n>>24&255)/255,t.readBool()){this._cornerRadius=new Array(4);for(var o=0;o<4;o++)this._cornerRadius[o]=t.readFloat()}var r=new a.UISprite;(r.$owner=this).setDisplayObject(r)}s.prototype.setup_beforeAdd.call(this,t,e),null!=this.displayObject&&(this._graphics=this.displayObject.graphics,this._type=i,this.drawCommon())},t}(a.GObject);a.GGraph=t,__reflect(t.prototype,"fairygui.GGraph")}(fairygui||(fairygui={})),function(g){var t=function(i){function t(){var t=i.call(this)||this;return t._layout=0,t._lineGap=0,t._columnGap=0,t._percentReady=!1,t._boundsChanged=!1,t._updating=0,t}return __extends(t,i),Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},set:function(t){this._layout!=t&&(this._layout=t,this.setBoundsChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineGap",{get:function(){return this._lineGap},set:function(t){this._lineGap!=t&&(this._lineGap=t,this.setBoundsChangedFlag())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnGap",{get:function(){return this._columnGap},set:function(t){this._columnGap!=t&&(this._columnGap=t,this.setBoundsChangedFlag())},enumerable:!0,configurable:!0}),t.prototype.setBoundsChangedFlag=function(t){void 0===t&&(t=!1),0==this._updating&&null!=this._parent&&(t&&(this._percentReady=!1),this._boundsChanged||(this._boundsChanged=!0,this._layout!=g.GroupLayoutType.None&&g.GTimers.inst.callLater(this.ensureBoundsCorrect,this)))},t.prototype.ensureBoundsCorrect=function(){this._boundsChanged&&this.updateBounds()},t.prototype.updateBounds=function(){if(g.GTimers.inst.remove(this.ensureBoundsCorrect,this),this._boundsChanged=!1,null!=this._parent){this.handleLayout();var t,e,i,n=this._parent.numChildren,o=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,h=!0;for(t=0;t<n;t++)(e=this._parent.getChildAt(t)).group==this&&((i=e.x)<o&&(o=i),(i=e.y)<r&&(r=i),s<(i=e.x+e.width)&&(s=i),a<(i=e.y+e.height)&&(a=i),h=!1);h?(this._updating=2,this.setSize(0,0)):(this._updating=1,this.setXY(o,r),this._updating=2,this.setSize(s-o,a-r)),this._updating=0}},t.prototype.handleLayout=function(){var t,e,i;if(this._updating|=1,this._layout==g.GroupLayoutType.Horizontal){var n=NaN;for(i=this._parent.numChildren,e=0;e<i;e++)(t=this._parent.getChildAt(e)).group==this&&(isNaN(n)?n=Math.floor(t.x):t.x=n,0!=t.width&&(n+=Math.floor(t.width+this._columnGap)));this._percentReady||this.updatePercent()}else if(this._layout==g.GroupLayoutType.Vertical){var o=NaN;for(i=this._parent.numChildren,e=0;e<i;e++)(t=this._parent.getChildAt(e)).group==this&&(isNaN(o)?o=Math.floor(t.y):t.y=o,0!=t.height&&(o+=Math.floor(t.height+this._lineGap)));this._percentReady||this.updatePercent()}this._updating&=2},t.prototype.updatePercent=function(){this._percentReady=!0;var t,e,i=this._parent.numChildren,n=0;if(this._layout==g.GroupLayoutType.Horizontal){for(t=0;t<i;t++)(e=this._parent.getChildAt(t)).group==this&&(n+=e.width);for(t=0;t<i;t++)(e=this._parent.getChildAt(t)).group==this&&(e._sizePercentInGroup=0<n?e.width/n:0)}else{for(t=0;t<i;t++)(e=this._parent.getChildAt(t)).group==this&&(n+=e.height);for(t=0;t<i;t++)(e=this._parent.getChildAt(t)).group==this&&(e._sizePercentInGroup=0<n?e.height/n:0)}},t.prototype.moveChildren=function(t,e){if(0==(1&this._updating)&&null!=this._parent){this._updating|=1;var i,n,o=this._parent.numChildren;for(i=0;i<o;i++)(n=this._parent.getChildAt(i)).group==this&&n.setXY(n.x+t,n.y+e);this._updating&=2}},t.prototype.resizeChildren=function(t,e){if(this._layout!=g.GroupLayoutType.None&&0==(2&this._updating)&&null!=this._parent){this._updating|=2,this._percentReady||this.updatePercent();var i,n,o,r=this._parent.numChildren,s=-1,a=0,h=0,l=0,c=!1;for(i=0;i<r;i++)(o=this._parent.getChildAt(i)).group==this&&(s=i,a++);if(this._layout==g.GroupLayoutType.Horizontal){l=h=this.width-(a-1)*this._columnGap;var _,u=NaN;for(i=0;i<r;i++)if((o=this._parent.getChildAt(i)).group==this)if(isNaN(u)?u=Math.floor(o.x):o.x=u,_=s==i?l:Math.round(o._sizePercentInGroup*h),o.setSize(_,o._rawHeight+e,!0),l-=o.width,s==i){if(1<=l)for(n=0;n<=i;n++)(o=this._parent.getChildAt(n)).group==this&&(c?o.x+=l:(_=o.width+l,(0==o.maxWidth||_<o.maxWidth)&&(0==o.minWidth||_>o.minWidth)&&(o.setSize(_,o.height,!0),c=!0)))}else u+=o.width+this._columnGap}else if(this._layout==g.GroupLayoutType.Vertical){l=h=this.height-(a-1)*this._lineGap;var p,d=NaN;for(i=0;i<r;i++)if((o=this._parent.getChildAt(i)).group==this)if(isNaN(d)?d=Math.floor(o.y):o.y=d,p=s==i?l:Math.round(o._sizePercentInGroup*h),o.setSize(o._rawWidth+t,p,!0),l-=o.height,s==i){if(1<=l)for(n=0;n<=i;n++)(o=this._parent.getChildAt(n)).group==this&&(c?o.y+=l:(p=o.height+l,(0==o.maxHeight||p<o.maxHeight)&&(0==o.minHeight||p>o.minHeight)&&(o.setSize(o.width,p,!0),c=!0)))}else d+=o.height+this._lineGap}this._updating&=1}},t.prototype.handleAlphaChanged=function(){if(!this._underConstruct)for(var t=this._parent.numChildren,e=0;e<t;e++){var i=this._parent.getChildAt(e);i.group==this&&(i.alpha=this.alpha)}},t.prototype.handleVisibleChanged=function(){if(this._parent)for(var t=this._parent.numChildren,e=0;e<t;e++){var i=this._parent.getChildAt(e);i.group==this&&i.handleVisibleChanged()}},t.prototype.setup_beforeAdd=function(t,e){i.prototype.setup_beforeAdd.call(this,t,e),t.seek(e,5),this._layout=t.readByte(),this._lineGap=t.readInt(),this._columnGap=t.readInt()},t.prototype.setup_afterAdd=function(t,e){i.prototype.setup_afterAdd.call(this,t,e),this.visible||this.handleVisibleChanged()},t}(g.GObject);g.GGroup=t,__reflect(t.prototype,"fairygui.GGroup")}(fairygui||(fairygui={})),function(e){var t=function(i){function t(){var t=i.call(this)||this;return t._color=16777215,t._flip=e.FlipType.None,t}return __extends(t,i),t.prototype.getColorMatrix=function(){if(this._matrix)return this._matrix;var t=this.filters;if(t)for(var e=0;e<t.length;e++)if(egret.is(t[e],"egret.ColorMatrixFilter"))return this._matrix=t[e],this._matrix;var i=new egret.ColorMatrixFilter;return this._matrix=i,(t=t||[]).push(i),this.filters=t,i},Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(t){this._color!=t&&(this._color=t,this.updateGear(4),this.applyColor())},enumerable:!0,configurable:!0}),t.prototype.applyColor=function(){var t=this.getColorMatrix(),e=t.matrix;e[0]=(this._color>>16&255)/255,e[6]=(this._color>>8&255)/255,e[12]=(255&this._color)/255,t.matrix=e},Object.defineProperty(t.prototype,"flip",{get:function(){return this._flip},set:function(t){this._flip!=t&&(this._flip=t,this._content.scaleX=this._content.scaleY=1,this._flip!=e.FlipType.Horizontal&&this._flip!=e.FlipType.Both||(this._content.scaleX=-1),this._flip!=e.FlipType.Vertical&&this._flip!=e.FlipType.Both||(this._content.scaleY=-1),this.handleXYChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._content.texture},set:function(t){null!=t?(this.sourceWidth=t.textureWidth,this.sourceHeight=t.textureHeight):(this.sourceWidth=0,this.sourceHeight=0),this.initWidth=this.sourceWidth,this.initHeight=this.sourceHeight,this._content.scale9Grid=null,this._content.fillMode=egret.BitmapFillMode.SCALE,this._content.texture=t},enumerable:!0,configurable:!0}),t.prototype.createDisplayObject=function(){this._content=new egret.Bitmap,(this._content.$owner=this)._content.touchEnabled=!1,this.setDisplayObject(this._content)},t.prototype.dispose=function(){i.prototype.dispose.call(this)},t.prototype.constructFromResource=function(){this.sourceWidth=this.packageItem.width,this.sourceHeight=this.packageItem.height,this.initWidth=this.sourceWidth,this.initHeight=this.sourceHeight,this._content.scale9Grid=this.packageItem.scale9Grid,this._content.smoothing=this.packageItem.smoothing,this.packageItem.scaleByTile&&(this._content.fillMode=egret.BitmapFillMode.REPEAT),this.setSize(this.sourceWidth,this.sourceHeight),this.packageItem.load(),this._content.texture=this.packageItem.texture},t.prototype.handleXYChanged=function(){i.prototype.handleXYChanged.call(this),this._flip!=e.FlipType.None&&(-1==this._content.scaleX&&(this._content.x+=this.width),-1==this._content.scaleY&&(this._content.y+=this.height))},t.prototype.handleSizeChanged=function(){this._content.width=this.width,this._content.height=this.height},t.prototype.setup_beforeAdd=function(t,e){i.prototype.setup_beforeAdd.call(this,t,e),t.seek(e,5),t.readBool()&&(this.color=t.readColor()),this.flip=t.readByte()},t}(e.GObject);e.GImage=t,__reflect(t.prototype,"fairygui.GImage")}(fairygui||(fairygui={})),function(e){var t=function(r){function t(){return r.call(this)||this}return __extends(t,r),Object.defineProperty(t.prototype,"icon",{get:function(){if(null!=this._iconObject)return this._iconObject.icon},set:function(t){null!=this._iconObject&&(this._iconObject.icon=t),this.updateGear(7)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._titleObject?this._titleObject.text:null},set:function(t){this._titleObject&&(this._titleObject.text=t),this.updateGear(6)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.title},set:function(t){this.title=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titleColor",{get:function(){var t=this.getTextField();return null!=t?t.color:0},set:function(t){var e=this.getTextField();null!=e&&(e.color=t),this.updateGear(4)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.titleColor},set:function(t){this.titleColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titleFontSize",{get:function(){var t=this.getTextField();return null!=t?t.fontSize:0},set:function(t){var e=this.getTextField();null!=e&&(e.fontSize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editable",{get:function(){return!!(this._titleObject&&this._titleObject instanceof e.GTextInput)&&this._titleObject.asTextInput.editable},set:function(t){this._titleObject&&(this._titleObject.asTextInput.editable=t)},enumerable:!0,configurable:!0}),t.prototype.getTextField=function(){return this._titleObject instanceof e.GTextField?this._titleObject:this._titleObject instanceof t?this._titleObject.getTextField():this._titleObject instanceof e.GButton?this._titleObject.getTextField():null},t.prototype.constructExtension=function(t){this._titleObject=this.getChild("title"),this._iconObject=this.getChild("icon")},t.prototype.setup_afterAdd=function(t,e){if(r.prototype.setup_afterAdd.call(this,t,e),t.seek(e,6)&&t.readByte()==this.packageItem.objectType){var i;null!=(i=t.readS())&&(this.title=i),null!=(i=t.readS())&&(this.icon=i),t.readBool()&&(this.titleColor=t.readColor());var n=t.readInt();if(0!=n&&(this.titleFontSize=n),t.readBool()){var o=this.getTextField();null!=o?(null!=(i=t.readS())&&(o.promptText=i),null!=(i=t.readS())&&(o.restrict=i),0!=(n=t.readInt())&&(o.maxLength=n),n=t.readInt(),t.readBool()&&(o.password=!0)):t.skip(13)}}},t}(e.GComponent);e.GLabel=t,__reflect(t.prototype,"fairygui.GLabel")}(fairygui||(fairygui={})),function(I){var t=function(u){function x(){var t=u.call(this)||this;return t.scrollItemToViewOnClick=!0,t.foldInvisibleItems=!1,t._lineCount=0,t._columnCount=0,t._lineGap=0,t._columnGap=0,t._lastSelectedIndex=0,t._numItems=0,t._realNumItems=0,t._firstIndex=0,t._curLineItemCount=0,t._curLineItemCount2=0,t._virtualListChanged=0,t.itemInfoVer=0,t.enterCounter=0,t._trackBounds=!0,t._pool=new I.GObjectPool,t._layout=I.ListLayoutType.SingleColumn,t._autoResizeItem=!0,t._lastSelectedIndex=-1,t._selectionMode=I.ListSelectionMode.Single,t.opaque=!0,t._align=I.AlignType.Left,t._verticalAlign=I.VertAlignType.Top,t._container=new egret.DisplayObjectContainer,t._rootContainer.addChild(t._container),t}return __extends(x,u),x.prototype.dispose=function(){this._pool.clear(),u.prototype.dispose.call(this)},Object.defineProperty(x.prototype,"layout",{get:function(){return this._layout},set:function(t){this._layout!=t&&(this._layout=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"lineCount",{get:function(){return this._lineCount},set:function(t){this._lineCount!=t&&(this._lineCount=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"columnCount",{get:function(){return this._columnCount},set:function(t){this._columnCount!=t&&(this._columnCount=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"lineGap",{get:function(){return this._lineGap},set:function(t){this._lineGap!=t&&(this._lineGap=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"columnGap",{get:function(){return this._columnGap},set:function(t){this._columnGap!=t&&(this._columnGap=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"align",{get:function(){return this._align},set:function(t){this._align!=t&&(this._align=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"virtualItemSize",{get:function(){return this._itemSize},set:function(t){this._virtual&&(null==this._itemSize&&(this._itemSize=new egret.Point),this._itemSize.copyFrom(t),this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"defaultItem",{get:function(){return this._defaultItem},set:function(t){this._defaultItem=t},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"autoResizeItem",{get:function(){return this._autoResizeItem},set:function(t){this._autoResizeItem!=t&&(this._autoResizeItem=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"selectionMode",{get:function(){return this._selectionMode},set:function(t){this._selectionMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"selectionController",{get:function(){return this._selectionController},set:function(t){this._selectionController=t},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"itemPool",{get:function(){return this._pool},enumerable:!0,configurable:!0}),x.prototype.getFromPool=function(t){void 0===t&&(t=null),t||(t=this._defaultItem);var e=this._pool.getObject(t);return null!=e&&(e.visible=!0),e},x.prototype.returnToPool=function(t){t.displayObject.cacheAsBitmap=!1,this._pool.returnObject(t)},x.prototype.addChildAt=function(t,e){if(void 0===e&&(e=0),u.prototype.addChildAt.call(this,t,e),t instanceof I.GButton){var i=t;i.selected=!1,i.changeStateOnClick=!1}return t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__clickItem,this),t},x.prototype.addItem=function(t){return void 0===t&&(t=null),t||(t=this._defaultItem),this.addChild(I.UIPackage.createObjectFromURL(t))},x.prototype.addItemFromPool=function(t){return void 0===t&&(t=null),this.addChild(this.getFromPool(t))},x.prototype.removeChildAt=function(t,e){void 0===e&&(e=!1);var i=u.prototype.removeChildAt.call(this,t,e);return i.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.__clickItem,this),i},x.prototype.removeChildToPoolAt=function(t){void 0===t&&(t=0);var e=u.prototype.removeChildAt.call(this,t);this.returnToPool(e)},x.prototype.removeChildToPool=function(t){u.prototype.removeChild.call(this,t),this.returnToPool(t)},x.prototype.removeChildrenToPool=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),(e<0||e>=this._children.length)&&(e=this._children.length-1);for(var i=t;i<=e;++i)this.removeChildToPoolAt(t)},Object.defineProperty(x.prototype,"selectedIndex",{get:function(){var t;if(this._virtual)for(t=0;t<this._realNumItems;t++){var e=this._virtualItems[t];if(e.obj instanceof I.GButton&&e.obj.selected||null==e.obj&&e.selected)return this._loop?t%this._numItems:t}else{var i=this._children.length;for(t=0;t<i;t++){var n=this._children[t].asButton;if(null!=n&&n.selected)return t}}return-1},set:function(t){0<=t&&t<this.numItems?(this._selectionMode!=I.ListSelectionMode.Single&&this.clearSelection(),this.addSelection(t)):this.clearSelection()},enumerable:!0,configurable:!0}),x.prototype.getSelection=function(){var t,e=new Array;if(this._virtual)for(t=0;t<this._realNumItems;t++){var i=this._virtualItems[t];if(i.obj instanceof I.GButton&&i.obj.selected||null==i.obj&&i.selected){var n=t;if(this._loop&&(n=t%this._numItems,-1!=e.indexOf(n)))continue;e.push(n)}}else{var o=this._children.length;for(t=0;t<o;t++){var r=this._children[t].asButton;null!=r&&r.selected&&e.push(t)}}return e},x.prototype.addSelection=function(t,e){if(void 0===e&&(e=!1),this._selectionMode!=I.ListSelectionMode.None){this.checkVirtualList(),this._selectionMode==I.ListSelectionMode.Single&&this.clearSelection(),e&&this.scrollToView(t),this._lastSelectedIndex=t;var i=null;if(this._virtual){var n=this._virtualItems[t];null!=n.obj&&(i=n.obj.asButton),n.selected=!0}else i=this.getChildAt(t).asButton;null==i||i.selected||(i.selected=!0,this.updateSelectionController(t))}},x.prototype.removeSelection=function(t){if(this._selectionMode!=I.ListSelectionMode.None){var e=null;if(this._virtual){var i=this._virtualItems[t];null!=i.obj&&(e=i.obj.asButton),i.selected=!1}else e=this.getChildAt(t).asButton;null!=e&&(e.selected=!1)}},x.prototype.clearSelection=function(){var t;if(this._virtual)for(t=0;t<this._realNumItems;t++){var e=this._virtualItems[t];e.obj instanceof I.GButton&&(e.obj.selected=!1),e.selected=!1}else{var i=this._children.length;for(t=0;t<i;t++){var n=this._children[t].asButton;null!=n&&(n.selected=!1)}}},x.prototype.clearSelectionExcept=function(t){var e;if(this._virtual)for(e=0;e<this._realNumItems;e++){var i=this._virtualItems[e];i.obj!=t&&(i.obj instanceof I.GButton&&(i.obj.selected=!1),i.selected=!1)}else{var n=this._children.length;for(e=0;e<n;e++){var o=this._children[e].asButton;null!=o&&o!=t&&(o.selected=!1)}}},x.prototype.selectAll=function(){this.checkVirtualList();var t,e=-1;if(this._virtual)for(t=0;t<this._realNumItems;t++){var i=this._virtualItems[t];i.obj instanceof I.GButton&&!i.obj.selected&&(i.obj.selected=!0,e=t),i.selected=!0}else{var n=this._children.length;for(t=0;t<n;t++){var o=this._children[t].asButton;null==o||o.selected||(o.selected=!0,e=t)}}-1!=e&&this.updateSelectionController(e)},x.prototype.selectNone=function(){this.clearSelection()},x.prototype.selectReverse=function(){this.checkVirtualList();var t,e=-1;if(this._virtual)for(t=0;t<this._realNumItems;t++){var i=this._virtualItems[t];i.obj instanceof I.GButton&&(i.obj.selected=!i.obj.selected,i.obj.selected&&(e=t)),i.selected=!i.selected}else{var n=this._children.length;for(t=0;t<n;t++){var o=this._children[t].asButton;null!=o&&(o.selected=!o.selected,o.selected&&(e=t))}}-1!=e&&this.updateSelectionController(e)},x.prototype.handleArrowKey=function(t){void 0===t&&(t=0);var e=this.selectedIndex;if(-1!=e)switch(t){case 1:if(this._layout==I.ListLayoutType.SingleColumn||this._layout==I.ListLayoutType.FlowVertical)0<=--e&&(this.clearSelection(),this.addSelection(e,!0));else if(this._layout==I.ListLayoutType.FlowHorizontal||this._layout==I.ListLayoutType.Pagination){for(var i=this._children[e],n=0,o=e-1;0<=o;o--){var r=this._children[o];if(r.y!=i.y){i=r;break}n++}for(;0<=o;o--)if((r=this._children[o]).y!=i.y){this.clearSelection(),this.addSelection(o+n+1,!0);break}}break;case 3:if(this._layout==I.ListLayoutType.SingleRow||this._layout==I.ListLayoutType.FlowHorizontal||this._layout==I.ListLayoutType.Pagination)++e<this._children.length&&(this.clearSelection(),this.addSelection(e,!0));else if(this._layout==I.ListLayoutType.FlowVertical){i=this._children[e],n=0;var s=this._children.length;for(o=e+1;o<s;o++){if((r=this._children[o]).x!=i.x){i=r;break}n++}for(;o<s;o++)if((r=this._children[o]).x!=i.x){this.clearSelection(),this.addSelection(o-n-1,!0);break}}break;case 5:if(this._layout==I.ListLayoutType.SingleColumn||this._layout==I.ListLayoutType.FlowVertical)++e<this._children.length&&(this.clearSelection(),this.addSelection(e,!0));else if(this._layout==I.ListLayoutType.FlowHorizontal||this._layout==I.ListLayoutType.Pagination){for(i=this._children[e],n=0,s=this._children.length,o=e+1;o<s;o++){if((r=this._children[o]).y!=i.y){i=r;break}n++}for(;o<s;o++)if((r=this._children[o]).y!=i.y){this.clearSelection(),this.addSelection(o-n-1,!0);break}}break;case 7:if(this._layout==I.ListLayoutType.SingleRow||this._layout==I.ListLayoutType.FlowHorizontal||this._layout==I.ListLayoutType.Pagination)0<=--e&&(this.clearSelection(),this.addSelection(e,!0));else if(this._layout==I.ListLayoutType.FlowVertical){for(i=this._children[e],n=0,o=e-1;0<=o;o--){if((r=this._children[o]).x!=i.x){i=r;break}n++}for(;0<=o;o--)if((r=this._children[o]).x!=i.x){this.clearSelection(),this.addSelection(o+n+1,!0);break}}}},x.prototype.__clickItem=function(t){if(null==this._scrollPane||!this._scrollPane.isDragged){var e=t.currentTarget;this.setSelectionOnEvent(e),this._scrollPane&&this.scrollItemToViewOnClick&&this._scrollPane.scrollToView(e,!0);var i=new I.ItemEvent(I.ItemEvent.CLICK,e);i.stageX=t.stageX,i.stageY=t.stageY,this.dispatchEvent(i)}},x.prototype.setSelectionOnEvent=function(t){if(t instanceof I.GButton&&this._selectionMode!=I.ListSelectionMode.None){var e=!1,i=t,n=this.childIndexToItemIndex(this.getChildIndex(t));if(this._selectionMode==I.ListSelectionMode.Single)i.selected||(this.clearSelectionExcept(i),i.selected=!0);else if(I.GRoot.shiftKeyDown){if(!i.selected)if(-1!=this._lastSelectedIndex){var o,r=Math.min(this._lastSelectedIndex,n),s=Math.max(this._lastSelectedIndex,n);if(s=Math.min(s,this.numItems-1),this._virtual)for(o=r;o<=s;o++){var a=this._virtualItems[o];a.obj instanceof I.GButton&&(a.obj.selected=!0),a.selected=!0}else for(o=r;o<=s;o++){var h=this.getChildAt(o).asButton;null!=h&&(h.selected=!0)}e=!0}else i.selected=!0}else I.GRoot.ctrlKeyDown||this._selectionMode==I.ListSelectionMode.Multiple_SingleClick?i.selected=!i.selected:i.selected?this.clearSelectionExcept(i):(this.clearSelectionExcept(i),i.selected=!0);e||(this._lastSelectedIndex=n),i.selected&&this.updateSelectionController(n)}},x.prototype.resizeToFit=function(t,e){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===e&&(e=0),this.ensureBoundsCorrect();var i=this.numItems;if(i<t&&(t=i),this._virtual){var n=Math.ceil(t/this._curLineItemCount);this._layout==I.ListLayoutType.SingleColumn||this._layout==I.ListLayoutType.FlowHorizontal?this.viewHeight=n*this._itemSize.y+Math.max(0,n-1)*this._lineGap:this.viewWidth=n*this._itemSize.x+Math.max(0,n-1)*this._columnGap}else if(0==t)this._layout==I.ListLayoutType.SingleColumn||this._layout==I.ListLayoutType.FlowHorizontal?this.viewHeight=e:this.viewWidth=e;else{for(var o=t-1,r=null;0<=o&&(r=this.getChildAt(o),this.foldInvisibleItems&&!r.visible);)o--;if(o<0)this._layout==I.ListLayoutType.SingleColumn||this._layout==I.ListLayoutType.FlowHorizontal?this.viewHeight=e:this.viewWidth=e;else{var s=0;this._layout==I.ListLayoutType.SingleColumn||this._layout==I.ListLayoutType.FlowHorizontal?((s=r.y+r.height)<e&&(s=e),this.viewHeight=s):((s=r.x+r.width)<e&&(s=e),this.viewWidth=s)}}},x.prototype.getMaxItemWidth=function(){for(var t=this._children.length,e=0,i=0;i<t;i++){var n=this.getChildAt(i);n.width>e&&(e=n.width)}return e},x.prototype.handleSizeChanged=function(){u.prototype.handleSizeChanged.call(this),this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0)},x.prototype.handleControllerChanged=function(t){u.prototype.handleControllerChanged.call(this,t),this._selectionController==t&&(this.selectedIndex=t.selectedIndex)},x.prototype.updateSelectionController=function(t){if(null!=this._selectionController&&!this._selectionController.changing&&t<this._selectionController.pageCount){var e=this._selectionController;this._selectionController=null,e.selectedIndex=t,this._selectionController=e}},x.prototype.getSnappingPosition=function(t,e,i){var n,o;return this._virtual?(i||(i=new egret.Point),this._layout==I.ListLayoutType.SingleColumn||this._layout==I.ListLayoutType.FlowHorizontal?(x.pos_param=n=e,o=this.getIndexOnPos1(!1),e=x.pos_param,o<this._virtualItems.length&&n-e>this._virtualItems[o].height/2&&o<this._realNumItems&&(e+=this._virtualItems[o].height+this._lineGap)):(this._layout==I.ListLayoutType.SingleRow||this._layout==I.ListLayoutType.FlowVertical?(x.pos_param=n=t,o=this.getIndexOnPos2(!1)):(x.pos_param=n=t,o=this.getIndexOnPos3(!1)),t=x.pos_param,o<this._virtualItems.length&&n-t>this._virtualItems[o].width/2&&o<this._realNumItems&&(t+=this._virtualItems[o].width+this._columnGap)),i.x=t,i.y=e,i):u.prototype.getSnappingPosition.call(this,t,e,i)},x.prototype.scrollToView=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),this._virtual){if(0==this._numItems)return;if(this.checkVirtualList(),t>=this._virtualItems.length)throw"Invalid child index: "+t+">"+this._virtualItems.length;var n;this._loop&&(t=Math.floor(this._firstIndex/this._numItems)*this._numItems+t);var o,r=this._virtualItems[t],s=0;if(this._layout==I.ListLayoutType.SingleColumn||this._layout==I.ListLayoutType.FlowHorizontal){for(o=0;o<t;o+=this._curLineItemCount)s+=this._virtualItems[o].height+this._lineGap;n=new egret.Rectangle(0,s,this._itemSize.x,r.height)}else if(this._layout==I.ListLayoutType.SingleRow||this._layout==I.ListLayoutType.FlowVertical){for(o=0;o<t;o+=this._curLineItemCount)s+=this._virtualItems[o].width+this._columnGap;n=new egret.Rectangle(s,0,r.width,this._itemSize.y)}else{var a=t/(this._curLineItemCount*this._curLineItemCount2);n=new egret.Rectangle(a*this.viewWidth+t%this._curLineItemCount*(r.width+this._columnGap),t/this._curLineItemCount%this._curLineItemCount2*(r.height+this._lineGap),r.width,r.height)}i=!0,null!=this._scrollPane&&this._scrollPane.scrollToView(n,e,i)}else{var h=this.getChildAt(t);null!=h&&(null!=this._scrollPane?this._scrollPane.scrollToView(h,e,i):null!=this.parent&&null!=this.parent.scrollPane&&this.parent.scrollPane.scrollToView(h,e,i))}},x.prototype.getFirstChildInView=function(){return this.childIndexToItemIndex(u.prototype.getFirstChildInView.call(this))},x.prototype.childIndexToItemIndex=function(t){if(!this._virtual)return t;if(this._layout==I.ListLayoutType.Pagination){for(var e=this._firstIndex;e<this._realNumItems;e++)if(null!=this._virtualItems[e].obj&&--t<0)return e;return t}return t+=this._firstIndex,this._loop&&0<this._numItems&&(t%=this._numItems),t},x.prototype.itemIndexToChildIndex=function(t){if(!this._virtual)return t;if(this._layout==I.ListLayoutType.Pagination)return this.getChildIndex(this._virtualItems[t].obj);if(this._loop&&0<this._numItems){var e=this._firstIndex%this._numItems;t=e<=t?this._firstIndex+(t-e):this._firstIndex+this._numItems+(e-t)}else t-=this._firstIndex;return t},x.prototype.setVirtual=function(){this._setVirtual(!1)},x.prototype.setVirtualAndLoop=function(){this._setVirtual(!0)},x.prototype._setVirtual=function(t){if(!this._virtual){if(null==this._scrollPane)throw"Virtual list must be scrollable!";if(t){if(this._layout==I.ListLayoutType.FlowHorizontal||this._layout==I.ListLayoutType.FlowVertical)throw"Loop list is not supported for FlowHorizontal or FlowVertical layout!";this._scrollPane.bouncebackEffect=!1}if(this._virtual=!0,this._loop=t,this._virtualItems=new Array,this.removeChildrenToPool(),null==this._itemSize){this._itemSize=new egret.Point;var e=this.getFromPool(null);if(null==e)throw"Virtual List must have a default list item resource.";this._itemSize.x=e.width,this._itemSize.y=e.height,this.returnToPool(e)}this._layout==I.ListLayoutType.SingleColumn||this._layout==I.ListLayoutType.FlowHorizontal?(this._scrollPane.scrollStep=this._itemSize.y,this._loop&&(this._scrollPane._loop=2)):(this._scrollPane.scrollStep=this._itemSize.x,this._loop&&(this._scrollPane._loop=1)),this._scrollPane.addEventListener(I.ScrollPane.SCROLL,this.__scrolled,this),this.setVirtualListChangedFlag(!0)}},Object.defineProperty(x.prototype,"numItems",{get:function(){return this._virtual?this._numItems:this._children.length},set:function(t){if(this._virtual){if(null==this.itemRenderer)throw"Set itemRenderer first!";this._numItems=t,this._loop?this._realNumItems=6*this._numItems:this._realNumItems=this._numItems;var e=this._virtualItems.length;if(this._realNumItems>e)for(o=e;o<this._realNumItems;o++){var i=new r;i.width=this._itemSize.x,i.height=this._itemSize.y,this._virtualItems.push(i)}else for(o=this._realNumItems;o<e;o++)this._virtualItems[o].selected=!1;0!=this._virtualListChanged&&I.GTimers.inst.remove(this._refreshVirtualList,this),this._refreshVirtualList()}else{var n=this._children.length;if(n<t)for(var o=n;o<t;o++)null==this.itemProvider?this.addItemFromPool():this.addItemFromPool(this.itemProvider.call(this.callbackThisObj,o));else this.removeChildrenToPool(t,n);if(null!=this.itemRenderer)for(o=0;o<t;o++)this.itemRenderer.call(this.callbackThisObj,o,this.getChildAt(o))}},enumerable:!0,configurable:!0}),x.prototype.refreshVirtualList=function(){this.setVirtualListChangedFlag(!1)},x.prototype.checkVirtualList=function(){0!=this._virtualListChanged&&(this._refreshVirtualList(),I.GTimers.inst.remove(this._refreshVirtualList,this))},x.prototype.setVirtualListChangedFlag=function(t){void 0===t&&(t=!1),t?this._virtualListChanged=2:0==this._virtualListChanged&&(this._virtualListChanged=1),I.GTimers.inst.callLater(this._refreshVirtualList,this)},x.prototype._refreshVirtualList=function(){var t=2==this._virtualListChanged;this._virtualListChanged=0,this._eventLocked=!0,t&&(this._layout==I.ListLayoutType.SingleColumn||this._layout==I.ListLayoutType.SingleRow?this._curLineItemCount=1:this._layout==I.ListLayoutType.FlowHorizontal?0<this._columnCount?this._curLineItemCount=this._columnCount:(this._curLineItemCount=Math.floor((this._scrollPane.viewWidth+this._columnGap)/(this._itemSize.x+this._columnGap)),this._curLineItemCount<=0&&(this._curLineItemCount=1)):this._layout==I.ListLayoutType.FlowVertical?0<this._lineCount?this._curLineItemCount=this._lineCount:(this._curLineItemCount=Math.floor((this._scrollPane.viewHeight+this._lineGap)/(this._itemSize.y+this._lineGap)),this._curLineItemCount<=0&&(this._curLineItemCount=1)):(0<this._columnCount?this._curLineItemCount=this._columnCount:(this._curLineItemCount=Math.floor((this._scrollPane.viewWidth+this._columnGap)/(this._itemSize.x+this._columnGap)),this._curLineItemCount<=0&&(this._curLineItemCount=1)),0<this._lineCount?this._curLineItemCount2=this._lineCount:(this._curLineItemCount2=Math.floor((this._scrollPane.viewHeight+this._lineGap)/(this._itemSize.y+this._lineGap)),this._curLineItemCount2<=0&&(this._curLineItemCount2=1))));var e=0,i=0;if(0<this._realNumItems){var n,o=Math.ceil(this._realNumItems/this._curLineItemCount)*this._curLineItemCount,r=Math.min(this._curLineItemCount,this._realNumItems);if(this._layout==I.ListLayoutType.SingleColumn||this._layout==I.ListLayoutType.FlowHorizontal){for(n=0;n<o;n+=this._curLineItemCount)e+=this._virtualItems[n].height+this._lineGap;if(0<e&&(e-=this._lineGap),this._autoResizeItem)i=this._scrollPane.viewWidth;else{for(n=0;n<r;n++)i+=this._virtualItems[n].width+this._columnGap;0<i&&(i-=this._columnGap)}}else if(this._layout==I.ListLayoutType.SingleRow||this._layout==I.ListLayoutType.FlowVertical){for(n=0;n<o;n+=this._curLineItemCount)i+=this._virtualItems[n].width+this._columnGap;if(0<i&&(i-=this._columnGap),this._autoResizeItem)e=this._scrollPane.viewHeight;else{for(n=0;n<r;n++)e+=this._virtualItems[n].height+this._lineGap;0<e&&(e-=this._lineGap)}}else{i=Math.ceil(o/(this._curLineItemCount*this._curLineItemCount2))*this.viewWidth,e=this.viewHeight}}this.handleAlign(i,e),this._scrollPane.setContentSize(i,e),this._eventLocked=!1,this.handleScroll(!0)},x.prototype.__scrolled=function(t){this.handleScroll(!1)},x.prototype.getIndexOnPos1=function(t){if(this._realNumItems<this._curLineItemCount)return x.pos_param=0;var e,i,n;if(0<this.numChildren&&!t){if(i=this.getChildAt(0).y,x.pos_param<i){for(e=this._firstIndex-this._curLineItemCount;0<=e;e-=this._curLineItemCount)if((i-=this._virtualItems[e].height+this._lineGap)<=x.pos_param)return x.pos_param=i,e;return x.pos_param=0}for(e=this._firstIndex;e<this._realNumItems;e+=this._curLineItemCount){if(n=i+this._virtualItems[e].height+this._lineGap,x.pos_param<n)return x.pos_param=i,e;i=n}return x.pos_param=i,this._realNumItems-this._curLineItemCount}for(e=i=0;e<this._realNumItems;e+=this._curLineItemCount){if(n=i+this._virtualItems[e].height+this._lineGap,x.pos_param<n)return x.pos_param=i,e;i=n}return x.pos_param=i,this._realNumItems-this._curLineItemCount},x.prototype.getIndexOnPos2=function(t){if(this._realNumItems<this._curLineItemCount)return x.pos_param=0;var e,i,n;if(0<this.numChildren&&!t){if(i=this.getChildAt(0).x,x.pos_param<i){for(e=this._firstIndex-this._curLineItemCount;0<=e;e-=this._curLineItemCount)if((i-=this._virtualItems[e].width+this._columnGap)<=x.pos_param)return x.pos_param=i,e;return x.pos_param=0}for(e=this._firstIndex;e<this._realNumItems;e+=this._curLineItemCount){if(n=i+this._virtualItems[e].width+this._columnGap,x.pos_param<n)return x.pos_param=i,e;i=n}return x.pos_param=i,this._realNumItems-this._curLineItemCount}for(e=i=0;e<this._realNumItems;e+=this._curLineItemCount){if(n=i+this._virtualItems[e].width+this._columnGap,x.pos_param<n)return x.pos_param=i,e;i=n}return x.pos_param=i,this._realNumItems-this._curLineItemCount},x.prototype.getIndexOnPos3=function(t){if(this._realNumItems<this._curLineItemCount)return x.pos_param=0;var e,i,n=this.viewWidth,o=Math.floor(x.pos_param/n),r=o*(this._curLineItemCount*this._curLineItemCount2),s=o*n;for(e=0;e<this._curLineItemCount;e++){if(i=s+this._virtualItems[r+e].width+this._columnGap,x.pos_param<i)return x.pos_param=s,r+e;s=i}return x.pos_param=s,r+this._curLineItemCount-1},x.prototype.handleScroll=function(t){this._eventLocked||(this.enterCounter=0,this._layout==I.ListLayoutType.SingleColumn||this._layout==I.ListLayoutType.FlowHorizontal?(this.handleScroll1(t),this.handleArchOrder1()):this._layout==I.ListLayoutType.SingleRow||this._layout==I.ListLayoutType.FlowVertical?(this.handleScroll2(t),this.handleArchOrder2()):this.handleScroll3(t),this._boundsChanged=!1)},x.prototype.handleScroll1=function(t){if(this.enterCounter++,3<this.enterCounter)console.log("FairyGUI: list will never be filled as the item renderer function always returns a different size.");else{var e=this._scrollPane.scrollingPosY,i=e+this._scrollPane.viewHeight,n=i==this._scrollPane.contentHeight;x.pos_param=e;var o=this.getIndexOnPos1(t);if(e=x.pos_param,o!=this._firstIndex||t){var r,s,a,h,l,c=this._firstIndex,_=this._firstIndex=o,u=o<c,p=this.numChildren,d=c+p-1,g=u?d:c,f=0,y=e,m=0,b=0,v=this.defaultItem,w=(this._scrollPane.viewWidth-this._columnGap*(this._curLineItemCount-1))/this._curLineItemCount;for(this.itemInfoVer++;_<this._realNumItems&&(n||y<i);){if((null==(s=this._virtualItems[_]).obj||t)&&(null!=this.itemProvider&&(null==(v=this.itemProvider.call(this.callbackThisObj,_%this._numItems))&&(v=this._defaultItem),v=I.UIPackage.normalizeURL(v)),null!=s.obj&&s.obj.resourceURL!=v&&(s.obj instanceof I.GButton&&(s.selected=s.obj.selected),this.removeChildToPool(s.obj),s.obj=null)),null==s.obj){if(u){for(l=g;c<=l;l--)if(null!=(a=this._virtualItems[l]).obj&&a.updateFlag!=this.itemInfoVer&&a.obj.resourceURL==v){a.obj instanceof I.GButton&&(a.selected=a.obj.selected),s.obj=a.obj,a.obj=null,l==g&&g--;break}}else for(l=g;l<=d;l++)if(null!=(a=this._virtualItems[l]).obj&&a.updateFlag!=this.itemInfoVer&&a.obj.resourceURL==v){a.obj instanceof I.GButton&&(a.selected=a.obj.selected),s.obj=a.obj,a.obj=null,l==g&&g++;break}null!=s.obj?this.setChildIndex(s.obj,u?_-o:this.numChildren):(s.obj=this._pool.getObject(v),u?this.addChildAt(s.obj,_-o):this.addChild(s.obj)),s.obj instanceof I.GButton&&(s.obj.selected=s.selected),r=!0}else r=t;r&&(this._autoResizeItem&&(this._layout==I.ListLayoutType.SingleColumn||0<this._columnCount)&&s.obj.setSize(w,s.obj.height,!0),this.itemRenderer.call(this.callbackThisObj,_%this._numItems,s.obj),_%this._curLineItemCount==0&&(m+=Math.ceil(s.obj.height)-s.height,_==o&&o<c&&(b=Math.ceil(s.obj.height)-s.height)),s.width=Math.ceil(s.obj.width),s.height=Math.ceil(s.obj.height)),s.updateFlag=this.itemInfoVer,s.obj.setXY(f,y),_==o&&(i+=s.height),f+=s.width+this._columnGap,_%this._curLineItemCount==this._curLineItemCount-1&&(f=0,y+=s.height+this._lineGap),_++}for(h=0;h<p;h++)(s=this._virtualItems[c+h]).updateFlag!=this.itemInfoVer&&null!=s.obj&&(s.obj instanceof I.GButton&&(s.selected=s.obj.selected),this.removeChildToPool(s.obj),s.obj=null);0==m&&0==b||this._scrollPane.changeContentSizeOnScrolling(0,m,0,b),0<_&&0<this.numChildren&&this._container.y<0&&this.getChildAt(0).y>-this._container.y&&this.handleScroll1(!1)}}},x.prototype.handleScroll2=function(t){if(this.enterCounter++,3<this.enterCounter)console.log("FairyGUI: list will never be filled as the item renderer function always returns a different size.");else{var e=this._scrollPane.scrollingPosX,i=e+this._scrollPane.viewWidth,n=e==this._scrollPane.contentWidth;x.pos_param=e;var o=this.getIndexOnPos2(t);if(e=x.pos_param,o!=this._firstIndex||t){var r,s,a,h,l,c=this._firstIndex,_=this._firstIndex=o,u=o<c,p=this.numChildren,d=c+p-1,g=u?d:c,f=e,y=0,m=0,b=0,v=this.defaultItem,w=(this._scrollPane.viewHeight-this._lineGap*(this._curLineItemCount-1))/this._curLineItemCount;for(this.itemInfoVer++;_<this._realNumItems&&(n||f<i);){if((null==(s=this._virtualItems[_]).obj||t)&&(null!=this.itemProvider&&(null==(v=this.itemProvider.call(this.callbackThisObj,_%this._numItems))&&(v=this._defaultItem),v=I.UIPackage.normalizeURL(v)),null!=s.obj&&s.obj.resourceURL!=v&&(s.obj instanceof I.GButton&&(s.selected=s.obj.selected),this.removeChildToPool(s.obj),s.obj=null)),null==s.obj){if(u){for(l=g;c<=l;l--)if(null!=(a=this._virtualItems[l]).obj&&a.updateFlag!=this.itemInfoVer&&a.obj.resourceURL==v){a.obj instanceof I.GButton&&(a.selected=a.obj.selected),s.obj=a.obj,a.obj=null,l==g&&g--;break}}else for(l=g;l<=d;l++)if(null!=(a=this._virtualItems[l]).obj&&a.updateFlag!=this.itemInfoVer&&a.obj.resourceURL==v){a.obj instanceof I.GButton&&(a.selected=a.obj.selected),s.obj=a.obj,a.obj=null,l==g&&g++;break}null!=s.obj?this.setChildIndex(s.obj,u?_-o:this.numChildren):(s.obj=this._pool.getObject(v),u?this.addChildAt(s.obj,_-o):this.addChild(s.obj)),s.obj instanceof I.GButton&&(s.obj.selected=s.selected),r=!0}else r=t;r&&(this._autoResizeItem&&(this._layout==I.ListLayoutType.SingleRow||0<this._lineCount)&&s.obj.setSize(s.obj.width,w,!0),this.itemRenderer.call(this.callbackThisObj,_%this._numItems,s.obj),_%this._curLineItemCount==0&&(m+=Math.ceil(s.obj.width)-s.width,_==o&&o<c&&(b=Math.ceil(s.obj.width)-s.width)),s.width=Math.ceil(s.obj.width),s.height=Math.ceil(s.obj.height)),s.updateFlag=this.itemInfoVer,s.obj.setXY(f,y),_==o&&(i+=s.width),y+=s.height+this._lineGap,_%this._curLineItemCount==this._curLineItemCount-1&&(y=0,f+=s.width+this._columnGap),_++}for(h=0;h<p;h++)(s=this._virtualItems[c+h]).updateFlag!=this.itemInfoVer&&null!=s.obj&&(s.obj instanceof I.GButton&&(s.selected=s.obj.selected),this.removeChildToPool(s.obj),s.obj=null);0==m&&0==b||this._scrollPane.changeContentSizeOnScrolling(m,0,b,0),0<_&&0<this.numChildren&&this._container.x<0&&this.getChildAt(0).x>-this._container.x&&this.handleScroll2(!1)}}},x.prototype.handleScroll3=function(t){var e=this._scrollPane.scrollingPosX;x.pos_param=e;var i=this.getIndexOnPos3(t);if(e=x.pos_param,i!=this._firstIndex||t){var n=this._firstIndex;this._firstIndex=i;var o,r,s,a,h,l=n,c=this._virtualItems.length,_=this._curLineItemCount*this._curLineItemCount2,u=i%this._curLineItemCount,p=this.viewWidth,d=Math.floor(i/_)*_,g=d+2*_,f=this._defaultItem,y=(this._scrollPane.viewWidth-this._columnGap*(this._curLineItemCount-1))/this._curLineItemCount,m=(this._scrollPane.viewHeight-this._lineGap*(this._curLineItemCount2-1))/this._curLineItemCount2;for(this.itemInfoVer++,r=d;r<g;r++)if(!(r>=this._realNumItems)){if(h=r%this._curLineItemCount,r-d<_){if(h<u)continue}else if(u<h)continue;(s=this._virtualItems[r]).updateFlag=this.itemInfoVer}var b=null,v=0;for(r=d;r<g;r++)if(!(r>=this._realNumItems)&&(s=this._virtualItems[r]).updateFlag==this.itemInfoVer){if(null==s.obj){for(;l<c;){if(null!=(a=this._virtualItems[l]).obj&&a.updateFlag!=this.itemInfoVer){a.obj instanceof I.GButton&&(a.selected=a.obj.selected),s.obj=a.obj,a.obj=null;break}l++}-1==v&&(v=this.getChildIndex(b)+1),null==s.obj?(null!=this.itemProvider&&(null==(f=this.itemProvider(r%this._numItems))&&(f=this._defaultItem),f=I.UIPackage.normalizeURL(f)),s.obj=this._pool.getObject(f),this.addChildAt(s.obj,v)):v=this.setChildIndexBefore(s.obj,v),v++,s.obj instanceof I.GButton&&(s.obj.selected=s.selected),o=!0}else o=t,v=-1,b=s.obj;o&&(this._autoResizeItem&&(this._curLineItemCount==this._columnCount&&this._curLineItemCount2==this._lineCount?s.obj.setSize(y,m,!0):this._curLineItemCount==this._columnCount?s.obj.setSize(y,s.obj.height,!0):this._curLineItemCount2==this._lineCount&&s.obj.setSize(s.obj.width,m,!0)),this.itemRenderer.call(this.callbackThisObj,r%this._numItems,s.obj),s.width=Math.ceil(s.obj.width),s.height=Math.ceil(s.obj.height))}var w=d/_*p,C=w,S=0,T=0;for(r=d;r<g;r++)r>=this._realNumItems||((s=this._virtualItems[r]).updateFlag==this.itemInfoVer&&s.obj.setXY(C,S),s.height>T&&(T=s.height),r%this._curLineItemCount==this._curLineItemCount-1?(C=w,S+=T+this._lineGap,T=0,r==d+_-1&&(C=w+=p,S=0)):C+=s.width+this._columnGap);for(r=l;r<c;r++)(s=this._virtualItems[r]).updateFlag!=this.itemInfoVer&&null!=s.obj&&(s.obj instanceof I.GButton&&(s.selected=s.obj.selected),this.removeChildToPool(s.obj),s.obj=null)}},x.prototype.handleArchOrder1=function(){if(this._childrenRenderOrder==I.ChildrenRenderOrder.Arch){for(var t=this._scrollPane.posY+this.viewHeight/2,e=Number.POSITIVE_INFINITY,i=0,n=0,o=this.numChildren,r=0;r<o;r++){var s=this.getChildAt(r);this.foldInvisibleItems&&!s.visible||(i=Math.abs(t-s.y-s.height/2))<e&&(e=i,n=r)}this.apexIndex=n}},x.prototype.handleArchOrder2=function(){if(this._childrenRenderOrder==I.ChildrenRenderOrder.Arch){for(var t=this._scrollPane.posX+this.viewWidth/2,e=Number.POSITIVE_INFINITY,i=0,n=0,o=this.numChildren,r=0;r<o;r++){var s=this.getChildAt(r);this.foldInvisibleItems&&!s.visible||(i=Math.abs(t-s.x-s.width/2))<e&&(e=i,n=r)}this.apexIndex=n}},x.prototype.handleAlign=function(t,e){var i=0,n=0;e<this.viewHeight&&(this._verticalAlign==I.VertAlignType.Middle?n=Math.floor((this.viewHeight-e)/2):this._verticalAlign==I.VertAlignType.Bottom&&(n=this.viewHeight-e)),t<this.viewWidth&&(this._align==I.AlignType.Center?i=Math.floor((this.viewWidth-t)/2):this._align==I.AlignType.Right&&(i=this.viewWidth-t)),i==this._alignOffset.x&&n==this._alignOffset.y||(this._alignOffset.setTo(i,n),null!=this._scrollPane?this._scrollPane.adjustMaskContainer():(this._container.x=this._margin.left+this._alignOffset.x,this._container.y=this._margin.top+this._alignOffset.y))},x.prototype.updateBounds=function(){if(!this._virtual){var t,e,i=0,n=0,o=0,r=0,s=0,a=0,h=0,l=0,c=0,_=this._children.length,u=this.viewWidth,p=this.viewHeight,d=0,g=0,f=0;if(this._layout==I.ListLayoutType.SingleColumn){for(t=0;t<_;t++)e=this.getChildAt(t),this.foldInvisibleItems&&!e.visible||(0!=n&&(n+=this._lineGap),e.y=n,this._autoResizeItem&&e.setSize(u,e.height,!0),n+=Math.ceil(e.height),e.width>o&&(o=e.width));s=Math.ceil(o),a=n}else if(this._layout==I.ListLayoutType.SingleRow){for(t=0;t<_;t++)e=this.getChildAt(t),this.foldInvisibleItems&&!e.visible||(0!=i&&(i+=this._columnGap),e.x=i,this._autoResizeItem&&e.setSize(e.width,p,!0),i+=Math.ceil(e.width),e.height>r&&(r=e.height));s=i,a=Math.ceil(r)}else if(this._layout==I.ListLayoutType.FlowHorizontal)if(this._autoResizeItem&&0<this._columnCount){for(t=0;t<_;t++)if(e=this.getChildAt(t),(!this.foldInvisibleItems||e.visible)&&(d+=e.sourceWidth,++h==this._columnCount||t==_-1)){for(f=(u-d-(h-1)*this._columnGap)/d,i=0,h=g;h<=t;h++)e=this.getChildAt(h),this.foldInvisibleItems&&!e.visible||(e.setXY(i,n),h<t?(e.setSize(e.sourceWidth+Math.round(e.sourceWidth*f),e.height,!0),i+=Math.ceil(e.width)+this._columnGap):e.setSize(u-i,e.height,!0),e.height>r&&(r=e.height));n+=Math.ceil(r)+this._lineGap,g=t+1,d=h=r=0}a=n+Math.ceil(r),s=u}else{for(t=0;t<_;t++)e=this.getChildAt(t),this.foldInvisibleItems&&!e.visible||(0!=i&&(i+=this._columnGap),(0!=this._columnCount&&h>=this._columnCount||0==this._columnCount&&i+e.width>u&&0!=r)&&(i=0,n+=Math.ceil(r)+this._lineGap,h=r=0),e.setXY(i,n),o<(i+=Math.ceil(e.width))&&(o=i),e.height>r&&(r=e.height),h++);a=n+Math.ceil(r),s=Math.ceil(o)}else if(this._layout==I.ListLayoutType.FlowVertical)if(this._autoResizeItem&&0<this._lineCount){for(t=0;t<_;t++)if(e=this.getChildAt(t),(!this.foldInvisibleItems||e.visible)&&(d+=e.sourceHeight,++h==this._lineCount||t==_-1)){for(f=(p-d-(h-1)*this._lineGap)/d,n=0,h=g;h<=t;h++)e=this.getChildAt(h),this.foldInvisibleItems&&!e.visible||(e.setXY(i,n),h<t?(e.setSize(e.width,e.sourceHeight+Math.round(e.sourceHeight*f),!0),n+=Math.ceil(e.height)+this._lineGap):e.setSize(e.width,p-n,!0),e.width>o&&(o=e.width));i+=Math.ceil(o)+this._columnGap,g=t+1,d=h=o=0}s=i+Math.ceil(o),a=p}else{for(t=0;t<_;t++)e=this.getChildAt(t),this.foldInvisibleItems&&!e.visible||(0!=n&&(n+=this._lineGap),(0!=this._lineCount&&h>=this._lineCount||0==this._lineCount&&n+e.height>p&&0!=o)&&(n=0,i+=Math.ceil(o)+this._columnGap,h=o=0),e.setXY(i,n),r<(n+=Math.ceil(e.height))&&(r=n),e.width>o&&(o=e.width),h++);s=i+Math.ceil(o),a=Math.ceil(r)}else{var y;if(this._autoResizeItem&&0<this._lineCount&&(y=Math.floor((p-(this._lineCount-1)*this._lineGap)/this._lineCount)),this._autoResizeItem&&0<this._columnCount){for(t=0;t<_;t++)if(e=this.getChildAt(t),(!this.foldInvisibleItems||e.visible)&&(0==h&&(0!=this._lineCount&&c>=this._lineCount||0==this._lineCount&&n+(0<this._lineCount?y:e.height)>p)&&(l++,c=n=0),d+=e.sourceWidth,++h==this._columnCount||t==_-1)){for(f=(u-d-(h-1)*this._columnGap)/d,i=0,h=g;h<=t;h++)e=this.getChildAt(h),this.foldInvisibleItems&&!e.visible||(e.setXY(l*u+i,n),h<t?(e.setSize(e.sourceWidth+Math.round(e.sourceWidth*f),0<this._lineCount?y:e.height,!0),i+=Math.ceil(e.width)+this._columnGap):e.setSize(u-i,0<this._lineCount?y:e.height,!0),e.height>r&&(r=e.height));n+=Math.ceil(r)+this._lineGap,g=t+1,d=h=r=0,c++}}else for(t=0;t<_;t++)e=this.getChildAt(t),this.foldInvisibleItems&&!e.visible||(0!=i&&(i+=this._columnGap),this._autoResizeItem&&0<this._lineCount&&e.setSize(e.width,y,!0),(0!=this._columnCount&&h>=this._columnCount||0==this._columnCount&&i+e.width>u&&0!=r)&&(i=0,n+=Math.ceil(r)+this._lineGap,c++,((h=r=0)!=this._lineCount&&c>=this._lineCount||0==this._lineCount&&n+e.height>p&&0!=o)&&(l++,c=n=0)),e.setXY(l*u+i,n),o<(i+=Math.ceil(e.width))&&(o=i),e.height>r&&(r=e.height),h++);a=0<l?p:n+Math.ceil(r),s=(l+1)*u}this.handleAlign(s,a),this.setBounds(0,0,s,a)}},x.prototype.setup_beforeAdd=function(t,e){var i,n,o,r,s;u.prototype.setup_beforeAdd.call(this,t,e),t.seek(e,5),this._layout=t.readByte(),this._selectionMode=t.readByte(),this._align=t.readByte(),this._verticalAlign=t.readByte(),this._lineGap=t.readShort(),this._columnGap=t.readShort(),this._lineCount=t.readShort(),this._columnCount=t.readShort(),this._autoResizeItem=t.readBool(),this._childrenRenderOrder=t.readByte(),this._apexIndex=t.readShort(),t.readBool()&&(this._margin.top=t.readInt(),this._margin.bottom=t.readInt(),this._margin.left=t.readInt(),this._margin.right=t.readInt());var a=t.readByte();if(a==I.OverflowType.Scroll){var h=t.position;t.seek(e,7),this.setupScroll(t),t.position=h}else this.setupOverflow(a);t.readBool()&&t.skip(8),t.seek(e,8),this._defaultItem=t.readS();var l=t.readShort();for(i=0;i<l;i++)if(r=t.readShort(),r+=t.position,null!=(s=t.readS())||(s=this.defaultItem)){var c=this.getFromPool(s);if(null!=c&&(this.addChild(c),null!=(s=t.readS())&&(c.text=s),null!=(s=t.readS())&&c instanceof I.GButton&&(c.selectedTitle=s),null!=(s=t.readS())&&(c.icon=s),null!=(s=t.readS())&&c instanceof I.GButton&&(c.selectedIcon=s),null!=(s=t.readS())&&(c.name=s),c instanceof I.GComponent))for(o=t.readShort(),n=0;n<o;n++){var _=c.getController(t.readS());s=t.readS(),null!=_&&(_.selectedPageId=s)}t.position=r}else t.position=r},x.prototype.setup_afterAdd=function(t,e){u.prototype.setup_afterAdd.call(this,t,e),t.seek(e,6);var i=t.readShort();-1!=i&&(this._selectionController=this.parent.getControllerAt(i))},x}(I.GComponent);I.GList=t,__reflect(t.prototype,"fairygui.GList");var r=function(){this.width=0,this.height=0,this.updateFlag=0,this.selected=!1};__reflect(r.prototype,"ItemInfo")}(fairygui||(fairygui={})),function(t){var e=function(s){function t(){var t=s.call(this)||this;return t.touchEnabled=!0,t.touchChildren=!0,t}return __extends(t,s),Object.defineProperty(t.prototype,"hitArea",{get:function(){return this._hitArea},set:function(t){this._hitArea&&t?(this._hitArea.x=t.x,this._hitArea.y=t.y,this._hitArea.width=t.width,this._hitArea.height=t.height):this._hitArea=t?t.clone():null},enumerable:!0,configurable:!0}),t.prototype.$hitTest=function(t,e){var i=s.prototype.$hitTest.call(this,t,e);if(i==this){if(!this.touchEnabled||null==this._hitArea)return null}else if(null==i&&this.touchEnabled&&null!=this._hitArea){var n=this.$getInvertedConcatenatedMatrix(),o=n.a*t+n.c*e+n.tx,r=n.b*t+n.d*e+n.ty;this._hitArea.contains(o,r)&&(i=this)}return i},t}(egret.Sprite);t.UISprite=e,__reflect(e.prototype,"fairygui.UISprite")}(fairygui||(fairygui={})),function(o){var t=function(i){function t(){var t=i.call(this)||this;return t._frame=0,t._color=0,t._contentSourceWidth=0,t._contentSourceHeight=0,t._contentWidth=0,t._contentHeight=0,t._playing=!0,t._url="",t._fill=o.LoaderFillType.None,t._align=o.AlignType.Left,t._verticalAlign=o.VertAlignType.Top,t._showErrorSign=!0,t._color=16777215,t._gearAnimation=new o.GearAnimation(t),t._gearColor=new o.GearColor(t),t}return __extends(t,i),t.prototype.createDisplayObject=function(){this._container=new o.UIContainer,(this._container.$owner=this)._container.hitArea=new egret.Rectangle,this.setDisplayObject(this._container)},t.prototype.dispose=function(){if(null==this._contentItem&&this._content instanceof egret.Bitmap){var t=this._content.texture;null!=t&&this.freeExternal(t)}null!=this._content2&&this._content2.dispose(),i.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"url",{get:function(){return this._url},set:function(t){this._url!=t&&(this._url=t,this.loadContent(),this.updateGear(7))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return this._url},set:function(t){this.url=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!=t&&(this._align=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){this._fill!=t&&(this._fill=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shrinkOnly",{get:function(){return this._shrinkOnly},set:function(t){this._shrinkOnly!=t&&(this._shrinkOnly=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoSize",{get:function(){return this._autoSize},set:function(t){this._autoSize!=t&&(this._autoSize=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},set:function(t){this._playing!=t&&(this._playing=t,this._content instanceof o.MovieClip&&(this._content.playing=t),this.updateGear(5))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame!=t&&(this._frame=t,this._content instanceof o.MovieClip&&(this._content.frame=t),this.updateGear(5))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeScale",{get:function(){return this._content instanceof o.MovieClip?this._content.timeScale:1},set:function(t){this._content instanceof o.MovieClip&&(this._content.timeScale=t)},enumerable:!0,configurable:!0}),t.prototype.advance=function(t){this._content instanceof o.MovieClip&&this._content.advance(t)},Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(t){this._color!=t&&(this._color=t,this.updateGear(4),this.applyColor())},enumerable:!0,configurable:!0}),t.prototype.applyColor=function(){},Object.defineProperty(t.prototype,"showErrorSign",{get:function(){return this._showErrorSign},set:function(t){this._showErrorSign=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this._content2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._content instanceof egret.Bitmap?this._content.texture:null},set:function(t){this.url=null,this.switchToMovieMode(!1),null!=(this._content.texture=t)?(this._contentSourceWidth=t.textureWidth,this._contentSourceHeight=t.textureHeight):this._contentSourceWidth=this._contentHeight=0,this.updateLayout()},enumerable:!0,configurable:!0}),t.prototype.loadContent=function(){this.clearContent(),this._url&&(o.ToolSet.startsWith(this._url,"ui://")?this.loadFromPackage(this._url):this.loadExternal())},t.prototype.loadFromPackage=function(t){if(this._contentItem=o.UIPackage.getItemByURL(t),null!=this._contentItem)if(this._contentItem.load(),this._autoSize&&this.setSize(this._contentItem.width,this._contentItem.height),this._contentItem.type==o.PackageItemType.Image)if(null==this._contentItem.texture)this.setErrorState();else{this.switchToMovieMode(!1);var e=this._content;e.texture=this._contentItem.texture,e.scale9Grid=this._contentItem.scale9Grid,this._contentItem.scaleByTile?e.fillMode=egret.BitmapFillMode.REPEAT:e.fillMode=egret.BitmapFillMode.SCALE,this._contentSourceWidth=this._contentItem.width,this._contentSourceHeight=this._contentItem.height,this.updateLayout()}else if(this._contentItem.type==o.PackageItemType.MovieClip){this.switchToMovieMode(!0),this._contentSourceWidth=this._contentItem.width,this._contentSourceHeight=this._contentItem.height;var i=this._content;i.interval=this._contentItem.interval,i.swing=this._contentItem.swing,i.repeatDelay=this._contentItem.repeatDelay,i.frames=this._contentItem.frames,this.updateLayout()}else if(this._contentItem.type==o.PackageItemType.Component){var n=o.UIPackage.createObjectFromURL(t);n?n instanceof o.GComponent?(this._content2=n.asCom,this._container.addChild(this._content2.displayObject),this._contentSourceWidth=this._contentItem.width,this._contentSourceHeight=this._contentItem.height,this.updateLayout()):(n.dispose(),this.setErrorState()):this.setErrorState()}else this.setErrorState();else this.setErrorState()},t.prototype.switchToMovieMode=function(t){t?this._content instanceof o.MovieClip||(this._content=new o.MovieClip):this._content instanceof egret.Bitmap||(this._content=new egret.Bitmap),this._container.addChild(this._content)},t.prototype.loadExternal=function(){RES.getResAsync(this._url,this.__getResCompleted,this)},t.prototype.freeExternal=function(t){},t.prototype.onExternalLoadSuccess=function(t){this._content instanceof egret.Bitmap||(this._content=new egret.Bitmap),this._container.addChild(this._content),this._content.texture=t,this._content.scale9Grid=null,this._content.fillMode=egret.BitmapFillMode.SCALE,this._contentSourceWidth=t.textureWidth,this._contentSourceHeight=t.textureHeight,this.updateLayout()},t.prototype.onExternalLoadFailed=function(){this.setErrorState()},t.prototype.__getResCompleted=function(t,e){t instanceof egret.Texture?this.onExternalLoadSuccess(t):this.onExternalLoadFailed()},t.prototype.setErrorState=function(){this._showErrorSign&&(null==this._errorSign&&null!=o.UIConfig.loaderErrorSign&&(this._errorSign=t._errorSignPool.getObject(o.UIConfig.loaderErrorSign)),null!=this._errorSign&&(this._errorSign.setSize(this.width,this.height),this._container.addChild(this._errorSign.displayObject)))},t.prototype.clearErrorState=function(){null!=this._errorSign&&(this._container.removeChild(this._errorSign.displayObject),t._errorSignPool.returnObject(this._errorSign),this._errorSign=null)},t.prototype.updateLayout=function(){if(null!=this._content2||null!=this._content)if(this._contentWidth=this._contentSourceWidth,this._contentHeight=this._contentSourceHeight,this._autoSize&&(this._updatingLayout=!0,0==this._contentWidth&&(this._contentWidth=50),0==this._contentHeight&&(this._contentHeight=30),this.setSize(this._contentWidth,this._contentHeight),this._updatingLayout=!1,this._contentWidth==this._width&&this._contentHeight==this._height))null!=this._content2?(this._content2.setXY(0,0),this._content2.setScale(1,1)):(this._content.x=0,this._content.y=0,this._content.scaleX=1,this._content.scaleY=1);else{var t,e,i=1,n=1;this._fill!=o.LoaderFillType.None&&(i=this.width/this._contentSourceWidth,n=this.height/this._contentSourceHeight,1==i&&1==n||(this._fill==o.LoaderFillType.ScaleMatchHeight?i=n:this._fill==o.LoaderFillType.ScaleMatchWidth?n=i:this._fill==o.LoaderFillType.Scale?n<i?i=n:n=i:this._fill==o.LoaderFillType.ScaleNoBorder&&(n<i?n=i:i=n),this._shrinkOnly&&(1<i&&(i=1),1<n&&(n=1)),this._contentWidth=this._contentSourceWidth*i,this._contentHeight=this._contentSourceHeight*n)),null!=this._content2?this._content2.setScale(i,n):this._content instanceof egret.Bitmap?(this._content.width=this._contentWidth,this._content.height=this._contentHeight):(this._content.scaleX=i,this._content.scaleY=n),t=this._align==o.AlignType.Center?Math.floor((this.width-this._contentWidth)/2):this._align==o.AlignType.Right?this.width-this._contentWidth:0,e=this._verticalAlign==o.VertAlignType.Middle?Math.floor((this.height-this._contentHeight)/2):this._verticalAlign==o.VertAlignType.Bottom?this.height-this._contentHeight:0,null!=this._content2?this._content2.setXY(t,e):(this._content.x=t,this._content.y=e)}else this._autoSize&&(this._updatingLayout=!0,this.setSize(50,30),this._updatingLayout=!1)},t.prototype.clearContent=function(){if(this.clearErrorState(),null!=this._content&&null!=this._content.parent&&this._container.removeChild(this._content),null==this._contentItem&&this._content instanceof egret.Bitmap){var t=this._content.texture;null!=t&&this.freeExternal(t)}null!=this._content2&&(this._container.removeChild(this._content2.displayObject),this._content2.dispose(),this._content2=null),this._contentItem=null},t.prototype.handleSizeChanged=function(){this._updatingLayout||this.updateLayout(),this._container.hitArea.setTo(0,0,this.width,this.height)},t.prototype.setup_beforeAdd=function(t,e){i.prototype.setup_beforeAdd.call(this,t,e),t.seek(e,5),this._url=t.readS(),this._align=t.readByte(),this._verticalAlign=t.readByte(),this._fill=t.readByte(),this._shrinkOnly=t.readBool(),this._autoSize=t.readBool(),this._showErrorSign=t.readBool(),this._playing=t.readBool(),this._frame=t.readInt(),t.readBool()&&(this.color=t.readColor()),0!=t.readByte()&&t.skip(6),this._url&&this.loadContent()},t._errorSignPool=new o.GObjectPool,t}(o.GObject);o.GLoader=t,__reflect(t.prototype,"fairygui.GLoader")}(fairygui||(fairygui={})),function(e){var t=function(i){function t(){var t=i.call(this)||this;return t._sizeImplType=1,t}return __extends(t,i),Object.defineProperty(t.prototype,"color",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),t.prototype.createDisplayObject=function(){this._movieClip=new e.MovieClip,(this._movieClip.$owner=this)._movieClip.touchEnabled=!1,this.setDisplayObject(this._movieClip)},Object.defineProperty(t.prototype,"playing",{get:function(){return this._movieClip.playing},set:function(t){this._movieClip.playing!=t&&(this._movieClip.playing=t,this.updateGear(5))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._movieClip.frame},set:function(t){this._movieClip.frame!=t&&(this._movieClip.frame=t,this.updateGear(5))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeScale",{get:function(){return this._movieClip.timeScale},set:function(t){this._movieClip.timeScale=t},enumerable:!0,configurable:!0}),t.prototype.rewind=function(){this._movieClip.rewind()},t.prototype.syncStatus=function(t){this._movieClip.syncStatus(t._movieClip)},t.prototype.advance=function(t){this._movieClip.advance(t)},t.prototype.setPlaySettings=function(t,e,i,n,o,r){void 0===t&&(t=0),void 0===e&&(e=-1),void 0===i&&(i=0),void 0===n&&(n=-1),void 0===o&&(o=null),void 0===r&&(r=null),this._movieClip.setPlaySettings(t,e,i,n,o,r)},t.prototype.constructFromResource=function(){this.sourceWidth=this.packageItem.width,this.sourceHeight=this.packageItem.height,this.initWidth=this.sourceWidth,this.initHeight=this.sourceHeight,this.setSize(this.sourceWidth,this.sourceHeight),this.packageItem.load(),this._movieClip.interval=this.packageItem.interval,this._movieClip.swing=this.packageItem.swing,this._movieClip.repeatDelay=this.packageItem.repeatDelay,this._movieClip.frames=this.packageItem.frames,this._movieClip.smoothing=this.packageItem.smoothing},t.prototype.setup_beforeAdd=function(t,e){i.prototype.setup_beforeAdd.call(this,t,e),t.seek(e,5),t.readBool()&&(this.color=t.readColor()),t.readByte(),this._movieClip.frame=t.readInt(),this._movieClip.playing=t.readBool()},t}(e.GObject);e.GMovieClip=t,__reflect(t.prototype,"fairygui.GMovieClip")}(fairygui||(fairygui={})),function(o){var t=function(i){function t(){var t=i.call(this)||this;return t._max=0,t._value=0,t._barMaxWidth=0,t._barMaxHeight=0,t._barMaxWidthDelta=0,t._barMaxHeightDelta=0,t._barStartX=0,t._barStartY=0,t._tweening=!1,t._titleType=o.ProgressTitleType.Percent,t._value=50,t._max=100,t}return __extends(t,i),Object.defineProperty(t.prototype,"titleType",{get:function(){return this._titleType},set:function(t){this._titleType!=t&&(this._titleType=t,this.update(this._value))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(t){this._max!=t&&(this._max=t,this.update(this._value))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){this._tweening&&(o.GTween.kill(this,!0,this.update),this._tweening=!1),this._value!=t&&(this._value=t,this.update(this._value))},enumerable:!0,configurable:!0}),t.prototype.tweenValue=function(t,e){if(this._value!=t){this._tweening&&(o.GTween.kill(this,!1,this.update),this._tweening=!1);var i=this._value;return this._value=t,this._tweening=!0,o.GTween.to(i,this._value,e).setTarget(this,this.update).setEase(o.EaseType.Linear).onComplete(function(){this._tweening=!1},this)}return null},t.prototype.update=function(t){var e=0!=this._max?Math.min(t/this._max,1):0;if(this._titleObject)switch(this._titleType){case o.ProgressTitleType.Percent:this._titleObject.text=Math.round(100*e)+"%";break;case o.ProgressTitleType.ValueAndMax:this._titleObject.text=Math.round(t)+"/"+Math.round(this._max);break;case o.ProgressTitleType.Value:this._titleObject.text=""+Math.round(t);break;case o.ProgressTitleType.Max:this._titleObject.text=""+Math.round(this._max)}var i=this.width-this._barMaxWidthDelta,n=this.height-this._barMaxHeightDelta;this._reverse?(this._barObjectH&&(this._barObjectH.width=Math.round(i*e),this._barObjectH.x=this._barStartX+(i-this._barObjectH.width)),this._barObjectV&&(this._barObjectV.height=Math.round(n*e),this._barObjectV.y=this._barStartY+(n-this._barObjectV.height))):(this._barObjectH&&(this._barObjectH.width=Math.round(i*e)),this._barObjectV&&(this._barObjectV.height=Math.round(n*e))),this._aniObject instanceof o.GMovieClip&&(this._aniObject.frame=Math.round(100*e))},t.prototype.constructExtension=function(t){t.seek(0,6),this._titleType=t.readByte(),this._reverse=t.readBool(),this._titleObject=this.getChild("title"),this._barObjectH=this.getChild("bar"),this._barObjectV=this.getChild("bar_v"),this._aniObject=this.getChild("ani"),this._barObjectH&&(this._barMaxWidth=this._barObjectH.width,this._barMaxWidthDelta=this.width-this._barMaxWidth,this._barStartX=this._barObjectH.x),this._barObjectV&&(this._barMaxHeight=this._barObjectV.height,this._barMaxHeightDelta=this.height-this._barMaxHeight,this._barStartY=this._barObjectV.y)},t.prototype.handleSizeChanged=function(){i.prototype.handleSizeChanged.call(this),this._barObjectH&&(this._barMaxWidth=this.width-this._barMaxWidthDelta),this._barObjectV&&(this._barMaxHeight=this.height-this._barMaxHeightDelta),this._underConstruct||this.update(this._value)},t.prototype.setup_afterAdd=function(t,e){i.prototype.setup_afterAdd.call(this,t,e),t.seek(e,6)&&t.readByte()==this.packageItem.objectType&&(this._value=t.readInt(),this._max=t.readInt()),this.update(this._value)},t.prototype.dispose=function(){this._tweening&&o.GTween.kill(this),i.prototype.dispose.call(this)},t}(o.GComponent);o.GProgressBar=t,__reflect(t.prototype,"fairygui.GProgressBar")}(fairygui||(fairygui={})),function(t){var e=function(){this.size=0,this.glyphs={}};(fairygui||(fairygui={})).BitmapFont=e,__reflect(e.prototype,"fairygui.BitmapFont")}(),function(i){var t=function(e){function t(){var t=e.call(this)||this;return t._textField.touchEnabled=!0,t}return __extends(t,e),t.prototype.updateTextFieldText=function(){var t=this._text;null!=this._templateVars&&(t=this.parseTemplate(t)),this._ubbEnabled?this._textField.textFlow=(new egret.HtmlTextParser).parser(i.ToolSet.parseUBB(t)):this._textField.textFlow=(new egret.HtmlTextParser).parser(t)},t}(i.GTextField);i.GRichTextField=t,__reflect(t.prototype,"fairygui.GRichTextField")}(fairygui||(fairygui={})),function(o){var t=function(e){function _(){var t=e.call(this)||this;return null==_._inst&&(_._inst=t),t.opaque=!1,t._volumeScale=1,t._popupStack=new Array,t._justClosedPopups=new Array,t.displayObject.addEventListener(egret.Event.ADDED_TO_STAGE,t.__addedToStage,t),t}return __extends(_,e),Object.defineProperty(_,"inst",{get:function(){return null==_._inst&&new _,_._inst},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"nativeStage",{get:function(){return this._nativeStage},enumerable:!0,configurable:!0}),_.prototype.showWindow=function(t){this.addChild(t),t.requestFocus(),t.x>this.width?t.x=this.width-t.width:t.x+t.width<0&&(t.x=0),t.y>this.height?t.y=this.height-t.height:t.y+t.height<0&&(t.y=0),this.adjustModalLayer()},_.prototype.hideWindow=function(t){t.hide()},_.prototype.hideWindowImmediately=function(t){t.parent==this&&this.removeChild(t),this.adjustModalLayer()},_.prototype.bringToFront=function(t){var e,i=this.numChildren;for(e=null==this._modalLayer.parent||t.modal?i-1:this.getChildIndex(this._modalLayer)-1;0<=e;e--){var n=this.getChildAt(e);if(n==t)return;if(n instanceof o.Window)break}0<=e&&this.setChildIndex(t,e)},_.prototype.showModalWait=function(t){void 0===t&&(t=null),null!=o.UIConfig.globalModalWaiting&&(null==this._modalWaitPane&&(this._modalWaitPane=o.UIPackage.createObjectFromURL(o.UIConfig.globalModalWaiting)),this._modalWaitPane.setSize(this.width,this.height),this._modalWaitPane.addRelation(this,o.RelationType.Size),this.addChild(this._modalWaitPane),this._modalWaitPane.text=t)},_.prototype.closeModalWait=function(){null!=this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.removeChild(this._modalWaitPane)},_.prototype.closeAllExceptModals=function(){for(var t=this._children.slice(),e=t.length,i=0;i<e;i++){var n=t[i];n instanceof o.Window&&!n.modal&&n.hide()}},_.prototype.closeAllWindows=function(){for(var t=this._children.slice(),e=t.length,i=0;i<e;i++){var n=t[i];n instanceof o.Window&&n.hide()}},_.prototype.getTopWindow=function(){for(var t=this.numChildren-1;0<=t;t--){var e=this.getChildAt(t);if(e instanceof o.Window)return e}return null},Object.defineProperty(_.prototype,"modalLayer",{get:function(){return this._modalLayer},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"hasModalWindow",{get:function(){return null!=this._modalLayer.parent},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"modalWaiting",{get:function(){return this._modalWaitPane&&this._modalWaitPane.inContainer},enumerable:!0,configurable:!0}),_.prototype.showPopup=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=null),0<this._popupStack.length){var n=this._popupStack.indexOf(t);if(-1!=n)for(var o=this._popupStack.length-1;n<=o;o--)this.removeChild(this._popupStack.pop())}if(this._popupStack.push(t),null!=e)for(var r=e;null!=r;){if(r.parent==this){t.sortingOrder<r.sortingOrder&&(t.sortingOrder=r.sortingOrder);break}r=r.parent}var s;this.addChild(t),this.adjustModalLayer();var a,h,l=0,c=0;e?(s=e.localToRoot(),l=e.width,c=e.height):s=this.globalToLocal(_.mouseX,_.mouseY),(a=s.x)+t.width>this.width&&(a=a+l-t.width),h=s.y+c,(null==i&&h+t.height>this.height||0==i)&&(h=s.y-t.height-1)<0&&(h=0,a+=l/2),t.x=a,t.y=h},_.prototype.togglePopup=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),-1==this._justClosedPopups.indexOf(t)&&this.showPopup(t,e,i)},_.prototype.hidePopup=function(t){if(void 0===t&&(t=null),null!=t){var e=this._popupStack.indexOf(t);if(-1!=e)for(var i=this._popupStack.length-1;e<=i;i--)this.closePopup(this._popupStack.pop())}else{for(i=this._popupStack.length-1;0<=i;i--)this.closePopup(this._popupStack[i]);this._popupStack.length=0}},Object.defineProperty(_.prototype,"hasAnyPopup",{get:function(){return 0!=this._popupStack.length},enumerable:!0,configurable:!0}),_.prototype.closePopup=function(t){null!=t.parent&&(t instanceof o.Window?t.hide():this.removeChild(t))},_.prototype.showTooltips=function(t){if(null==this._defaultTooltipWin){var e=o.UIConfig.tooltipsWin;if(!e)return void console.error("UIConfig.tooltipsWin not defined");this._defaultTooltipWin=o.UIPackage.createObjectFromURL(e)}this._defaultTooltipWin.text=t,this.showTooltipsWin(this._defaultTooltipWin)},_.prototype.showTooltipsWin=function(t,e){void 0===e&&(e=null),this.hideTooltips(),this._tooltipWin=t;var i=0,n=0;null==e?(i=_.mouseX+10,n=_.mouseY+20):(i=e.x,n=e.y);var o=this.globalToLocal(i,n);i=o.x,n=o.y,i+this._tooltipWin.width>this.width&&(i=i-this._tooltipWin.width-1)<0&&(i=10),n+this._tooltipWin.height>this.height&&(n=n-this._tooltipWin.height-1,0<i-this._tooltipWin.width-1&&(i=i-this._tooltipWin.width-1),n<0&&(n=10)),this._tooltipWin.x=i,this._tooltipWin.y=n,this.addChild(this._tooltipWin)},_.prototype.hideTooltips=function(){null!=this._tooltipWin&&(this._tooltipWin.parent&&this.removeChild(this._tooltipWin),this._tooltipWin=null)},_.prototype.getObjectUnderPoint=function(t,e){var i=this._nativeStage.$hitTest(t,e);return i?o.ToolSet.displayObjectToGObject(i):null},Object.defineProperty(_.prototype,"focus",{get:function(){return this._focusedObject&&!this._focusedObject.onStage&&(this._focusedObject=null),this._focusedObject},set:function(t){if(t&&(!t.focusable||!t.onStage))throw"invalid focus target";this.setFocus(t)},enumerable:!0,configurable:!0}),_.prototype.setFocus=function(t){this._focusedObject!=t&&(this._focusedObject=t,this.dispatchEventWith(_.FOCUS_CHANGED))},Object.defineProperty(_.prototype,"volumeScale",{get:function(){return this._volumeScale},set:function(t){this._volumeScale=t},enumerable:!0,configurable:!0}),_.prototype.playOneShotSound=function(t,e){void 0===e&&(e=1);var i=this._volumeScale*e;t.play(0,1).volume=i},_.prototype.adjustModalLayer=function(){var t=this.numChildren;null!=this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.setChildIndex(this._modalWaitPane,t-1);for(var e=t-1;0<=e;e--){var i=this.getChildAt(e);if(i instanceof o.Window&&i.modal)return void(null==this._modalLayer.parent?this.addChildAt(this._modalLayer,e):this.setChildIndexBefore(this._modalLayer,e))}null!=this._modalLayer.parent&&this.removeChild(this._modalLayer)},_.prototype.__addedToStage=function(t){this.displayObject.removeEventListener(egret.Event.ADDED_TO_STAGE,this.__addedToStage,this),this._nativeStage=this.displayObject.stage,this._nativeStage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__stageMouseDownCapture,this,!0),this._nativeStage.addEventListener(egret.TouchEvent.TOUCH_END,this.__stageMouseUpCapture,this,!0),this._nativeStage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.__stageMouseMoveCapture,this,!0),this._modalLayer=new o.GGraph,this._modalLayer.setSize(this.width,this.height),this._modalLayer.drawRect(0,0,0,o.UIConfig.modalLayerColor,o.UIConfig.modalLayerAlpha),this._modalLayer.addRelation(this,o.RelationType.Size),this.displayObject.stage.addEventListener(egret.Event.RESIZE,this.__winResize,this),this.__winResize(null)},_.prototype.__stageMouseDownCapture=function(t){_.mouseX=t.stageX,_.mouseY=t.stageY,_.touchDown=!0;for(var e=t.target;e!=this.displayObject.stage&&null!=e;){if(e.$owner){var i=e.$owner;if(i.touchable&&i.focusable){this.setFocus(i);break}}e=e.parent}if(null!=this._tooltipWin&&this.hideTooltips(),(this._justClosedPopups.length=0)<this._popupStack.length){for(e=t.target;e!=this.displayObject.stage&&null!=e;){if(e.$owner){var n=this._popupStack.indexOf(e.$owner);if(-1!=n){for(var o=this._popupStack.length-1;n<o;o--){var r=this._popupStack.pop();this.closePopup(r),this._justClosedPopups.push(r)}return}}e=e.parent}for(o=this._popupStack.length-1;0<=o;o--)r=this._popupStack[o],this.closePopup(r),this._justClosedPopups.push(r);this._popupStack.length=0}},_.prototype.__stageMouseMoveCapture=function(t){_.mouseX=t.stageX,_.mouseY=t.stageY},_.prototype.__stageMouseUpCapture=function(t){_.touchDown=!1},_.prototype.__winResize=function(t){this.setSize(this._nativeStage.stageWidth,this._nativeStage.stageHeight)},_.contentScaleFactor=1,_.FOCUS_CHANGED="FocusChanged",_}(o.GComponent);o.GRoot=t,__reflect(t.prototype,"fairygui.GRoot")}(fairygui||(fairygui={})),function(t){var e=function(){function t(){this.left=0,this.right=0,this.top=0,this.bottom=0}return t.prototype.copy=function(t){this.top=t.top,this.bottom=t.bottom,this.left=t.left,this.right=t.right},t}();t.Margin=e,__reflect(e.prototype,"fairygui.Margin")}(fairygui||(fairygui={})),function(t){var e=function(){function n(){this._enumI=0,this._enumCount=0,this._lastTime=0,this._items=new Array,this._itemPool=new Array,this._lastTime=egret.getTimer(),n.time=this._lastTime,egret.startTick(this.__timer,this)}return n.prototype.getItem=function(){return this._itemPool.length?this._itemPool.pop():new i},n.prototype.findItem=function(t,e){for(var i=this._items.length,n=0;n<i;n++){var o=this._items[n];if(o.callback==t&&o.thisObj==e)return o}return null},n.prototype.add=function(t,e,i,n,o){void 0===o&&(o=null);var r=this.findItem(i,n);r||((r=this.getItem()).callback=i,r.hasParam=1==i.length,r.thisObj=n,this._items.push(r)),r.delay=t,r.counter=0,r.repeat=e,r.param=o,r.end=!1},n.prototype.callLater=function(t,e,i){void 0===i&&(i=null),this.add(1,1,t,e,i)},n.prototype.callDelay=function(t,e,i,n){void 0===n&&(n=null),this.add(t,1,e,i,n)},n.prototype.callBy24Fps=function(t,e,i){void 0===i&&(i=null),this.add(n.FPS24,0,t,e,i)},n.prototype.exists=function(t,e){return null!=this.findItem(t,e)},n.prototype.remove=function(t,e){var i=this.findItem(t,e);if(i){var n=this._items.indexOf(i);this._items.splice(n,1),n<this._enumI&&this._enumI--,this._enumCount--,i.reset(),this._itemPool.push(i)}},n.prototype.__timer=function(t){for(n.time=t,n.deltaTime=t-this._lastTime,this._lastTime=t,this._enumI=0,this._enumCount=this._items.length;this._enumI<this._enumCount;){var e=this._items[this._enumI];this._enumI++,e.advance(n.deltaTime)&&(e.end&&(this._enumI--,this._enumCount--,this._items.splice(this._enumI,1)),e.hasParam?e.callback.call(e.thisObj,e.param):e.callback.call(e.thisObj),e.end&&(e.reset(),this._itemPool.push(e)))}return!1},n.deltaTime=0,n.time=0,n.inst=new n,n.FPS24=1e3/24,n}();t.GTimers=e,__reflect(e.prototype,"fairygui.GTimers");var i=function(){function t(){this.delay=0,this.counter=0,this.repeat=0}return t.prototype.advance=function(t){return void 0===t&&(t=0),this.counter+=t,this.counter>=this.delay&&(this.counter-=this.delay,this.counter>this.delay&&(this.counter=this.delay),0<this.repeat&&(this.repeat--,0==this.repeat&&(this.end=!0)),!0)},t.prototype.reset=function(){this.callback=null,this.thisObj=null,this.param=null},t}();__reflect(i.prototype,"TimerItem")}(fairygui||(fairygui={})),function(t){var e=function(e){function o(){var t=e.call(this)||this;return t._dragOffset=new egret.Point,t._scrollPerc=0,t}return __extends(o,e),o.prototype.setScrollPane=function(t,e){this._target=t,this._vertical=e},Object.defineProperty(o.prototype,"displayPerc",{set:function(t){this._vertical?(this._fixedGripSize||(this._grip.height=t*this._bar.height),this._grip.y=this._bar.y+(this._bar.height-this._grip.height)*this._scrollPerc):(this._fixedGripSize||(this._grip.width=t*this._bar.width),this._grip.x=this._bar.x+(this._bar.width-this._grip.width)*this._scrollPerc)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"scrollPerc",{set:function(t){this._scrollPerc=t,this._vertical?this._grip.y=this._bar.y+(this._bar.height-this._grip.height)*this._scrollPerc:this._grip.x=this._bar.x+(this._bar.width-this._grip.width)*this._scrollPerc},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"minSize",{get:function(){return this._vertical?(null!=this._arrowButton1?this._arrowButton1.height:0)+(null!=this._arrowButton2?this._arrowButton2.height:0):(null!=this._arrowButton1?this._arrowButton1.width:0)+(null!=this._arrowButton2?this._arrowButton2.width:0)},enumerable:!0,configurable:!0}),o.prototype.constructExtension=function(t){t.seek(0,6),this._fixedGripSize=t.readBool(),this._grip=this.getChild("grip"),this._grip?(this._bar=this.getChild("bar"),this._bar?(this._arrowButton1=this.getChild("arrow1"),this._arrowButton2=this.getChild("arrow2"),this._grip.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__gripMouseDown,this),this._arrowButton1&&this._arrowButton1.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__arrowButton1Click,this),this._arrowButton2&&this._arrowButton2.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__arrowButton2Click,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__barMouseDown,this)):console.error("bar")):console.error("grip")},o.prototype.__gripMouseDown=function(t){this._bar&&(t.stopPropagation(),this.globalToLocal(t.stageX,t.stageY,this._dragOffset),this._dragOffset.x-=this._grip.x,this._dragOffset.y-=this._grip.y,this._grip.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.__gripMouseMove,this),this._grip.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.__gripMouseUp,this))},o.prototype.__gripMouseMove=function(t){if(this.onStage){var e=this.globalToLocal(t.stageX,t.stageY,o.sScrollbarHelperPoint);if(this._vertical){var i=e.y-this._dragOffset.y;this._target.setPercY((i-this._bar.y)/(this._bar.height-this._grip.height),!1)}else{var n=e.x-this._dragOffset.x;this._target.setPercX((n-this._bar.x)/(this._bar.width-this._grip.width),!1)}}},o.prototype.__gripMouseUp=function(t){var e=t.currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.__gripMouseMove,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.__gripMouseUp,this)},o.prototype.__arrowButton1Click=function(t){t.stopPropagation(),this._vertical?this._target.scrollUp():this._target.scrollLeft()},o.prototype.__arrowButton2Click=function(t){t.stopPropagation(),this._vertical?this._target.scrollDown():this._target.scrollRight()},o.prototype.__barMouseDown=function(t){var e=this._grip.globalToLocal(t.stageX,t.stageY,o.sScrollbarHelperPoint);this._vertical?e.y<0?this._target.scrollUp(4):this._target.scrollDown(4):e.x<0?this._target.scrollLeft(4):this._target.scrollRight(4)},o.sScrollbarHelperPoint=new egret.Point,o}(t.GComponent);t.GScrollBar=e,__reflect(e.prototype,"fairygui.GScrollBar")}(fairygui||(fairygui={})),function(a){var t=function(i){function s(){var t=i.call(this)||this;return t._max=0,t._value=0,t._reverse=!1,t._barMaxWidth=0,t._barMaxHeight=0,t._barMaxWidthDelta=0,t._barMaxHeightDelta=0,t._clickPercent=0,t._barStartX=0,t._barStartY=0,t.changeOnClick=!0,t.canDrag=!0,t._titleType=a.ProgressTitleType.Percent,t._value=50,t._max=100,t._clickPos=new egret.Point,t}return __extends(s,i),Object.defineProperty(s.prototype,"titleType",{get:function(){return this._titleType},set:function(t){this._titleType=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"max",{get:function(){return this._max},set:function(t){this._max!=t&&(this._max=t,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"value",{get:function(){return this._value},set:function(t){this._value!=t&&(this._value=t,this.update())},enumerable:!0,configurable:!0}),s.prototype.update=function(){var t=Math.min(this._value/this._max,1);this.updateWidthPercent(t)},s.prototype.updateWidthPercent=function(t){if(this._titleObject)switch(this._titleType){case a.ProgressTitleType.Percent:this._titleObject.text=Math.round(100*t)+"%";break;case a.ProgressTitleType.ValueAndMax:this._titleObject.text=this._value+"/"+this._max;break;case a.ProgressTitleType.Value:this._titleObject.text=""+this._value;break;case a.ProgressTitleType.Max:this._titleObject.text=""+this._max}var e=this.width-this._barMaxWidthDelta,i=this.height-this._barMaxHeightDelta;this._reverse?(this._barObjectH&&(this._barObjectH.width=Math.round(e*t),this._barObjectH.x=this._barStartX+(e-this._barObjectH.width)),this._barObjectV&&(this._barObjectV.height=Math.round(i*t),this._barObjectV.y=this._barStartY+(i-this._barObjectV.height))):(this._barObjectH&&(this._barObjectH.width=Math.round(e*t)),this._barObjectV&&(this._barObjectV.height=Math.round(i*t)))},s.prototype.constructExtension=function(t){t.seek(0,6),this._titleType=t.readByte(),this._reverse=t.readBool(),this._titleObject=this.getChild("title"),this._barObjectH=this.getChild("bar"),this._barObjectV=this.getChild("bar_v"),this._gripObject=this.getChild("grip"),this._barObjectH&&(this._barMaxWidth=this._barObjectH.width,this._barMaxWidthDelta=this.width-this._barMaxWidth,this._barStartX=this._barObjectH.x),this._barObjectV&&(this._barMaxHeight=this._barObjectV.height,this._barMaxHeightDelta=this.height-this._barMaxHeight,this._barStartY=this._barObjectV.y),this._gripObject&&this._gripObject.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__gripMouseDown,this),this.displayObject.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.__barMouseDown,this)},s.prototype.handleSizeChanged=function(){i.prototype.handleSizeChanged.call(this),this._barObjectH&&(this._barMaxWidth=this.width-this._barMaxWidthDelta),this._barObjectV&&(this._barMaxHeight=this.height-this._barMaxHeightDelta),this._underConstruct||this.update()},s.prototype.setup_afterAdd=function(t,e){i.prototype.setup_afterAdd.call(this,t,e),t.seek(e,6)&&t.readByte()==this.packageItem.objectType&&(this._value=t.readInt(),this._max=t.readInt()),this.update()},s.prototype.__gripMouseDown=function(t){this.canDrag=!0,t.stopPropagation(),this._clickPos=this.globalToLocal(t.stageX,t.stageY),this._clickPercent=this._value/this._max,this._gripObject.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.__gripMouseMove,this),this._gripObject.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.__gripMouseUp,this)},s.prototype.__gripMouseMove=function(t){if(this.canDrag){var e,i=this.globalToLocal(t.stageX,t.stageY,s.sSilderHelperPoint),n=i.x-this._clickPos.x,o=i.y-this._clickPos.y;this._reverse&&(n=-n,o=-o),1<(e=this._barObjectH?this._clickPercent+n/this._barMaxWidth:this._clickPercent+o/this._barMaxHeight)?e=1:e<0&&(e=0);var r=Math.round(this._max*e);r!=this._value&&(this._value=r,this.dispatchEvent(new a.StateChangeEvent(a.StateChangeEvent.CHANGED))),this.updateWidthPercent(e)}},s.prototype.__gripMouseUp=function(t){this._gripObject.displayObject.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.__gripMouseMove,this),this._gripObject.displayObject.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.__gripMouseUp,this)},s.prototype.__barMouseDown=function(t){if(this.changeOnClick){var e,i=this._gripObject.globalToLocal(t.stageX,t.stageY,s.sSilderHelperPoint),n=this._value/this._max;this._barObjectH&&(e=(i.x-this._gripObject.width/2)/this._barMaxWidth),this._barObjectV&&(e=(i.y-this._gripObject.height/2)/this._barMaxHeight),this._reverse?n-=e:n+=e,1<n?n=1:n<0&&(n=0);var o=Math.round(this._max*n);o!=this._value&&(this._value=o,this.dispatchEvent(new a.StateChangeEvent(a.StateChangeEvent.CHANGED))),this.updateWidthPercent(n)}},s.sSilderHelperPoint=new egret.Point,s}(a.GComponent);a.GSlider=t,__reflect(t.prototype,"fairygui.GSlider")}(fairygui||(fairygui={})),function(i){var t=function(o){function t(){var t=o.call(this)||this;return t._widthAutoSize=!1,t._heightAutoSize=!1,t.displayObject.touchChildren=!0,t._textField.type=egret.TextFieldType.INPUT,t._textField.addEventListener(egret.Event.CHANGE,t.__textChanged,t),t._textField.addEventListener(egret.FocusEvent.FOCUS_IN,t.__focusIn,t),t._textField.addEventListener(egret.FocusEvent.FOCUS_OUT,t.__focusOut,t),t}return __extends(t,o),t.prototype.dispose=function(){o.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"editable",{get:function(){return this._textField.type==egret.TextFieldType.INPUT},set:function(t){t?(this._textField.type,egret.TextFieldType.INPUT):(this._textField.type,egret.TextFieldType.DYNAMIC)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){return this._textField.maxChars},set:function(t){this._textField.maxChars=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"promptText",{get:function(){return this._promptText},set:function(t){this._promptText=t,this.updateTextFieldText()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"restrict",{get:function(){return this._textField.restrict},set:function(t){this._textField.restrict=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"password",{get:function(){return this._password},set:function(t){this._password!=t&&(this._password=t,this._textField.displayAsPassword=this._password,this._textField.inputType=t?egret.TextFieldInputType.PASSWORD:egret.TextFieldInputType.TEXT,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.updateVertAlign())},enumerable:!0,configurable:!0}),t.prototype.updateVertAlign=function(){switch(this._verticalAlign){case i.VertAlignType.Top:this._textField.verticalAlign=egret.VerticalAlign.TOP;break;case i.VertAlignType.Middle:this._textField.verticalAlign=egret.VerticalAlign.MIDDLE;break;case i.VertAlignType.Bottom:this._textField.verticalAlign=egret.VerticalAlign.BOTTOM}},t.prototype.updateTextFieldText=function(){!this._text&&this._promptText?(this._textField.displayAsPassword=!1,this._textField.textFlow=(new egret.HtmlTextParser).parser(i.ToolSet.parseUBB(this._promptText))):(this._textField.displayAsPassword=this._password,this._ubbEnabled?this._textField.textFlow=(new egret.HtmlTextParser).parser(i.ToolSet.parseUBB(i.ToolSet.encodeHTML(this._text))):this._textField.text=this._text)},t.prototype.handleSizeChanged=function(){this._updatingSize||(this._textField.width=Math.ceil(this.width),this._textField.height=Math.ceil(this.height))},t.prototype.setup_beforeAdd=function(t,e){o.prototype.setup_beforeAdd.call(this,t,e),t.seek(e,4);var i=t.readS();null!=i&&(this._promptText=i),null!=(i=t.readS())&&(this._textField.restrict=i);var n=t.readInt();0!=n&&(this._textField.maxChars=n),n=t.readInt(),t.readBool()&&(this.password=!0),this.updateVertAlign()},t.prototype.setup_afterAdd=function(t,e){o.prototype.setup_afterAdd.call(this,t,e),!this._text&&this._promptText&&(this._textField.displayAsPassword=!1,this._textField.textFlow=(new egret.HtmlTextParser).parser(i.ToolSet.parseUBB(i.ToolSet.encodeHTML(this._promptText))))},t.prototype.__textChanged=function(t){this._text=this._textField.text},t.prototype.__focusIn=function(t){!this._text&&this._promptText&&(this._textField.displayAsPassword=this._password,this._textField.text="")},t.prototype.__focusOut=function(t){this._text=this._textField.text,!this._text&&this._promptText&&(this._textField.displayAsPassword=!1,this._textField.textFlow=(new egret.HtmlTextParser).parser(i.ToolSet.parseUBB(i.ToolSet.encodeHTML(this._promptText)))),setTimeout(function(){var t=document.documentElement.scrollTop||document.body.scrollTop||0;window.scrollTo(0,Math.max(t-1,0))},100)},t}(i.GTextField);i.GTextInput=t,__reflect(t.prototype,"fairygui.GTextInput")}(fairygui||(fairygui={})),function(t){var e=function(){function t(){}return Object.defineProperty(t.prototype,"controller",{set:function(t){this._controller=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this._id?this._controller.getPageIndexById(this._id):-1},set:function(t){this._id=this._controller.getPageId(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._id?this._controller.getPageNameById(this._id):null},set:function(t){this._id=this._controller.getPageIdByName(t)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._id=null},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t},enumerable:!0,configurable:!0}),t}();t.PageOption=e,__reflect(e.prototype,"fairygui.PageOption")}(fairygui||(fairygui={})),function(i){var t=function(){function t(t){if(void 0===t&&(t=null),!t&&!(t=i.UIConfig.popupMenu))throw"UIConfig.popupMenu not defined";this._contentPane=i.UIPackage.createObjectFromURL(t).asCom,this._contentPane.addEventListener(egret.Event.ADDED_TO_STAGE,this.__addedToStage,this),this._list=this._contentPane.getChild("list"),this._list.removeChildrenToPool(),this._list.addRelation(this._contentPane,i.RelationType.Width),this._list.removeRelation(this._contentPane,i.RelationType.Height),this._contentPane.addRelation(this._list,i.RelationType.Height),this._list.addEventListener(i.ItemEvent.CLICK,this.__clickItem,this)}return t.prototype.dispose=function(){this._contentPane.dispose()},t.prototype.addItem=function(t,e){void 0===e&&(e=null);var i=this._list.addItemFromPool().asButton;i.title=t,i.data=e,i.grayed=!1;var n=i.getController("checked");return null!=n&&(n.selectedIndex=0),i},t.prototype.addItemAt=function(t,e,i){void 0===i&&(i=null);var n=this._list.getFromPool().asButton;this._list.addChildAt(n,e),n.title=t,n.data=i,n.grayed=!1;var o=n.getController("checked");return null!=o&&(o.selectedIndex=0),n},t.prototype.addSeperator=function(){if(null==i.UIConfig.popupMenu_seperator)throw"UIConfig.popupMenu_seperator not defined";this.list.addItemFromPool(i.UIConfig.popupMenu_seperator)},t.prototype.getItemName=function(t){return this._list.getChildAt(t).name},t.prototype.setItemText=function(t,e){this._list.getChild(t).asButton.title=e},t.prototype.setItemVisible=function(t,e){var i=this._list.getChild(t).asButton;i.visible!=e&&(i.visible=e,this._list.setBoundsChangedFlag())},t.prototype.setItemGrayed=function(t,e){this._list.getChild(t).asButton.grayed=e},t.prototype.setItemCheckable=function(t,e){var i=this._list.getChild(t).asButton.getController("checked");null!=i&&(e?0==i.selectedIndex&&(i.selectedIndex=1):i.selectedIndex=0)},t.prototype.setItemChecked=function(t,e){var i=this._list.getChild(t).asButton.getController("checked");null!=i&&(i.selectedIndex=e?2:1)},t.prototype.isItemChecked=function(t){var e=this._list.getChild(t).asButton.getController("checked");return null!=e&&2==e.selectedIndex},t.prototype.removeItem=function(t){var e=this._list.getChild(t);if(null!=e){var i=this._list.getChildIndex(e);return this._list.removeChildToPoolAt(i),!0}return!1},t.prototype.clearItems=function(){this._list.removeChildrenToPool()},Object.defineProperty(t.prototype,"itemCount",{get:function(){return this._list.numChildren},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentPane",{get:function(){return this._contentPane},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"list",{get:function(){return this._list},enumerable:!0,configurable:!0}),t.prototype.show=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),(null!=t?t.root:i.GRoot.inst).showPopup(this.contentPane,t instanceof i.GRoot?null:t,e)},t.prototype.__clickItem=function(t){i.GTimers.inst.add(100,1,this.__clickItem2,this,t)},t.prototype.__clickItem2=function(t){var e=t.itemObject.asButton;if(null!=e)if(e.grayed)this._list.selectedIndex=-1;else{var i=e.getController("checked");null!=i&&0!=i.selectedIndex&&(1==i.selectedIndex?i.selectedIndex=2:i.selectedIndex=1),this._contentPane.parent.hidePopup(this.contentPane),null!=e.data&&(1==e.data.length?e.data(t):e.data())}},t.prototype.__addedToStage=function(t){this._list.selectedIndex=-1,this._list.resizeToFit(1e5,10)},t}();i.PopupMenu=t,__reflect(t.prototype,"fairygui.PopupMenu")}(fairygui||(fairygui={})),function(h){var t=function(){function t(t){this._owner=t,this._defs=new Array}return Object.defineProperty(t.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},set:function(t){this._target!=t&&(this._target&&this.releaseRefTarget(this._target),this._target=t,this._target&&this.addRefTarget(this._target))},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e){if(t==h.RelationType.Size)return this.add(h.RelationType.Width,e),void this.add(h.RelationType.Height,e);for(var i=this._defs.length,n=0;n<i;n++){if(this._defs[n].type==t)return}this.internalAdd(t,e)},t.prototype.internalAdd=function(t,e){if(t==h.RelationType.Size)return this.internalAdd(h.RelationType.Width,e),void this.internalAdd(h.RelationType.Height,e);var i=new r;i.percent=e,i.type=t,i.axis=t<=h.RelationType.Right_Right||t==h.RelationType.Width||t>=h.RelationType.LeftExt_Left&&t<=h.RelationType.RightExt_Right?0:1,this._defs.push(i),(e||t==h.RelationType.Left_Center||t==h.RelationType.Center_Center||t==h.RelationType.Right_Center||t==h.RelationType.Top_Middle||t==h.RelationType.Middle_Middle||t==h.RelationType.Bottom_Middle)&&(this._owner.pixelSnapping=!0)},t.prototype.remove=function(t){if(void 0===t&&(t=0),t==h.RelationType.Size)return this.remove(h.RelationType.Width),void this.remove(h.RelationType.Height);for(var e=this._defs.length,i=0;i<e;i++)if(this._defs[i].type==t){this._defs.splice(i,1);break}},t.prototype.copyFrom=function(t){this.target=t.target,this._defs.length=0;for(var e=t._defs.length,i=0;i<e;i++){var n=t._defs[i],o=new r;o.copyFrom(n),this._defs.push(o)}},t.prototype.dispose=function(){null!=this._target&&(this.releaseRefTarget(this._target),this._target=null)},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0==this._defs.length},enumerable:!0,configurable:!0}),t.prototype.applyOnSelfResized=function(t,e,i){for(var n=this._owner.x,o=this._owner.y,r=this._defs.length,s=0;s<r;s++){switch(this._defs[s].type){case h.RelationType.Center_Center:this._owner.x-=(.5-(i?this._owner.pivotX:0))*t;break;case h.RelationType.Right_Center:case h.RelationType.Right_Left:case h.RelationType.Right_Right:this._owner.x-=(1-(i?this._owner.pivotX:0))*t;break;case h.RelationType.Middle_Middle:this._owner.y-=(.5-(i?this._owner.pivotY:0))*e;break;case h.RelationType.Bottom_Middle:case h.RelationType.Bottom_Top:case h.RelationType.Bottom_Bottom:this._owner.y-=(1-(i?this._owner.pivotY:0))*e}}if((n!=this._owner.x||o!=this._owner.y)&&(n=this._owner.x-n,o=this._owner.y-o,this._owner.updateGearFromRelations(1,n,o),null!=this._owner.parent)){var a=this._owner.parent._transitions.length;if(0<a)for(s=0;s<a;++s)this._owner.parent._transitions[s].updateFromRelations(this._owner.id,n,o)}},t.prototype.applyOnXYChanged=function(t,e,i){var n;switch(t.type){case h.RelationType.Left_Left:case h.RelationType.Left_Center:case h.RelationType.Left_Right:case h.RelationType.Center_Center:case h.RelationType.Right_Left:case h.RelationType.Right_Center:case h.RelationType.Right_Right:this._owner.x+=e;break;case h.RelationType.Top_Top:case h.RelationType.Top_Middle:case h.RelationType.Top_Bottom:case h.RelationType.Middle_Middle:case h.RelationType.Bottom_Top:case h.RelationType.Bottom_Middle:case h.RelationType.Bottom_Bottom:this._owner.y+=i;break;case h.RelationType.Width:case h.RelationType.Height:break;case h.RelationType.LeftExt_Left:case h.RelationType.LeftExt_Right:n=this._owner.xMin,this._owner.width=this._owner._rawWidth-e,this._owner.xMin=n+e;break;case h.RelationType.RightExt_Left:case h.RelationType.RightExt_Right:n=this._owner.xMin,this._owner.width=this._owner._rawWidth+e,this._owner.xMin=n;break;case h.RelationType.TopExt_Top:case h.RelationType.TopExt_Bottom:n=this._owner.yMin,this._owner.height=this._owner._rawHeight-i,this._owner.yMin=n+i;break;case h.RelationType.BottomExt_Top:case h.RelationType.BottomExt_Bottom:n=this._owner.yMin,this._owner.height=this._owner._rawHeight+i,this._owner.yMin=n}},t.prototype.applyOnSizeChanged=function(t){var e,i,n=0,o=0,r=0;switch(0==t.axis?(this._target!=this._owner.parent&&(n=this._target.x,this._target.pivotAsAnchor&&(o=this._target.pivotX)),t.percent?0!=this._targetWidth&&(r=this._target._width/this._targetWidth):r=this._target._width-this._targetWidth):(this._target!=this._owner.parent&&(n=this._target.y,this._target.pivotAsAnchor&&(o=this._target.pivotY)),t.percent?0!=this._targetHeight&&(r=this._target._height/this._targetHeight):r=this._target._height-this._targetHeight),t.type){case h.RelationType.Left_Left:t.percent?this._owner.xMin=n+(this._owner.xMin-n)*r:0!=o&&(this._owner.x+=r*-o);break;case h.RelationType.Left_Center:t.percent?this._owner.xMin=n+(this._owner.xMin-n)*r:this._owner.x+=r*(.5-o);break;case h.RelationType.Left_Right:t.percent?this._owner.xMin=n+(this._owner.xMin-n)*r:this._owner.x+=r*(1-o);break;case h.RelationType.Center_Center:t.percent?this._owner.xMin=n+(this._owner.xMin+.5*this._owner._rawWidth-n)*r-.5*this._owner._rawWidth:this._owner.x+=r*(.5-o);break;case h.RelationType.Right_Left:t.percent?this._owner.xMin=n+(this._owner.xMin+this._owner._rawWidth-n)*r-this._owner._rawWidth:0!=o&&(this._owner.x+=r*-o);break;case h.RelationType.Right_Center:t.percent?this._owner.xMin=n+(this._owner.xMin+this._owner._rawWidth-n)*r-this._owner._rawWidth:this._owner.x+=r*(.5-o);break;case h.RelationType.Right_Right:t.percent?this._owner.xMin=n+(this._owner.xMin+this._owner._rawWidth-n)*r-this._owner._rawWidth:this._owner.x+=r*(1-o);break;case h.RelationType.Top_Top:t.percent?this._owner.yMin=n+(this._owner.yMin-n)*r:0!=o&&(this._owner.y+=r*-o);break;case h.RelationType.Top_Middle:t.percent?this._owner.yMin=n+(this._owner.yMin-n)*r:this._owner.y+=r*(.5-o);break;case h.RelationType.Top_Bottom:t.percent?this._owner.yMin=n+(this._owner.yMin-n)*r:this._owner.y+=r*(1-o);break;case h.RelationType.Middle_Middle:t.percent?this._owner.yMin=n+(this._owner.yMin+.5*this._owner._rawHeight-n)*r-.5*this._owner._rawHeight:this._owner.y+=r*(.5-o);break;case h.RelationType.Bottom_Top:t.percent?this._owner.yMin=n+(this._owner.yMin+this._owner._rawHeight-n)*r-this._owner._rawHeight:0!=o&&(this._owner.y+=r*-o);break;case h.RelationType.Bottom_Middle:t.percent?this._owner.yMin=n+(this._owner.yMin+this._owner._rawHeight-n)*r-this._owner._rawHeight:this._owner.y+=r*(.5-o);break;case h.RelationType.Bottom_Bottom:t.percent?this._owner.yMin=n+(this._owner.yMin+this._owner._rawHeight-n)*r-this._owner._rawHeight:this._owner.y+=r*(1-o);break;case h.RelationType.Width:e=this._owner._underConstruct&&this._owner==this._target.parent?this._owner.sourceWidth-this._target.initWidth:this._owner._rawWidth-this._targetWidth,t.percent&&(e*=r),this._target==this._owner.parent?this._owner.pivotAsAnchor?(i=this._owner.xMin,this._owner.setSize(this._target._width+e,this._owner._rawHeight,!0),this._owner.xMin=i):this._owner.setSize(this._target._width+e,this._owner._rawHeight,!0):this._owner.width=this._target._width+e;break;case h.RelationType.Height:e=this._owner._underConstruct&&this._owner==this._target.parent?this._owner.sourceHeight-this._target.initHeight:this._owner._rawHeight-this._targetHeight,t.percent&&(e*=r),this._target==this._owner.parent?this._owner.pivotAsAnchor?(i=this._owner.yMin,this._owner.setSize(this._owner._rawWidth,this._target._height+e,!0),this._owner.yMin=i):this._owner.setSize(this._owner._rawWidth,this._target._height+e,!0):this._owner.height=this._target._height+e;break;case h.RelationType.LeftExt_Left:i=this._owner.xMin,e=t.percent?n+(i-n)*r-i:r*-o,this._owner.width=this._owner._rawWidth-e,this._owner.xMin=i+e;break;case h.RelationType.LeftExt_Right:i=this._owner.xMin,e=t.percent?n+(i-n)*r-i:r*(1-o),this._owner.width=this._owner._rawWidth-e,this._owner.xMin=i+e;break;case h.RelationType.RightExt_Left:i=this._owner.xMin,e=t.percent?n+(i+this._owner._rawWidth-n)*r-(i+this._owner._rawWidth):r*-o,this._owner.width=this._owner._rawWidth+e,this._owner.xMin=i;break;case h.RelationType.RightExt_Right:i=this._owner.xMin,t.percent?this._owner==this._target.parent?this._owner._underConstruct?this._owner.width=n+this._target._width-this._target._width*o+(this._owner.sourceWidth-n-this._target.initWidth+this._target.initWidth*o)*r:this._owner.width=n+(this._owner._rawWidth-n)*r:(e=n+(i+this._owner._rawWidth-n)*r-(i+this._owner._rawWidth),this._owner.width=this._owner._rawWidth+e,this._owner.xMin=i):this._owner==this._target.parent?this._owner._underConstruct?this._owner.width=this._owner.sourceWidth+(this._target._width-this._target.initWidth)*(1-o):this._owner.width=this._owner._rawWidth+r*(1-o):(e=r*(1-o),this._owner.width=this._owner._rawWidth+e,this._owner.xMin=i);break;case h.RelationType.TopExt_Top:i=this._owner.yMin,e=t.percent?n+(i-n)*r-i:r*-o,this._owner.height=this._owner._rawHeight-e,this._owner.yMin=i+e;break;case h.RelationType.TopExt_Bottom:i=this._owner.yMin,e=t.percent?n+(i-n)*r-i:r*(1-o),this._owner.height=this._owner._rawHeight-e,this._owner.yMin=i+e;break;case h.RelationType.BottomExt_Top:i=this._owner.yMin,e=t.percent?n+(i+this._owner._rawHeight-n)*r-(i+this._owner._rawHeight):r*-o,this._owner.height=this._owner._rawHeight+e,this._owner.yMin=i;break;case h.RelationType.BottomExt_Bottom:i=this._owner.yMin,t.percent?this._owner==this._target.parent?this._owner._underConstruct?this._owner.height=n+this._target._height-this._target._height*o+(this._owner.sourceHeight-n-this._target.initHeight+this._target.initHeight*o)*r:this._owner.height=n+(this._owner._rawHeight-n)*r:(e=n+(i+this._owner._rawHeight-n)*r-(i+this._owner._rawHeight),this._owner.height=this._owner._rawHeight+e,this._owner.yMin=i):this._owner==this._target.parent?this._owner._underConstruct?this._owner.height=this._owner.sourceHeight+(this._target._height-this._target.initHeight)*(1-o):this._owner.height=this._owner._rawHeight+r*(1-o):(e=r*(1-o),this._owner.height=this._owner._rawHeight+e,this._owner.yMin=i)}},t.prototype.addRefTarget=function(t){t!=this._owner.parent&&t.addEventListener(h.GObject.XY_CHANGED,this.__targetXYChanged,this),t.addEventListener(h.GObject.SIZE_CHANGED,this.__targetSizeChanged,this),t.addEventListener(h.GObject.SIZE_DELAY_CHANGE,this.__targetSizeWillChange,this),this._targetX=this._target.x,this._targetY=this._target.y,this._targetWidth=this._target._width,this._targetHeight=this._target._height},t.prototype.releaseRefTarget=function(t){t.removeEventListener(h.GObject.XY_CHANGED,this.__targetXYChanged,this),t.removeEventListener(h.GObject.SIZE_CHANGED,this.__targetSizeChanged,this),t.removeEventListener(h.GObject.SIZE_DELAY_CHANGE,this.__targetSizeWillChange,this)},t.prototype.__targetXYChanged=function(t){if(null!=this._owner.relations.handling||null!=this._owner.group&&this._owner.group._updating)return this._targetX=this._target.x,void(this._targetY=this._target.y);this._owner.relations.handling=this._target;for(var e=this._owner.x,i=this._owner.y,n=this._target.x-this._targetX,o=this._target.y-this._targetY,r=this._defs.length,s=0;s<r;s++){var a=this._defs[s];this.applyOnXYChanged(a,n,o)}if(this._targetX=this._target.x,this._targetY=this._target.y,(e!=this._owner.x||i!=this._owner.y)&&(e=this._owner.x-e,i=this._owner.y-i,this._owner.updateGearFromRelations(1,e,i),null!=this._owner.parent)){var h=this._owner.parent._transitions.length;if(0<h)for(s=0;s<h;++s)this._owner.parent._transitions[s].updateFromRelations(this._owner.id,e,i)}this._owner.relations.handling=null},t.prototype.__targetSizeChanged=function(t){if(null==this._owner.relations.handling){this._owner.relations.handling=this._target;for(var e=this._owner.x,i=this._owner.y,n=this._owner._rawWidth,o=this._owner._rawHeight,r=this._defs.length,s=0;s<r;s++){var a=this._defs[s];this.applyOnSizeChanged(a)}if(this._targetWidth=this._target._width,this._targetHeight=this._target._height,(e!=this._owner.x||i!=this._owner.y)&&(e=this._owner.x-e,i=this._owner.y-i,this._owner.updateGearFromRelations(1,e,i),null!=this._owner.parent)){var h=this._owner.parent._transitions.length;if(0<h)for(s=0;s<h;++s)this._owner.parent._transitions[s].updateFromRelations(this._owner.id,e,i)}n==this._owner._rawWidth&&o==this._owner._rawHeight||(n=this._owner._rawWidth-n,o=this._owner._rawHeight-o,this._owner.updateGearFromRelations(2,n,o)),this._owner.relations.handling=null}},t.prototype.__targetSizeWillChange=function(t){this._owner.relations.sizeDirty=!0},t}();h.RelationItem=t,__reflect(t.prototype,"fairygui.RelationItem");var r=function(){function t(){}return t.prototype.copyFrom=function(t){this.percent=t.percent,this.type=t.type,this.axis=t.axis},t}();h.RelationDef=r,__reflect(r.prototype,"fairygui.RelationDef")}(fairygui||(fairygui={})),function(_){var t=function(){function t(t){this._owner=t,this._items=new Array}return t.prototype.add=function(t,e,i){void 0===i&&(i=!1);for(var n=this._items.length,o=0;o<n;o++){var r=this._items[o];if(r.target==t)return void r.add(e,i)}var s=new _.RelationItem(this._owner);s.target=t,s.add(e,i),this._items.push(s)},t.prototype.remove=function(t,e){void 0===e&&(e=0);for(var i=this._items.length,n=0;n<i;){var o=this._items[n];o.target==t?(o.remove(e),o.isEmpty?(o.dispose(),this._items.splice(n,1),i--):n++):n++}},t.prototype.contains=function(t){for(var e=this._items.length,i=0;i<e;i++){if(this._items[i].target==t)return!0}return!1},t.prototype.clearFor=function(t){for(var e=this._items.length,i=0;i<e;){var n=this._items[i];n.target==t?(n.dispose(),this._items.splice(i,1),e--):i++}},t.prototype.clearAll=function(){for(var t=this._items.length,e=0;e<t;e++){this._items[e].dispose()}this._items.length=0},t.prototype.copyFrom=function(t){this.clearAll();for(var e=t._items,i=e.length,n=0;n<i;n++){var o=e[n],r=new _.RelationItem(this._owner);r.copyFrom(o),this._items.push(r)}},t.prototype.dispose=function(){this.clearAll()},t.prototype.onOwnerSizeChanged=function(t,e,i){if(0!=this._items.length)for(var n=this._items.length,o=0;o<n;o++){this._items[o].applyOnSelfResized(t,e,i)}},t.prototype.ensureRelationsSizeCorrect=function(){if(0!=this._items.length){this.sizeDirty=!1;for(var t=this._items.length,e=0;e<t;e++){this._items[e].target.ensureSizeCorrect()}}},Object.defineProperty(t.prototype,"empty",{get:function(){return 0==this._items.length},enumerable:!0,configurable:!0}),t.prototype.setup=function(t,e){for(var i,n=t.readByte(),o=0;o<n;o++){var r=t.readShort();i=-1==r?this._owner.parent:e?this._owner.getChildAt(r):this._owner.parent.getChildAt(r);var s=new _.RelationItem(this._owner);s.target=i,this._items.push(s);for(var a=t.readByte(),h=0;h<a;h++){var l=t.readByte(),c=t.readBool();s.internalAdd(l,c)}}},t}();_.Relations=t,__reflect(t.prototype,"fairygui.Relations")}(fairygui||(fairygui={})),function(m){var t=function(i){function y(t){var e=i.call(this)||this;return e._owner=t,e._maskContainer=new egret.DisplayObjectContainer,e._owner._rootContainer.addChild(e._maskContainer),e._container=e._owner._container,e._container.x=0,e._container.y=0,e._maskContainer.addChild(e._container),e._scrollBarMargin=new m.Margin,e._scrollBarVisible=!0,e._mouseWheelEnabled=!0,e._xPos=0,e._yPos=0,e._aniFlag=0,e._footerLockedSize=0,e._headerLockedSize=0,e._viewSize=new egret.Point,e._contentSize=new egret.Point,e._pageSize=new egret.Point(1,1),e._overlapSize=new egret.Point,e._tweenTime=new egret.Point,e._tweenStart=new egret.Point,e._tweenDuration=new egret.Point,e._tweenChange=new egret.Point,e._velocity=new egret.Point,e._containerPos=new egret.Point,e._beginTouchPos=new egret.Point,e._lastTouchPos=new egret.Point,e._lastTouchGlobalPos=new egret.Point,e._scrollStep=m.UIConfig.defaultScrollStep,e._mouseWheelStep=2*e._scrollStep,e._decelerationRate=m.UIConfig.defaultScrollDecelerationRate,e._owner.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.__touchBegin,e),e}return __extends(y,i),y.prototype.setup=function(t){this._scrollType=t.readByte();var e=t.readByte(),i=t.readInt();t.readBool()&&(this._scrollBarMargin.top=t.readInt(),this._scrollBarMargin.bottom=t.readInt(),this._scrollBarMargin.left=t.readInt(),this._scrollBarMargin.right=t.readInt());var n=t.readS(),o=t.readS(),r=t.readS(),s=t.readS();if(this._displayOnLeft=0!=(1&i),this._snapToItem=0!=(2&i),this._displayInDemand=0!=(4&i),this._pageMode=0!=(8&i),this._touchEffect=!!(16&i)||!(32&i)&&m.UIConfig.defaultScrollTouchEffect,this._bouncebackEffect=!!(64&i)||!(128&i)&&m.UIConfig.defaultScrollBounceEffect,this._inertiaDisabled=0!=(256&i),0==(512&i)&&(this._maskContainer.scrollRect=new egret.Rectangle),e==m.ScrollBarDisplayType.Default&&(e=m.UIConfig.defaultScrollBarDisplay),e!=m.ScrollBarDisplayType.Hidden){var a;if(this._scrollType==m.ScrollType.Both||this._scrollType==m.ScrollType.Vertical)if(a=n||m.UIConfig.verticalScrollBar){if(this._vtScrollBar=m.UIPackage.createObjectFromURL(a),!this._vtScrollBar)throw"cannot create scrollbar from "+a;this._vtScrollBar.setScrollPane(this,!0),this._owner._rootContainer.addChild(this._vtScrollBar.displayObject)}if(this._scrollType==m.ScrollType.Both||this._scrollType==m.ScrollType.Horizontal)if(a=o||m.UIConfig.horizontalScrollBar){if(this._hzScrollBar=m.UIPackage.createObjectFromURL(a),!this._hzScrollBar)throw"cannot create scrollbar from "+a;this._hzScrollBar.setScrollPane(this,!1),this._owner._rootContainer.addChild(this._hzScrollBar.displayObject)}this._scrollBarDisplayAuto=e==m.ScrollBarDisplayType.Auto,this._scrollBarDisplayAuto&&(this._scrollBarVisible=!1,this._vtScrollBar&&(this._vtScrollBar.displayObject.visible=!1),this._hzScrollBar&&(this._hzScrollBar.displayObject.visible=!1))}if(r&&(this._header=m.UIPackage.createObjectFromURL(r),null==this._header))throw"cannot create scrollPane header from "+r;if(s&&(this._footer=m.UIPackage.createObjectFromURL(s),null==this._footer))throw"cannot create scrollPane footer from "+s;null==this._header&&null==this._footer||(this._refreshBarAxis=this._scrollType==m.ScrollType.Both||this._scrollType==m.ScrollType.Vertical?"y":"x"),this.setSize(this._owner.width,this._owner.height)},y.prototype.dispose=function(){0!=this._tweening&&egret.stopTick(this.tweenUpdate,this),(this._pageController=null)!=this._hzScrollBar&&this._hzScrollBar.dispose(),null!=this._vtScrollBar&&this._vtScrollBar.dispose(),null!=this._header&&this._header.dispose(),null!=this._footer&&this._footer.dispose()},Object.defineProperty(y.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"hzScrollBar",{get:function(){return this._hzScrollBar},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"vtScrollBar",{get:function(){return this._vtScrollBar},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"footer",{get:function(){return this._footer},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"bouncebackEffect",{get:function(){return this._bouncebackEffect},set:function(t){this._bouncebackEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"touchEffect",{get:function(){return this._touchEffect},set:function(t){this._touchEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"scrollStep",{get:function(){return this._scrollStep},set:function(t){this._scrollStep=t,0==this._scrollStep&&(this._scrollStep=m.UIConfig.defaultScrollStep),this._mouseWheelStep=2*this._scrollStep},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"decelerationRate",{get:function(){return this._decelerationRate},set:function(t){this._decelerationRate=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"snapToItem",{get:function(){return this._snapToItem},set:function(t){this._snapToItem=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"percX",{get:function(){return 0==this._overlapSize.x?0:this._xPos/this._overlapSize.x},set:function(t){this.setPercX(t,!1)},enumerable:!0,configurable:!0}),y.prototype.setPercX=function(t,e){void 0===e&&(e=!1),this._owner.ensureBoundsCorrect(),this.setPosX(this._overlapSize.x*m.ToolSet.clamp01(t),e)},Object.defineProperty(y.prototype,"percY",{get:function(){return 0==this._overlapSize.y?0:this._yPos/this._overlapSize.y},set:function(t){this.setPercY(t,!1)},enumerable:!0,configurable:!0}),y.prototype.setPercY=function(t,e){void 0===e&&(e=!1),this._owner.ensureBoundsCorrect(),this.setPosY(this._overlapSize.y*m.ToolSet.clamp01(t),e)},Object.defineProperty(y.prototype,"posX",{get:function(){return this._xPos},set:function(t){this.setPosX(t,!1)},enumerable:!0,configurable:!0}),y.prototype.setPosX=function(t,e){void 0===e&&(e=!1),this._owner.ensureBoundsCorrect(),1==this._loop&&(t=this.loopCheckingNewPos(t,"x")),(t=m.ToolSet.clamp(t,0,this._overlapSize.x))!=this._xPos&&(this._xPos=t,this.posChanged(e))},Object.defineProperty(y.prototype,"posY",{get:function(){return this._yPos},set:function(t){this.setPosY(t,!1)},enumerable:!0,configurable:!0}),y.prototype.setPosY=function(t,e){void 0===e&&(e=!1),this._owner.ensureBoundsCorrect(),1==this._loop&&(t=this.loopCheckingNewPos(t,"y")),(t=m.ToolSet.clamp(t,0,this._overlapSize.y))!=this._yPos&&(this._yPos=t,this.posChanged(e))},Object.defineProperty(y.prototype,"contentWidth",{get:function(){return this._contentSize.x},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"contentHeight",{get:function(){return this._contentSize.y},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"viewWidth",{get:function(){return this._viewSize.x},set:function(t){t=t+this._owner.margin.left+this._owner.margin.right,null!=this._vtScrollBar&&(t+=this._vtScrollBar.width),this._owner.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"viewHeight",{get:function(){return this._viewSize.y},set:function(t){t=t+this._owner.margin.top+this._owner.margin.bottom,null!=this._hzScrollBar&&(t+=this._hzScrollBar.height),this._owner.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"currentPageX",{get:function(){if(!this._pageMode)return 0;var t=Math.floor(this._xPos/this._pageSize.x);return this._xPos-t*this._pageSize.x>.5*this._pageSize.x&&t++,t},set:function(t){this.setCurrentPageX(t,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"currentPageY",{get:function(){if(!this._pageMode)return 0;var t=Math.floor(this._yPos/this._pageSize.y);return this._yPos-t*this._pageSize.y>.5*this._pageSize.y&&t++,t},set:function(t){this.setCurrentPageY(t,!1)},enumerable:!0,configurable:!0}),y.prototype.setCurrentPageX=function(t,e){this._pageMode&&0<this._overlapSize.x&&this.setPosX(t*this._pageSize.x,e)},y.prototype.setCurrentPageY=function(t,e){this._pageMode&&0<this._overlapSize.y&&this.setPosY(t*this._pageSize.y,e)},Object.defineProperty(y.prototype,"isBottomMost",{get:function(){return this._yPos==this._overlapSize.y||0==this._overlapSize.y},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"isRightMost",{get:function(){return this._xPos==this._overlapSize.x||0==this._overlapSize.x},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"pageController",{get:function(){return this._pageController},set:function(t){this._pageController=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"scrollingPosX",{get:function(){return m.ToolSet.clamp(-this._container.x,0,this._overlapSize.x)},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"scrollingPosY",{get:function(){return m.ToolSet.clamp(-this._container.y,0,this._overlapSize.y)},enumerable:!0,configurable:!0}),y.prototype.scrollTop=function(t){void 0===t&&(t=!1),this.setPercY(0,t)},y.prototype.scrollBottom=function(t){void 0===t&&(t=!1),this.setPercY(1,t)},y.prototype.scrollUp=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this._pageMode?this.setPosY(this._yPos-this._pageSize.y*t,e):this.setPosY(this._yPos-this._scrollStep*t,e)},y.prototype.scrollDown=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this._pageMode?this.setPosY(this._yPos+this._pageSize.y*t,e):this.setPosY(this._yPos+this._scrollStep*t,e)},y.prototype.scrollLeft=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this._pageMode?this.setPosX(this._xPos-this._pageSize.x*t,e):this.setPosX(this._xPos-this._scrollStep*t,e)},y.prototype.scrollRight=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this._pageMode?this.setPosX(this._xPos+this._pageSize.x*t,e):this.setPosX(this._xPos+this._scrollStep*t,e)},y.prototype.scrollToView=function(t,e,i){var n;if(void 0===e&&(e=!1),void 0===i&&(i=!1),this._owner.ensureBoundsCorrect(),this._needRefresh&&this.refresh(),t instanceof m.GObject?t.parent!=this._owner?(t.parent.localToGlobalRect(t.x,t.y,t.width,t.height,y.sHelperRect),n=this._owner.globalToLocalRect(y.sHelperRect.x,y.sHelperRect.y,y.sHelperRect.width,y.sHelperRect.height,y.sHelperRect)):(n=y.sHelperRect).setTo(t.x,t.y,t.width,t.height):n=t,0<this._overlapSize.y){var o=this._yPos+this._viewSize.y;i||n.y<=this._yPos||n.height>=this._viewSize.y?this._pageMode?this.setPosY(Math.floor(n.y/this._pageSize.y)*this._pageSize.y,e):this.setPosY(n.y,e):n.y+n.height>o&&(this._pageMode?this.setPosY(Math.floor(n.y/this._pageSize.y)*this._pageSize.y,e):n.height<=this._viewSize.y/2?this.setPosY(n.y+2*n.height-this._viewSize.y,e):this.setPosY(n.y+n.height-this._viewSize.y,e))}if(0<this._overlapSize.x){var r=this._xPos+this._viewSize.x;i||n.x<=this._xPos||n.width>=this._viewSize.x?this._pageMode?this.setPosX(Math.floor(n.x/this._pageSize.x)*this._pageSize.x,e):this.setPosX(n.x,e):n.x+n.width>r&&(this._pageMode?this.setPosX(Math.floor(n.x/this._pageSize.x)*this._pageSize.x,e):n.width<=this._viewSize.x/2?this.setPosX(n.x+2*n.width-this._viewSize.x,e):this.setPosX(n.x+n.width-this._viewSize.x,e))}!e&&this._needRefresh&&this.refresh()},y.prototype.isChildInView=function(t){if(0<this._overlapSize.y){var e=t.y+this._container.y;if(e<-t.height||e>this._viewSize.y)return!1}return!(0<this._overlapSize.x&&((e=t.x+this._container.x)<-t.width||e>this._viewSize.x))},y.prototype.cancelDragging=function(){this._owner.displayObject.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.__touchMove,this),this._owner.displayObject.removeEventListener(egret.TouchEvent.TOUCH_END,this.__touchEnd,this),this._owner.displayObject.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.__touchTap,this),y.draggingPane==this&&(y.draggingPane=null),y._gestureFlag=0,this.isDragged=!1,this._maskContainer.touchChildren=!0},y.prototype.lockHeader=function(t){this._headerLockedSize!=t&&(this._headerLockedSize=t,!this._refreshEventDispatching&&0<=this._container[this._refreshBarAxis]&&(this._tweenStart.setTo(this._container.x,this._container.y),this._tweenChange.setTo(0,0),this._tweenChange[this._refreshBarAxis]=this._headerLockedSize-this._tweenStart[this._refreshBarAxis],this._tweenDuration.setTo(y.TWEEN_TIME_DEFAULT,y.TWEEN_TIME_DEFAULT),this._tweenTime.setTo(0,0),this._tweening=2,egret.startTick(this.tweenUpdate,this)))},y.prototype.lockFooter=function(t){if(this._footerLockedSize!=t&&(this._footerLockedSize=t,!this._refreshEventDispatching&&this._container[this._refreshBarAxis]<=-this._overlapSize[this._refreshBarAxis])){this._tweenStart.setTo(this._container.x,this._container.y),this._tweenChange.setTo(0,0);var e=this._overlapSize[this._refreshBarAxis];0==e?e=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):e+=this._footerLockedSize,this._tweenChange[this._refreshBarAxis]=-e-this._tweenStart[this._refreshBarAxis],this._tweenDuration.setTo(y.TWEEN_TIME_DEFAULT,y.TWEEN_TIME_DEFAULT),this._tweenTime.setTo(0,0),this._tweening=2,egret.startTick(this.tweenUpdate,this)}},y.prototype.onOwnerSizeChanged=function(){this.setSize(this._owner.width,this._owner.height),this.posChanged(!1)},y.prototype.handleControllerChanged=function(t){this._pageController==t&&(this._scrollType==m.ScrollType.Horizontal?this.setCurrentPageX(t.selectedIndex,!0):this.setCurrentPageY(t.selectedIndex,!0))},y.prototype.updatePageController=function(){var t;if(null!=this._pageController&&!this._pageController.changing&&(t=this._scrollType==m.ScrollType.Horizontal?this.currentPageX:this.currentPageY)<this._pageController.pageCount){var e=this._pageController;this._pageController=null,e.selectedIndex=t,this._pageController=e}},y.prototype.adjustMaskContainer=function(){var t,e;t=this._displayOnLeft&&null!=this._vtScrollBar?Math.floor(this._owner.margin.left+this._vtScrollBar.width):Math.floor(this._owner.margin.left),e=Math.floor(this._owner.margin.top),this._maskContainer.x=t,this._maskContainer.y=e,0!=this._owner._alignOffset.x||0!=this._owner._alignOffset.y?(null==this._alignContainer&&(this._alignContainer=new egret.DisplayObjectContainer,this._maskContainer.addChild(this._alignContainer),this._alignContainer.addChild(this._container)),this._alignContainer.x=this._owner._alignOffset.x,this._alignContainer.y=this._owner._alignOffset.y):this._alignContainer&&(this._alignContainer.x=this._alignContainer.y=0)},y.prototype.setSize=function(t,e){this.adjustMaskContainer(),this._hzScrollBar&&(this._hzScrollBar.y=e-this._hzScrollBar.height,this._vtScrollBar&&!this._vScrollNone?(this._hzScrollBar.width=t-this._vtScrollBar.width-this._scrollBarMargin.left-this._scrollBarMargin.right,this._displayOnLeft?this._hzScrollBar.x=this._scrollBarMargin.left+this._vtScrollBar.width:this._hzScrollBar.x=this._scrollBarMargin.left):(this._hzScrollBar.width=t-this._scrollBarMargin.left-this._scrollBarMargin.right,this._hzScrollBar.x=this._scrollBarMargin.left)),this._vtScrollBar&&(this._displayOnLeft||(this._vtScrollBar.x=t-this._vtScrollBar.width),this._hzScrollBar?this._vtScrollBar.height=e-this._hzScrollBar.height-this._scrollBarMargin.top-this._scrollBarMargin.bottom:this._vtScrollBar.height=e-this._scrollBarMargin.top-this._scrollBarMargin.bottom,this._vtScrollBar.y=this._scrollBarMargin.top),this._viewSize.x=t,this._viewSize.y=e,this._hzScrollBar&&!this._hScrollNone&&(this._viewSize.y-=this._hzScrollBar.height),this._vtScrollBar&&!this._vScrollNone&&(this._viewSize.x-=this._vtScrollBar.width),this._viewSize.x-=this._owner.margin.left+this._owner.margin.right,this._viewSize.y-=this._owner.margin.top+this._owner.margin.bottom,this._viewSize.x=Math.max(1,this._viewSize.x),this._viewSize.y=Math.max(1,this._viewSize.y),this._pageSize.x=this._viewSize.x,this._pageSize.y=this._viewSize.y,this.handleSizeChanged()},y.prototype.setContentSize=function(t,e){this._contentSize.x==t&&this._contentSize.y==e||(this._contentSize.x=t,this._contentSize.y=e,this.handleSizeChanged())},y.prototype.changeContentSizeOnScrolling=function(t,e,i,n){var o=this._xPos==this._overlapSize.x,r=this._yPos==this._overlapSize.y;this._contentSize.x+=t,this._contentSize.y+=e,this.handleSizeChanged(),1==this._tweening?(0!=t&&o&&this._tweenChange.x<0&&(this._xPos=this._overlapSize.x,this._tweenChange.x=-this._xPos-this._tweenStart.x),0!=e&&r&&this._tweenChange.y<0&&(this._yPos=this._overlapSize.y,this._tweenChange.y=-this._yPos-this._tweenStart.y)):2==this._tweening?(0!=i&&(this._container.x-=i,this._tweenStart.x-=i,this._xPos=-this._container.x),0!=n&&(this._container.y-=n,this._tweenStart.y-=n,this._yPos=-this._container.y)):this.isDragged?(0!=i&&(this._container.x-=i,this._containerPos.x-=i,this._xPos=-this._container.x),0!=n&&(this._container.y-=n,this._containerPos.y-=n,this._yPos=-this._container.y)):(0!=t&&o&&(this._xPos=this._overlapSize.x,this._container.x=-this._xPos),0!=e&&r&&(this._yPos=this._overlapSize.y,this._container.y=-this._yPos)),this._pageMode&&this.updatePageController()},y.prototype.handleSizeChanged=function(t){void 0===t&&(t=!1),this._displayInDemand&&(this._vtScrollBar&&(this._contentSize.y<=this._viewSize.y?this._vScrollNone||(this._vScrollNone=!0,this._viewSize.x+=this._vtScrollBar.width):this._vScrollNone&&(this._vScrollNone=!1,this._viewSize.x-=this._vtScrollBar.width)),this._hzScrollBar&&(this._contentSize.x<=this._viewSize.x?this._hScrollNone||(this._hScrollNone=!0,this._viewSize.y+=this._hzScrollBar.height):this._hScrollNone&&(this._hScrollNone=!1,this._viewSize.y-=this._hzScrollBar.height))),this._vtScrollBar&&(this._viewSize.y<this._vtScrollBar.minSize?this._vtScrollBar.displayObject.visible=!1:(this._vtScrollBar.displayObject.visible=this._scrollBarVisible&&!this._vScrollNone,0==this._contentSize.y?this._vtScrollBar.displayPerc=0:this._vtScrollBar.displayPerc=Math.min(1,this._viewSize.y/this._contentSize.y))),this._hzScrollBar&&(this._viewSize.x<this._hzScrollBar.minSize?this._hzScrollBar.displayObject.visible=!1:(this._hzScrollBar.displayObject.visible=this._scrollBarVisible&&!this._hScrollNone,0==this._contentSize.x?this._hzScrollBar.displayPerc=0:this._hzScrollBar.displayPerc=Math.min(1,this._viewSize.x/this._contentSize.x)));var e=this._maskContainer.scrollRect;if(e&&(e.width=this._viewSize.x,e.height=this._viewSize.y,this._maskContainer.scrollRect=e),this._scrollType==m.ScrollType.Horizontal||this._scrollType==m.ScrollType.Both?this._overlapSize.x=Math.ceil(Math.max(0,this._contentSize.x-this._viewSize.x)):this._overlapSize.x=0,this._scrollType==m.ScrollType.Vertical||this._scrollType==m.ScrollType.Both?this._overlapSize.y=Math.ceil(Math.max(0,this._contentSize.y-this._viewSize.y)):this._overlapSize.y=0,this._xPos=m.ToolSet.clamp(this._xPos,0,this._overlapSize.x),this._yPos=m.ToolSet.clamp(this._yPos,0,this._overlapSize.y),null!=this._refreshBarAxis){var i=this._overlapSize[this._refreshBarAxis];0==i?i=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):i+=this._footerLockedSize,"x"==this._refreshBarAxis?(this._container.x=m.ToolSet.clamp(this._container.x,-i,this._headerLockedSize),this._container.y=m.ToolSet.clamp(this._container.y,-this._overlapSize.y,0)):(this._container.x=m.ToolSet.clamp(this._container.x,-this._overlapSize.x,0),this._container.y=m.ToolSet.clamp(this._container.y,-i,this._headerLockedSize)),null!=this._header&&("x"==this._refreshBarAxis?this._header.height=this._viewSize.y:this._header.width=this._viewSize.x),null!=this._footer&&("y"==this._refreshBarAxis?this._footer.height=this._viewSize.y:this._footer.width=this._viewSize.x)}else this._container.x=m.ToolSet.clamp(this._container.x,-this._overlapSize.x,0),this._container.y=m.ToolSet.clamp(this._container.y,-this._overlapSize.y,0);this.syncScrollBar(!0),this.checkRefreshBar(),this._pageMode&&this.updatePageController()},y.prototype.posChanged=function(t){0==this._aniFlag?this._aniFlag=t?1:-1:1!=this._aniFlag||t||(this._aniFlag=-1),this._needRefresh=!0,m.GTimers.inst.callLater(this.refresh,this)},y.prototype.refresh=function(){this._needRefresh=!1,m.GTimers.inst.remove(this.refresh,this),(this._pageMode||this._snapToItem)&&(y.sEndPos.setTo(-this._xPos,-this._yPos),this.alignPosition(y.sEndPos,!1),this._xPos=-y.sEndPos.x,this._yPos=-y.sEndPos.y),this.refresh2(),this.dispatchEventWith(y.SCROLL,!1),this._needRefresh&&(this._needRefresh=!1,m.GTimers.inst.remove(this.refresh,this),this.refresh2()),this.syncScrollBar(),this._aniFlag=0},y.prototype.refresh2=function(){var t,e;1!=this._aniFlag||this.isDragged?(0!=this._tweening&&this.killTween(),this._container.x=Math.floor(-this._xPos),this._container.y=Math.floor(-this._yPos),this.loopCheckingCurrent()):(0<this._overlapSize.x?t=-Math.floor(this._xPos):(0!=this._container.x&&(this._container.x=0),t=0),0<this._overlapSize.y?e=-Math.floor(this._yPos):(0!=this._container.y&&(this._container.y=0),e=0),t!=this._container.x||e!=this._container.y?(this._tweening=1,this._tweenTime.setTo(0,0),this._tweenDuration.setTo(y.TWEEN_TIME_GO,y.TWEEN_TIME_GO),this._tweenStart.setTo(this._container.x,this._container.y),this._tweenChange.setTo(t-this._tweenStart.x,e-this._tweenStart.y),egret.startTick(this.tweenUpdate,this)):0!=this._tweening&&this.killTween());this._pageMode&&this.updatePageController()},y.prototype.syncScrollBar=function(t){void 0===t&&(t=!1),null!=this._vtScrollBar&&(this._vtScrollBar.scrollPerc=0==this._overlapSize.y?0:m.ToolSet.clamp(-this._container.y,0,this._overlapSize.y)/this._overlapSize.y,this._scrollBarDisplayAuto&&this.showScrollBar(!t)),null!=this._hzScrollBar&&(this._hzScrollBar.scrollPerc=0==this._overlapSize.x?0:m.ToolSet.clamp(-this._container.x,0,this._overlapSize.x)/this._overlapSize.x,this._scrollBarDisplayAuto&&this.showScrollBar(!t)),t&&(this._maskContainer.touchChildren=!0)},y.prototype.__touchBegin=function(t){if(this._touchEffect){0!=this._tweening?(this.killTween(),this.isDragged=!0):this.isDragged=!1;var e=this._owner.globalToLocal(t.stageX,t.stageY,y.sHelperPoint);this._containerPos.setTo(this._container.x,this._container.y),this._beginTouchPos.setTo(e.x,e.y),this._lastTouchPos.setTo(e.x,e.y),this._lastTouchGlobalPos.setTo(t.stageX,t.stageY),this._isHoldAreaDone=!1,this._velocity.setTo(0,0),this._velocityScale=1,this._lastMoveTime=egret.getTimer()/1e3,this._owner.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.__touchMove,this),this._owner.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.__touchEnd,this),this._owner.displayObject.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.__touchTap,this)}},y.prototype.__touchMove=function(t){if(null!=this._owner.displayObject.stage&&this._touchEffect&&(null==y.draggingPane||y.draggingPane==this)&&null==m.GObject.draggingObject){var e,i,n,o=this._owner.globalToLocal(t.stageX,t.stageY,y.sHelperPoint),r=m.UIConfig.touchScrollSensitivity;if(this._scrollType==m.ScrollType.Vertical){if(!this._isHoldAreaDone){if(y._gestureFlag|=1,(e=Math.abs(this._beginTouchPos.y-o.y))<r)return;if(0!=(2&y._gestureFlag)&&e<Math.abs(this._beginTouchPos.x-o.x))return}i=!0}else if(this._scrollType==m.ScrollType.Horizontal){if(!this._isHoldAreaDone){if(y._gestureFlag|=2,(e=Math.abs(this._beginTouchPos.x-o.x))<r)return;if(0!=(1&y._gestureFlag)&&e<Math.abs(this._beginTouchPos.y-o.y))return}n=!0}else{if(y._gestureFlag=3,!this._isHoldAreaDone&&(e=Math.abs(this._beginTouchPos.y-o.y))<r&&(e=Math.abs(this._beginTouchPos.x-o.x))<r)return;i=n=!0}var s=Math.floor(this._containerPos.x+o.x-this._beginTouchPos.x),a=Math.floor(this._containerPos.y+o.y-this._beginTouchPos.y);i&&(0<a?this._bouncebackEffect?null!=this._header&&0!=this._header.maxHeight?this._container.y=Math.floor(Math.min(.5*a,this._header.maxHeight)):this._container.y=Math.floor(Math.min(.5*a,this._viewSize.y*y.PULL_RATIO)):this._container.y=0:a<-this._overlapSize.y?this._bouncebackEffect?null!=this._footer&&0<this._footer.maxHeight?this._container.y=Math.floor(Math.max(.5*(a+this._overlapSize.y),-this._footer.maxHeight)-this._overlapSize.y):this._container.y=Math.floor(Math.max(.5*(a+this._overlapSize.y),-this._viewSize.y*y.PULL_RATIO)-this._overlapSize.y):this._container.y=-this._overlapSize.y:this._container.y=a),n&&(0<s?this._bouncebackEffect?null!=this._header&&0!=this._header.maxWidth?this._container.x=Math.floor(Math.min(.5*s,this._header.maxWidth)):this._container.x=Math.floor(Math.min(.5*s,this._viewSize.x*y.PULL_RATIO)):this._container.x=0:s<0-this._overlapSize.x?this._bouncebackEffect?null!=this._footer&&0<this._footer.maxWidth?this._container.x=Math.floor(Math.max(.5*(s+this._overlapSize.x),-this._footer.maxWidth)-this._overlapSize.x):this._container.x=Math.floor(Math.max(.5*(s+this._overlapSize.x),-this._viewSize.x*y.PULL_RATIO)-this._overlapSize.x):this._container.x=-this._overlapSize.x:this._container.x=s);var h=egret.getTimer()/1e3,l=Math.max(h-this._lastMoveTime,1/60),c=o.x-this._lastTouchPos.x,_=o.y-this._lastTouchPos.y;if(n||(c=0),i||(_=0),0!=l){var u=this._owner.displayObject.stage.frameRate,p=l*u-1;if(1<p){var d=Math.pow(.833,p);this._velocity.x=this._velocity.x*d,this._velocity.y=this._velocity.y*d}this._velocity.x=m.ToolSet.lerp(this._velocity.x,60*c/u/l,10*l),this._velocity.y=m.ToolSet.lerp(this._velocity.y,60*_/u/l,10*l)}var g=this._lastTouchGlobalPos.x-t.stageX,f=this._lastTouchGlobalPos.y-t.stageY;0!=c?this._velocityScale=Math.abs(g/c):0!=_&&(this._velocityScale=Math.abs(f/_)),this._lastTouchPos.setTo(o.x,o.y),this._lastTouchGlobalPos.setTo(t.stageX,t.stageY),this._lastMoveTime=h,0<this._overlapSize.x&&(this._xPos=m.ToolSet.clamp(-this._container.x,0,this._overlapSize.x)),0<this._overlapSize.y&&(this._yPos=m.ToolSet.clamp(-this._container.y,0,this._overlapSize.y)),0!=this._loop&&(s=this._container.x,a=this._container.y,this.loopCheckingCurrent()&&(this._containerPos.x+=this._container.x-s,this._containerPos.y+=this._container.y-a)),(y.draggingPane=this)._isHoldAreaDone=!0,this.isDragged=!0,this._maskContainer.touchChildren=!1,this.syncScrollBar(),this.checkRefreshBar(),this._pageMode&&this.updatePageController(),this.dispatchEventWith(y.SCROLL,!1)}},y.prototype.__touchEnd=function(t){if(t.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.__touchMove,this),t.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_END,this.__touchEnd,this),t.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.__touchTap,this),y.draggingPane==this&&(y.draggingPane=null),y._gestureFlag=0,!this.isDragged||!this._touchEffect||null==this._owner.displayObject.stage)return this.isDragged=!1,void(this._maskContainer.touchChildren=!0);this.isDragged=!1,this._maskContainer.touchChildren=!0,this._tweenStart.setTo(this._container.x,this._container.y),y.sEndPos.setTo(this._tweenStart.x,this._tweenStart.y);var e=!1;if(0<this._container.x?e=!(y.sEndPos.x=0):this._container.x<-this._overlapSize.x&&(y.sEndPos.x=-this._overlapSize.x,e=!0),0<this._container.y?e=!(y.sEndPos.y=0):this._container.y<-this._overlapSize.y&&(y.sEndPos.y=-this._overlapSize.y,e=!0),e){if(this._tweenChange.setTo(y.sEndPos.x-this._tweenStart.x,y.sEndPos.y-this._tweenStart.y),this._tweenChange.x<-m.UIConfig.touchDragSensitivity||this._tweenChange.y<-m.UIConfig.touchDragSensitivity?(this._refreshEventDispatching=!0,this.dispatchEventWith(y.PULL_DOWN_RELEASE),this._refreshEventDispatching=!1):(this._tweenChange.x>m.UIConfig.touchDragSensitivity||this._tweenChange.y>m.UIConfig.touchDragSensitivity)&&(this._refreshEventDispatching=!0,this.dispatchEventWith(y.PULL_UP_RELEASE),this._refreshEventDispatching=!1),0<this._headerLockedSize&&0==y.sEndPos[this._refreshBarAxis])y.sEndPos[this._refreshBarAxis]=this._headerLockedSize,this._tweenChange.x=y.sEndPos.x-this._tweenStart.x,this._tweenChange.y=y.sEndPos.y-this._tweenStart.y;else if(0<this._footerLockedSize&&y.sEndPos[this._refreshBarAxis]==-this._overlapSize[this._refreshBarAxis]){var i=this._overlapSize[this._refreshBarAxis];0==i?i=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):i+=this._footerLockedSize,y.sEndPos[this._refreshBarAxis]=-i,this._tweenChange.x=y.sEndPos.x-this._tweenStart.x,this._tweenChange.y=y.sEndPos.y-this._tweenStart.y}this._tweenDuration.setTo(y.TWEEN_TIME_DEFAULT,y.TWEEN_TIME_DEFAULT)}else{if(this._inertiaDisabled)this._tweenDuration.setTo(y.TWEEN_TIME_DEFAULT,y.TWEEN_TIME_DEFAULT);else{var n=this._owner.displayObject.stage.frameRate,o=(egret.getTimer()/1e3-this._lastMoveTime)*n-1;if(1<o){var r=Math.pow(.833,o);this._velocity.x=this._velocity.x*r,this._velocity.y=this._velocity.y*r}this.updateTargetAndDuration(this._tweenStart,y.sEndPos)}if(y.sOldChange.setTo(y.sEndPos.x-this._tweenStart.x,y.sEndPos.y-this._tweenStart.y),this.loopCheckingTarget(y.sEndPos),(this._pageMode||this._snapToItem)&&this.alignPosition(y.sEndPos,!0),this._tweenChange.x=y.sEndPos.x-this._tweenStart.x,this._tweenChange.y=y.sEndPos.y-this._tweenStart.y,0==this._tweenChange.x&&0==this._tweenChange.y)return void(this._scrollBarDisplayAuto&&this.showScrollBar(!1));(this._pageMode||this._snapToItem)&&(this.fixDuration("x",y.sOldChange.x),this.fixDuration("y",y.sOldChange.y))}this._tweening=2,this._tweenTime.setTo(0,0),egret.startTick(this.tweenUpdate,this)},y.prototype.__touchTap=function(t){this.isDragged=!1},y.prototype.__rollOver=function(t){this.showScrollBar(!0)},y.prototype.__rollOut=function(t){this.showScrollBar(!1)},y.prototype.showScrollBar=function(t){t?(this.__showScrollBar(!0),m.GTimers.inst.remove(this.__showScrollBar,this)):m.GTimers.inst.add(500,1,this.__showScrollBar,this,t)},y.prototype.__showScrollBar=function(t){this._scrollBarVisible=t&&0<this._viewSize.x&&0<this._viewSize.y,this._vtScrollBar&&(this._vtScrollBar.displayObject.visible=this._scrollBarVisible&&!this._vScrollNone),this._hzScrollBar&&(this._hzScrollBar.displayObject.visible=this._scrollBarVisible&&!this._hScrollNone)},y.prototype.getLoopPartSize=function(t,e){return(this._contentSize[e]+("x"==e?this._owner.columnGap:this._owner.lineGap))/t},y.prototype.loopCheckingCurrent=function(){var t=!1;return 1==this._loop&&0<this._overlapSize.x?this._xPos<.001?(this._xPos+=this.getLoopPartSize(2,"x"),t=!0):this._xPos>=this._overlapSize.x&&(this._xPos-=this.getLoopPartSize(2,"x"),t=!0):2==this._loop&&0<this._overlapSize.y&&(this._yPos<.001?(this._yPos+=this.getLoopPartSize(2,"y"),t=!0):this._yPos>=this._overlapSize.y&&(this._yPos-=this.getLoopPartSize(2,"y"),t=!0)),t&&(this._container.x=Math.floor(-this._xPos),this._container.y=Math.floor(-this._yPos)),t},y.prototype.loopCheckingTarget=function(t){1==this._loop&&this.loopCheckingTarget2(t,"x"),2==this._loop&&this.loopCheckingTarget2(t,"y")},y.prototype.loopCheckingTarget2=function(t,e){var i,n;0<t[e]?(i=this.getLoopPartSize(2,e),(n=this._tweenStart[e]-i)<=0&&n>=-this._overlapSize[e]&&(t[e]-=i,this._tweenStart[e]=n)):t[e]<-this._overlapSize[e]&&(i=this.getLoopPartSize(2,e),(n=this._tweenStart[e]+i)<=0&&n>=-this._overlapSize[e]&&(t[e]+=i,this._tweenStart[e]=n))},y.prototype.loopCheckingNewPos=function(t,e){if(0==this._overlapSize[e])return t;var i,n="x"==e?this._xPos:this._yPos,o=!1;return t<.001?n<(t+=this.getLoopPartSize(2,e))&&(i=this.getLoopPartSize(6,e),i=Math.ceil((t-n)/i)*i,n=m.ToolSet.clamp(n+i,0,this._overlapSize[e]),o=!0):t>=this._overlapSize[e]&&(t-=this.getLoopPartSize(2,e))<n&&(i=this.getLoopPartSize(6,e),i=Math.ceil((n-t)/i)*i,n=m.ToolSet.clamp(n-i,0,this._overlapSize[e]),o=!0),o&&("x"==e?this._container.x=-Math.floor(n):this._container.y=-Math.floor(n)),t},y.prototype.alignPosition=function(t,e){if(this._pageMode)t.x=this.alignByPage(t.x,"x",e),t.y=this.alignByPage(t.y,"y",e);else if(this._snapToItem){var i=this._owner.getSnappingPosition(-t.x,-t.y,y.sHelperPoint);t.x<0&&t.x>-this._overlapSize.x&&(t.x=-i.x),t.y<0&&t.y>-this._overlapSize.y&&(t.y=-i.y)}},y.prototype.alignByPage=function(t,e,i){var n;if(0<t)n=0;else if(t<-this._overlapSize[e])n=Math.ceil(this._contentSize[e]/this._pageSize[e])-1;else{n=Math.floor(-t/this._pageSize[e]);var o=i?t-this._containerPos[e]:t-this._container[e],r=Math.min(this._pageSize[e],this._contentSize[e]-(n+1)*this._pageSize[e]),s=-t-n*this._pageSize[e];Math.abs(o)>this._pageSize[e]?.5*r<s&&n++:r*(o<0?.3:.7)<s&&n++,(t=-n*this._pageSize[e])<-this._overlapSize[e]&&(t=-this._overlapSize[e])}if(i){var a,h=this._tweenStart[e];a=0<h?0:h<-this._overlapSize[e]?Math.ceil(this._contentSize[e]/this._pageSize[e])-1:Math.floor(-h/this._pageSize[e]);var l=Math.floor(-this._containerPos[e]/this._pageSize[e]);1<Math.abs(n-l)&&Math.abs(a-l)<=1&&(t=-(n=l<n?l+1:l-1)*this._pageSize[e])}return t},y.prototype.updateTargetAndDuration=function(t,e){e.x=this.updateTargetAndDuration2(t.x,"x"),e.y=this.updateTargetAndDuration2(t.y,"y")},y.prototype.updateTargetAndDuration2=function(t,e){var i=this._velocity[e],n=0;if(0<t)t=0;else if(t<-this._overlapSize[e])t=-this._overlapSize[e];else{var o=egret.Capabilities.isMobile,r=Math.abs(i)*this._velocityScale;o&&(r*=1136/Math.max(this._owner.displayObject.stage.stageWidth,this._owner.displayObject.stage.stageHeight));var s=0;if(this._pageMode||!o?500<r&&(s=Math.pow((r-500)/500,2)):1e3<r&&(s=Math.pow((r-1e3)/1e3,2)),0!=s)1<s&&(s=1),r*=s,i*=s,this._velocity[e]=i,n=Math.log(60/r)/Math.log(this._decelerationRate)/60,t+=Math.floor(i*n*.4)}return n<y.TWEEN_TIME_DEFAULT&&(n=y.TWEEN_TIME_DEFAULT),this._tweenDuration[e]=n,t},y.prototype.fixDuration=function(t,e){if(!(0==this._tweenChange[t]||Math.abs(this._tweenChange[t])>=Math.abs(e))){var i=Math.abs(this._tweenChange[t]/e)*this._tweenDuration[t];i<y.TWEEN_TIME_DEFAULT&&(i=y.TWEEN_TIME_DEFAULT),this._tweenDuration[t]=i}},y.prototype.killTween=function(){1==this._tweening&&(this._container.x=this._tweenStart.x+this._tweenChange.x,this._container.y=this._tweenStart.y+this._tweenChange.y,this.dispatchEventWith(y.SCROLL)),this._tweening=0,egret.stopTick(this.tweenUpdate,this),this.dispatchEventWith(y.SCROLL_END)},y.prototype.checkRefreshBar=function(){if(null!=this._header||null!=this._footer){var t=this._container[this._refreshBarAxis];if(null!=this._header)if(0<t){null==this._header.displayObject.parent&&this._maskContainer.addChildAt(this._header.displayObject,0);var e=y.sHelperPoint;e.setTo(this._header.width,this._header.height),e[this._refreshBarAxis]=t,this._header.setSize(e.x,e.y)}else null!=this._header.displayObject.parent&&this._maskContainer.removeChild(this._header.displayObject);if(null!=this._footer){var i=this._overlapSize[this._refreshBarAxis];t<-i||0==i&&0<this._footerLockedSize?(null==this._footer.displayObject.parent&&this._maskContainer.addChildAt(this._footer.displayObject,0),(e=y.sHelperPoint).setTo(this._footer.x,this._footer.y),e[this._refreshBarAxis]=0<i?t+this._contentSize[this._refreshBarAxis]:Math.max(Math.min(t+this._viewSize[this._refreshBarAxis],this._viewSize[this._refreshBarAxis]-this._footerLockedSize),this._viewSize[this._refreshBarAxis]-this._contentSize[this._refreshBarAxis]),this._footer.setXY(e.x,e.y),e.setTo(this._footer.width,this._footer.height),e[this._refreshBarAxis]=0<i?-i-t:this._viewSize[this._refreshBarAxis]-this._footer[this._refreshBarAxis],this._footer.setSize(e.x,e.y)):null!=this._footer.displayObject.parent&&this._maskContainer.removeChild(this._footer.displayObject)}}},y.prototype.tweenUpdate=function(t){var e=this.runTween("x"),i=this.runTween("y");return this._container.x=e,this._container.y=i,2==this._tweening&&(0<this._overlapSize.x&&(this._xPos=m.ToolSet.clamp(-e,0,this._overlapSize.x)),0<this._overlapSize.y&&(this._yPos=m.ToolSet.clamp(-i,0,this._overlapSize.y)),this._pageMode&&this.updatePageController()),0==this._tweenChange.x&&0==this._tweenChange.y?(this._tweening=0,egret.stopTick(this.tweenUpdate,this),this.loopCheckingCurrent(),this.syncScrollBar(!0),this.checkRefreshBar(),this.dispatchEventWith(y.SCROLL),this.dispatchEventWith(y.SCROLL_END)):(this.syncScrollBar(!1),this.checkRefreshBar(),this.dispatchEventWith(y.SCROLL)),!0},y.prototype.runTween=function(t){var e;if(0!=this._tweenChange[t]){if(this._tweenTime[t]+=m.GTimers.deltaTime/1e3,this._tweenTime[t]>=this._tweenDuration[t])e=this._tweenStart[t]+this._tweenChange[t],this._tweenChange[t]=0;else{var i=y.easeFunc(this._tweenTime[t],this._tweenDuration[t]);e=this._tweenStart[t]+Math.floor(this._tweenChange[t]*i)}var n=0,o=-this._overlapSize[t];if(0<this._headerLockedSize&&this._refreshBarAxis==t&&(n=this._headerLockedSize),0<this._footerLockedSize&&this._refreshBarAxis==t){var r=this._overlapSize[this._refreshBarAxis];0==r?r=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):r+=this._footerLockedSize,o=-r}2==this._tweening&&this._bouncebackEffect?20+n<e&&0<this._tweenChange[t]||n<e&&0==this._tweenChange[t]?(this._tweenTime[t]=0,this._tweenDuration[t]=y.TWEEN_TIME_DEFAULT,this._tweenChange[t]=-e+n,this._tweenStart[t]=e):(e<o-20&&this._tweenChange[t]<0||e<o&&0==this._tweenChange[t])&&(this._tweenTime[t]=0,this._tweenDuration[t]=y.TWEEN_TIME_DEFAULT,this._tweenChange[t]=o-e,this._tweenStart[t]=e):n<e?(e=n,this._tweenChange[t]=0):e<o&&(e=o,this._tweenChange[t]=0)}else e=this._container[t];return e},y.easeFunc=function(t,e){return(t=t/e-1)*t*t+1},y._gestureFlag=0,y.SCROLL="__scroll",y.SCROLL_END="__scrollEnd",y.PULL_DOWN_RELEASE="pullDownRelease",y.PULL_UP_RELEASE="pullUpRelease",y.TWEEN_TIME_GO=.5,y.TWEEN_TIME_DEFAULT=.3,y.PULL_RATIO=.5,y.sHelperPoint=new egret.Point,y.sHelperRect=new egret.Rectangle,y.sEndPos=new egret.Point,y.sOldChange=new egret.Point,y}(egret.EventDispatcher);m.ScrollPane=t,__reflect(t.prototype,"fairygui.ScrollPane")}(fairygui||(fairygui={})),function(e){var t=function(){function t(){}return t.defaultFont="SimSun",t.modalLayerColor=3355443,t.modalLayerAlpha=.2,t.buttonSoundVolumeScale=1,t.defaultScrollStep=25,t.defaultScrollDecelerationRate=.967,t.defaultScrollBarDisplay=e.ScrollBarDisplayType.Visible,t.defaultScrollTouchEffect=!0,t.defaultScrollBounceEffect=!0,t.defaultComboBoxVisibleItemCount=10,t.touchScrollSensitivity=20,t.touchDragSensitivity=10,t.clickDragSensitivity=2,t.bringWindowToFrontOnClick=!0,t.frameTimeForAsyncUIConstruction=2,t}();e.UIConfig=t,__reflect(t.prototype,"fairygui.UIConfig")}(fairygui||(fairygui={})),function(o){var t=function(){function n(){}return n.setPackageItemExtension=function(t,e){if(null==t)throw"Invaild url: "+t;var i=o.UIPackage.getItemByURL(t);null!=i&&(i.extensionType=e),n.packageItemExtensions[t]=e},n.setLoaderExtension=function(t){n.loaderType=t},n.setTextFieldExtension=function(t){n.textFieldType=t},n.resolvePackageItemExtension=function(t){t.extensionType=n.packageItemExtensions["ui://"+t.owner.id+t.id],t.extensionType||(t.extensionType=n.packageItemExtensions["ui://"+t.owner.name+"/"+t.name])},n.newObject=function(t){return null!=t.extensionType?new t.extensionType:this.newObject2(t.objectType)},n.newObject2=function(t){switch(t){case o.ObjectType.Image:return new o.GImage;case o.ObjectType.MovieClip:return new o.GMovieClip;case o.ObjectType.Component:return new o.GComponent;case o.ObjectType.Text:return null!=n.textFieldType?new n.textFieldType:new o.GTextField;case o.ObjectType.RichText:return new o.GRichTextField;case o.ObjectType.InputText:return new o.GTextInput;case o.ObjectType.Group:return new o.GGroup;case o.ObjectType.List:return new o.GList;case o.ObjectType.Graph:return new o.GGraph;case o.ObjectType.Loader:return null!=n.loaderType?new n.loaderType:new o.GLoader;case o.ObjectType.Button:return new o.GButton;case o.ObjectType.Label:return new o.GLabel;case o.ObjectType.ProgressBar:return new o.GProgressBar;case o.ObjectType.Slider:return new o.GSlider;case o.ObjectType.ScrollBar:return new o.GScrollBar;case o.ObjectType.ComboBox:return new o.GComboBox;default:return null}},n.packageItemExtensions={},n}();o.UIObjectFactory=t,__reflect(t.prototype,"fairygui.UIObjectFactory")}(fairygui||(fairygui={})),function(f){var t=function(){function h(){this._items=new Array,this._itemsById={},this._itemsByName={},this._sprites={}}return h.getById=function(t){return h._packageInstById[t]},h.getByName=function(t){return h._packageInstByName[t]},h.addPackage=function(t,e){if(void 0===e&&(e=null),!e&&!(e=RES.getRes(t)))throw"Resource '"+t+"' not found, please check default.res.json!";var i=new h;return i.loadPackage(new f.ByteBuffer(e),t),h._packageInstById[i.id]=i,(h._packageInstByName[i.name]=i).customId=t,i},h.removePackage=function(t){var e=h._packageInstById[t];e.dispose(),delete h._packageInstById[e.id],null!=e._customId&&delete h._packageInstById[e._customId],delete h._packageInstByName[e.name]},h.createObject=function(t,e,i){void 0===i&&(i=null);var n=h.getByName(t);return n?n.createObject(e,i):null},h.createObjectFromURL=function(t,e){void 0===e&&(e=null);var i=h.getItemByURL(t);return i?i.owner.internalCreateObject(i,e):null},h.getItemURL=function(t,e){var i=h.getByName(t);if(!i)return null;var n=i._itemsByName[e];return n?"ui://"+i.id+n.id:null},h.getItemByURL=function(t){var e=t.indexOf("//");if(-1==e)return null;var i=t.indexOf("/",e+2);if(-1==i){if(13<t.length){var n=t.substr(5,8),o=h.getById(n);if(null!=o){var r=t.substr(13);return o.getItemById(r)}}}else{var s=t.substr(e+2,i-e-2);if(null!=(o=h.getByName(s))){var a=t.substr(i+1);return o.getItemByName(a)}}return null},h.normalizeURL=function(t){if(null==t)return null;var e=t.indexOf("//");if(-1==e)return null;var i=t.indexOf("/",e+2);if(-1==i)return t;var n=t.substr(e+2,i-e-2),o=t.substr(i+1);return h.getItemURL(n,o)},h.setStringsSource=function(t){f.TranslationHelper.loadFromXML(t)},h.prototype.loadPackage=function(t,e){if(1179080009!=t.readUnsignedInt())throw"FairyGUI: old package format found in '"+e+"'";t.version=t.readInt();var i=t.readBool();if(this._id=t.readUTF(),this._name=t.readUTF(),t.skip(20),i){var n=new Uint8Array(t.buffer,t.position,t.length-t.position),o=new Zlib.RawInflate(n);t=new f.ByteBuffer(o.decompress())}var r,s,a,h=t.position;t.seek(h,4),r=t.readInt();var l,c=new Array(r);for(c.reduceRight,s=0;s<r;s++)c[s]=t.readUTF();for(t.stringTable=c,t.seek(h,1),e+="_",r=t.readShort(),s=0;s<r;s++){switch(a=t.readInt(),a+=t.position,(l=new f.PackageItem).owner=this,l.type=t.readByte(),l.id=t.readS(),l.name=t.readS(),t.readS(),l.file=t.readS(),t.readBool(),l.width=t.readInt(),l.height=t.readInt(),l.type){case f.PackageItemType.Image:l.objectType=f.ObjectType.Image;var _=t.readByte();1==_?(l.scale9Grid=new egret.Rectangle,l.scale9Grid.x=t.readInt(),l.scale9Grid.y=t.readInt(),l.scale9Grid.width=t.readInt(),l.scale9Grid.height=t.readInt(),l.tileGridIndice=t.readInt()):2==_&&(l.scaleByTile=!0),l.smoothing=t.readBool();break;case f.PackageItemType.MovieClip:l.smoothing=t.readBool(),l.objectType=f.ObjectType.MovieClip,l.rawData=t.readBuffer();break;case f.PackageItemType.Font:l.rawData=t.readBuffer();break;case f.PackageItemType.Component:var u=t.readByte();l.objectType=0<u?u:f.ObjectType.Component,l.rawData=t.readBuffer(),f.UIObjectFactory.resolvePackageItemExtension(l);break;case f.PackageItemType.Atlas:case f.PackageItemType.Sound:case f.PackageItemType.Misc:l.file=e+f.ToolSet.getFileName(l.file)}this._items.push(l),null!=(this._itemsById[l.id]=l).name&&(this._itemsByName[l.name]=l),t.position=a}for(t.seek(h,2),r=t.readShort(),s=0;s<r;s++){a=t.readShort(),a+=t.position;var p=t.readS();l=this._itemsById[t.readS()];var d=new g;d.atlas=l,d.rect.x=t.readInt(),d.rect.y=t.readInt(),d.rect.width=t.readInt(),d.rect.height=t.readInt(),d.rotated=t.readBool(),this._sprites[p]=d,t.position=a}t.seek(h,3)},h.prototype.dispose=function(){for(var t=this._items.length,e=0;e<t;e++){var i=this._items[e],n=i.texture;if(null!=n)n.dispose();else if(null!=i.frames)for(var o=i.frames.length,r=0;r<o;r++)null!=(n=i.frames[r].texture)&&n.dispose()}},Object.defineProperty(h.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"customId",{get:function(){return this._customId},set:function(t){null!=this._customId&&delete h._packageInstById[this._customId],this._customId=t,null!=this._customId&&(h._packageInstById[this._customId]=this)},enumerable:!0,configurable:!0}),h.prototype.createObject=function(t,e){void 0===e&&(e=null);var i=this._itemsByName[t];return i?this.internalCreateObject(i,e):null},h.prototype.internalCreateObject=function(t,e){var i;return void 0===e&&(e=null),null==(i=t.type==f.PackageItemType.Component&&null!=e?new e:f.UIObjectFactory.newObject(t))?null:(h._constructing++,i.packageItem=t,i.constructFromResource(),h._constructing--,i)},h.prototype.getItemById=function(t){return this._itemsById[t]},h.prototype.getItemByName=function(t){return this._itemsByName[t]},h.prototype.getItemAssetByName=function(t){var e=this._itemsByName[t];if(null==e)throw"Resource not found -"+t;return this.getItemAsset(e)},h.prototype.getItemAsset=function(t){switch(t.type){case f.PackageItemType.Image:if(!t.decoded){t.decoded=!0;var e=this._sprites[t.id];null!=e&&(t.texture=this.createSpriteTexture(e))}return t.texture;case f.PackageItemType.Atlas:return t.decoded||(t.decoded=!0,t.texture=RES.getRes(t.file),t.texture||console.log("Resource '"+t.file+"' not found, please check default.res.json!")),t.texture;case f.PackageItemType.Sound:return t.decoded||(t.decoded=!0,t.sound=RES.getRes(t.file),t.sound||console.log("Resource '"+t.file+"' not found, please check default.res.json!")),t.sound;case f.PackageItemType.Font:return t.decoded||(t.decoded=!0,this.loadFont(t)),t.bitmapFont;case f.PackageItemType.MovieClip:return t.decoded||(t.decoded=!0,this.loadMovieClip(t)),t.frames;case f.PackageItemType.Misc:return t.file?RES.getRes(t.file):null;default:return null}},h.prototype.createSpriteTexture=function(t){var e=this.getItemAsset(t.atlas);return null==e?null:this.createSubTexture(e,t.rect)},h.prototype.createSubTexture=function(t,e){var i=new egret.Texture;return t._bitmapData?(i._bitmapData=t._bitmapData,i.$initData(t._bitmapX+e.x,t._bitmapY+e.y,e.width,e.height,0,0,e.width,e.height,t._sourceWidth,t._sourceHeight)):(i.bitmapData=t.bitmapData,i.$initData(t.$bitmapX+e.x,t.$bitmapY+e.y,e.width,e.height,0,0,e.width,e.height,t.$sourceWidth,t.$sourceHeight)),i},h.prototype.loadMovieClip=function(t){var e=t.rawData;e.seek(0,0),t.interval=e.readInt(),t.swing=e.readBool(),t.repeatDelay=e.readInt(),e.seek(0,1);var i,n,o,r=e.readShort();t.frames=Array(r);for(var s=0;s<r;s++){var a=e.readShort();a+=e.position,(n=new f.Frame).rect.x=e.readInt(),n.rect.y=e.readInt(),n.rect.width=e.readInt(),n.rect.height=e.readInt(),n.addDelay=e.readInt(),null!=(i=e.readS())&&null!=(o=this._sprites[i])&&(n.texture=this.createSpriteTexture(o)),t.frames[s]=n,e.position=a}},h.prototype.loadFont=function(t){var e=new f.BitmapFont;t.bitmapFont=e;var i=t.rawData;i.seek(0,0),e.ttf=i.readBool(),i.readBool(),e.resizable=i.readBool(),i.readBool(),e.size=i.readInt();var n=i.readInt(),o=i.readInt(),r=null,s=this._sprites[t.id];null!=s&&(r=this.getItemAsset(s.atlas)),i.seek(0,1);for(var a=null,h=i.readInt(),l=0;l<h;l++){var c=i.readShort();c+=i.position,a=new f.BMGlyph;var _=i.readChar();e.glyphs[_]=a;var u=i.readS(),p=i.readInt(),d=i.readInt();if(a.offsetX=i.readInt(),a.offsetY=i.readInt(),a.width=i.readInt(),a.height=i.readInt(),a.advance=i.readInt(),a.channel=i.readByte(),1==a.channel?a.channel=3:2==a.channel?a.channel=2:3==a.channel&&(a.channel=1),e.ttf)a.texture=this.createSubTexture(r,new egret.Rectangle(p+s.rect.x,d+s.rect.y,a.width,a.height));else{var g=this._itemsById[u];g&&(this.getItemAsset(g),a.width=g.width,a.height=g.height,a.texture=g.texture)}e.ttf?a.lineHeight=o:(0==a.advance&&(a.advance=0==n?a.offsetX+a.width:n),a.lineHeight=a.offsetY<0?a.height:a.offsetY+a.height,a.lineHeight<e.size&&(a.lineHeight=e.size)),i.position=c}},h._constructing=0,h._packageInstById={},h._packageInstByName={},h}();f.UIPackage=t,__reflect(t.prototype,"fairygui.UIPackage");var g=function(){this.rect=new egret.Rectangle};__reflect(g.prototype,"AtlasSprite")}(fairygui||(fairygui={})),function(i){var t=function(e){function t(){var t=e.call(this)||this;return t._requestingCmd=0,t.focusable=!0,t._uiSources=new Array,t.bringToFontOnClick=i.UIConfig.bringWindowToFrontOnClick,t.displayObject.addEventListener(egret.Event.ADDED_TO_STAGE,t.__onShown,t),t.displayObject.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.__onHidden,t),t.displayObject.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.__mouseDown,t,!0),t}return __extends(t,e),t.prototype.addUISource=function(t){this._uiSources.push(t)},Object.defineProperty(t.prototype,"contentPane",{get:function(){return this._contentPane},set:function(t){this._contentPane!=t&&(null!=this._contentPane&&this.removeChild(this._contentPane),this._contentPane=t,null!=this._contentPane&&(this.addChild(this._contentPane),this.setSize(this._contentPane.width,this._contentPane.height),this._contentPane.addRelation(this,i.RelationType.Size),this._frame=this._contentPane.getChild("frame"),null!=this._frame&&(this.closeButton=this._frame.getChild("closeButton"),this.dragArea=this._frame.getChild("dragArea"),this.contentArea=this._frame.getChild("contentArea"))))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeButton",{get:function(){return this._closeButton},set:function(t){null!=this._closeButton&&this._closeButton.removeClickListener(this.closeEventHandler,this),this._closeButton=t,null!=this._closeButton&&this._closeButton.addClickListener(this.closeEventHandler,this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dragArea",{get:function(){return this._dragArea},set:function(t){this._dragArea!=t&&(null!=this._dragArea&&(this._dragArea.draggable=!1,this._dragArea.removeEventListener(i.DragEvent.DRAG_START,this.__dragStart,this)),this._dragArea=t,null!=this._dragArea&&(this._dragArea instanceof i.GGraph&&null==this._dragArea.displayObject&&this._dragArea.asGraph.drawRect(0,0,0,0,0),this._dragArea.draggable=!0,this._dragArea.addEventListener(i.DragEvent.DRAG_START,this.__dragStart,this)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentArea",{get:function(){return this._contentArea},set:function(t){this._contentArea=t},enumerable:!0,configurable:!0}),t.prototype.show=function(){i.GRoot.inst.showWindow(this)},t.prototype.showOn=function(t){t.showWindow(this)},t.prototype.hide=function(){this.isShowing&&this.doHideAnimation()},t.prototype.hideImmediately=function(){var t=this.parent instanceof i.GRoot?this.parent:null;t||(t=i.GRoot.inst),t.hideWindowImmediately(this)},t.prototype.centerOn=function(t,e){void 0===e&&(e=!1),this.setXY(Math.round((t.width-this.width)/2),Math.round((t.height-this.height)/2)),e&&(this.addRelation(t,i.RelationType.Center_Center),this.addRelation(t,i.RelationType.Middle_Middle))},t.prototype.toggleStatus=function(){this.isTop?this.hide():this.show()},Object.defineProperty(t.prototype,"isShowing",{get:function(){return null!=this.parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isTop",{get:function(){return null!=this.parent&&this.parent.getChildIndex(this)==this.parent.numChildren-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modal",{get:function(){return this._modal},set:function(t){this._modal=t},enumerable:!0,configurable:!0}),t.prototype.bringToFront=function(){this.root.bringToFront(this)},t.prototype.showModalWait=function(t){void 0===t&&(t=0),0!=t&&(this._requestingCmd=t),i.UIConfig.windowModalWaiting&&(this._modalWaitPane||(this._modalWaitPane=i.UIPackage.createObjectFromURL(i.UIConfig.windowModalWaiting)),this.layoutModalWaitPane(),this.addChild(this._modalWaitPane))},t.prototype.layoutModalWaitPane=function(){if(null!=this._contentArea){var t=this._frame.localToGlobal();t=this.globalToLocal(t.x,t.y,t),this._modalWaitPane.setXY(t.x+this._contentArea.x,t.y+this._contentArea.y),this._modalWaitPane.setSize(this._contentArea.width,this._contentArea.height)}else this._modalWaitPane.setSize(this.width,this.height)},t.prototype.closeModalWait=function(t){return void 0===t&&(t=0),(0==t||this._requestingCmd==t)&&(this._requestingCmd=0,this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.removeChild(this._modalWaitPane),!0)},Object.defineProperty(t.prototype,"modalWaiting",{get:function(){return this._modalWaitPane&&null!=this._modalWaitPane.parent},enumerable:!0,configurable:!0}),t.prototype.init=function(){if(!this._inited&&!this._loading)if(0<this._uiSources.length){this._loading=!1;for(var t=this._uiSources.length,e=0;e<t;e++){var i=this._uiSources[e];i.loaded||(i.load(this.__uiLoadComplete,this),this._loading=!0)}this._loading||this._init()}else this._init()},t.prototype.onInit=function(){},t.prototype.onShown=function(){},t.prototype.onHide=function(){},t.prototype.doShowAnimation=function(){this.onShown()},t.prototype.doHideAnimation=function(){this.hideImmediately()},t.prototype.__uiLoadComplete=function(){for(var t=this._uiSources.length,e=0;e<t;e++){if(!this._uiSources[e].loaded)return}this._loading=!1,this._init()},t.prototype._init=function(){this._inited=!0,this.onInit(),this.isShowing&&this.doShowAnimation()},t.prototype.dispose=function(){this.displayObject.removeEventListener(egret.Event.ADDED_TO_STAGE,this.__onShown,this),this.displayObject.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.__onHidden,this),null!=this.parent&&this.hideImmediately(),e.prototype.dispose.call(this)},t.prototype.closeEventHandler=function(t){this.hide()},t.prototype.__onShown=function(t){this._inited?this.doShowAnimation():this.init()},t.prototype.__onHidden=function(t){this.closeModalWait(),this.onHide()},t.prototype.__mouseDown=function(t){this.isShowing&&this.bringToFontOnClick&&this.bringToFront()},t.prototype.__dragStart=function(t){t.preventDefault(),this.startDrag(t.touchPointID)},t}(i.GComponent);i.Window=t,__reflect(t.prototype,"fairygui.Window")}(fairygui||(fairygui={})),function(r){var t=function(){function t(){this._agent=new r.GLoader,this._agent.draggable=!0,this._agent.touchable=!1,this._agent.setSize(100,100),this._agent.setPivot(.5,.5,!0),this._agent.align=r.AlignType.Center,this._agent.verticalAlign=r.VertAlignType.Middle,this._agent.sortingOrder=1e6,this._agent.addEventListener(r.DragEvent.DRAG_END,this.__dragEnd,this)}return Object.defineProperty(t,"inst",{get:function(){return null==t._inst&&(t._inst=new t),t._inst},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dragAgent",{get:function(){return this._agent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dragging",{get:function(){return null!=this._agent.parent},enumerable:!0,configurable:!0}),t.prototype.startDrag=function(t,e,i,n){if(void 0===n&&(n=-1),null==this._agent.parent){this._sourceData=i,this._agent.url=e,r.GRoot.inst.addChild(this._agent);var o=r.GRoot.inst.globalToLocal(r.GRoot.mouseX,r.GRoot.mouseY);this._agent.setXY(o.x,o.y),this._agent.startDrag(n)}},t.prototype.cancel=function(){null!=this._agent.parent&&(this._agent.stopDrag(),r.GRoot.inst.removeChild(this._agent),this._sourceData=null)},t.prototype.__dragEnd=function(t){if(null!=this._agent.parent){r.GRoot.inst.removeChild(this._agent);var e=this._sourceData;this._sourceData=null;for(var i=r.GRoot.inst.getObjectUnderPoint(t.stageX,t.stageY);null!=i;){if(i.hasEventListener(r.DropEvent.DROP)){var n=new r.DropEvent(r.DropEvent.DROP,e);return i.requestFocus(),void i.dispatchEvent(n)}i=i.parent}}},t}();r.DragDropManager=t,__reflect(t.prototype,"fairygui.DragDropManager")}(fairygui||(fairygui={})),function(u){var t=function(){function t(){this._itemList=new Array,this._objectPool=new Array}return t.prototype.createObject=function(t,e){var i=u.UIPackage.getByName(t);if(!i)throw new Error("package not found: "+t);var n=i.getItemByName(e);if(!n)throw new Error("resource not found: "+e);this.internalCreateObject(n)},t.prototype.createObjectFromURL=function(t){var e=u.UIPackage.getItemByURL(t);if(!e)throw new Error("resource not found: "+t);this.internalCreateObject(e)},t.prototype.cancel=function(){u.GTimers.inst.remove(this.run,this),this._itemList.length=0;var t=this._objectPool.length;if(0<t){for(var e=0;e<t;e++)this._objectPool[e].dispose();this._objectPool.length=0}},t.prototype.internalCreateObject=function(t){this._itemList.length=0,this._objectPool.length=0;var e=new p(t,0);e.childCount=this.collectComponentChildren(t),this._itemList.push(e),this._index=0,u.GTimers.inst.add(1,0,this.run,this)},t.prototype.collectComponentChildren=function(t){var e,i,n,o,r,s,a=t.rawData;a.seek(0,2);var h=a.readShort();for(n=0;n<h;n++){o=a.readShort(),r=a.position,a.seek(r,0);var l=a.readByte(),c=a.readS(),_=a.readS();a.position=r,null!=c?(i=null!=(s=null!=_?u.UIPackage.getById(_):t.owner)?s.getItemById(c):null,e=new p(i,l),null!=i&&i.type==u.PackageItemType.Component&&(e.childCount=this.collectComponentChildren(i))):(e=new p(null,l),l==u.ObjectType.List&&(e.listItemCount=this.collectListChildren(a))),this._itemList.push(e),a.position=r+o}return h},t.prototype.collectListChildren=function(t){t.seek(t.position,8);var e,i,n,o,r,s=0,a=t.readS(),h=t.readShort();for(e=0;e<h;e++)i=t.readShort(),i+=t.position,null==(n=t.readS())&&(n=a),n&&null!=(o=u.UIPackage.getItemByURL(n))&&(r=new p(o,o.objectType),o.type==u.PackageItemType.Component&&(r.childCount=this.collectComponentChildren(o)),this._itemList.push(r),s++),t.position=i;return s},t.prototype.run=function(){for(var t,e,i,n,o=egret.getTimer(),r=u.UIConfig.frameTimeForAsyncUIConstruction,s=this._itemList.length;this._index<s;){if(null!=(e=this._itemList[this._index]).packageItem)(t=u.UIObjectFactory.newObject(e.packageItem)).packageItem=e.packageItem,this._objectPool.push(t),u.UIPackage._constructing++,e.packageItem.type==u.PackageItemType.Component?(i=this._objectPool.length-e.childCount-1,t.constructFromResource2(this._objectPool,i),this._objectPool.splice(i,e.childCount)):t.constructFromResource(),u.UIPackage._constructing--;else if(t=u.UIObjectFactory.newObject2(e.type),this._objectPool.push(t),e.type==u.ObjectType.List&&0<e.listItemCount){for(i=this._objectPool.length-e.listItemCount-1,n=0;n<e.listItemCount;n++)t.itemPool.returnObject(this._objectPool[n+i]);this._objectPool.splice(i,e.listItemCount)}if(this._index++,this._index%5==0&&egret.getTimer()-o>=r)return}u.GTimers.inst.remove(this.run,this);var a=this._objectPool[0];this._itemList.length=0,this._objectPool.length=0,null!=this.callback&&this.callback.call(this.callbackObj,a)},t}();u.AsyncOperation=t,__reflect(t.prototype,"fairygui.AsyncOperation");var p=function(t,e){this.packageItem=t,this.type=e};__reflect(p.prototype,"DisplayListItem")}(fairygui||(fairygui={})),function(y){var t=function(){function f(){}return f.loadFromXML=function(t){f.strings={};for(var e=egret.XML.parse(t).children,i=e.length,n=0;n<i;n++){var o=e[n];if("string"==o.name){var r=o.attributes.name,s=0<o.children.length?o.children[0].text:"",a=r.indexOf("-");if(-1==a)continue;var h=r.substr(0,a),l=r.substr(a+1),c=f.strings[h];c||(c={},f.strings[h]=c),c[l]=s}}},f.translateComponent=function(t){if(null!=f.strings){var e=f.strings[t.owner.id+t.id];if(null!=e){var i,n,o,r,s,a,h,l,c,_,u=t.rawData;u.seek(0,2);var p=u.readShort();for(s=0;s<p;s++){l=u.readShort(),c=u.position,u.seek(c,0);var d=u.readByte();u.skip(4),i=u.readS(),d==y.ObjectType.Component&&u.seek(c,6)&&(d=u.readByte()),u.seek(c,1),null!=(n=e[i+"-tips"])&&u.writeS(n),u.seek(c,2);var g=u.readShort();for(a=0;a<g;a++){if(o=u.readShort(),o+=u.position,6==u.readByte()){for(u.skip(2),_=u.readShort(),h=0;h<_;h++)null!=u.readS()&&(null!=(n=e[i+"-texts_"+h])?u.writeS(n):u.skip(2));u.readBool()&&null!=(n=e[i+"-texts_def"])&&u.writeS(n)}u.position=o}switch(d){case y.ObjectType.Text:case y.ObjectType.RichText:case y.ObjectType.InputText:null!=(n=e[i])&&(u.seek(c,6),u.writeS(n)),null!=(n=e[i+"-prompt"])&&(u.seek(c,4),u.writeS(n));break;case y.ObjectType.List:for(u.seek(c,8),u.skip(2),r=u.readShort(),a=0;a<r;a++)o=u.readShort(),o+=u.position,u.skip(2),null!=(n=e[i+"-"+a])?u.writeS(n):u.skip(2),null!=(n=e[i+"-"+a+"-0"])&&u.writeS(n),u.position=o;break;case y.ObjectType.Label:u.seek(c,6)&&u.readByte()==d&&(null!=(n=e[i])?u.writeS(n):u.skip(2),u.skip(2),u.readBool()&&u.skip(4),u.skip(4),u.readBool()&&null!=(n=e[i+"-prompt"])&&u.writeS(n));break;case y.ObjectType.Button:u.seek(c,6)&&u.readByte()==d&&(null!=(n=e[i])?u.writeS(n):u.skip(2),null!=(n=e[i+"-0"])&&u.writeS(n));break;case y.ObjectType.ComboBox:if(u.seek(c,6)&&u.readByte()==d){for(r=u.readShort(),a=0;a<r;a++)o=u.readShort(),o+=u.position,null!=(n=e[i+"-"+a])&&u.writeS(n),u.position=o;null!=(n=e[i])&&u.writeS(n)}}u.position=c+l}}}},f.strings=null,f}();y.TranslationHelper=t,__reflect(t.prototype,"fairygui.TranslationHelper")}(fairygui||(fairygui={})),function(t){var e=function(n){function i(t,e){var i=n.call(this,t,e)||this;return i.stringTable=null,i.version=0,i}return __extends(i,n),i.prototype.skip=function(t){this.position+=t},i.prototype.readBool=function(){return 1==this.readByte()},i.prototype.readS=function(){var t=this.readUnsignedShort();return 65534==t?null:65533==t?"":this.stringTable[t]},i.prototype.writeS=function(t){var e=this.readUnsignedShort();65534!=e&&65533!=e&&(this.stringTable[e]=t)},i.prototype.readColor=function(t){void 0===t&&(t=!1);var e=this.readUnsignedByte(),i=this.readUnsignedByte(),n=this.readUnsignedByte(),o=this.readUnsignedByte();return(t?o<<24:0)+(e<<16)+(i<<8)+n},i.prototype.readChar=function(){var t=this.readUnsignedShort();return String.fromCharCode(t)},i.prototype.readBuffer=function(){var t=this.readUnsignedInt(),e=new i(new Uint8Array(this.buffer,this.position,t));return e.stringTable=this.stringTable,e.version=this.version,e},i.prototype.seek=function(t,e){var i,n=this.position;return this.position=t,e<this.readByte()?(1==this.readByte()?(this.position+=2*e,i=this.readUnsignedShort()):(this.position+=4*e,i=this.readUnsignedInt()),0<i?(this.position=t+i,!0):(this.position=n,!1)):(this.position=n,!1)},i}(egret.ByteArray);t.ByteBuffer=e,__reflect(e.prototype,"fairygui.ByteBuffer")}(fairygui||(fairygui={}));