var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i};if(void 0===global)var global=window;if(void 0===__global)var __global=global;var __define=this&&this.__define||function(t,e,i,r){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:i,set:r})};!function(e){e.$hashCount=1;var t=function(){function t(){this.$hashCode=e.$hashCount++}return Object.defineProperty(t.prototype,"hashCode",{get:function(){return this.$hashCode},enumerable:!0,configurable:!0}),t}();e.HashObject=t,__reflect(t.prototype,"egret.HashObject",["egret.IHashObject"])}(egret||(egret={})),function(c){var h=[],t=function(i){function t(t){void 0===t&&(t=null);var e=i.call(this)||this;return e.$EventDispatcher={0:t||e,1:{},2:{},3:0},e}return __extends(t,i),t.prototype.$getEventMap=function(t){var e=this.$EventDispatcher;return t?e[2]:e[1]},t.prototype.addEventListener=function(t,e,i,r,n){this.$addListener(t,e,i,r,n)},t.prototype.once=function(t,e,i,r,n){this.$addListener(t,e,i,r,n,!0)},t.prototype.$addListener=function(t,e,i,r,n,a){e||c.$error(1003,"listener");var o=this.$EventDispatcher,s=r?o[2]:o[1],h=s[t];h?0!==o[3]&&(s[t]=h=h.concat()):h=s[t]=[],this.$insertEventBin(h,t,e,i,r,n,a)},t.prototype.$insertEventBin=function(t,e,i,r,n,a,o){a=0|+a;for(var s=-1,h=t.length,c=0;c<h;c++){var l=t[c];if(l.listener==i&&l.thisObject==r&&l.target==this)return!1;-1==s&&l.priority<a&&(s=c)}var u={type:e,listener:i,thisObject:r,priority:a,target:this,useCapture:n,dispatchOnce:!!o};return-1!==s?t.splice(s,0,u):t.push(u),!0},t.prototype.removeEventListener=function(t,e,i,r){var n=this.$EventDispatcher,a=r?n[2]:n[1],o=a[t];o&&(0!==n[3]&&(a[t]=o=o.concat()),this.$removeEventBin(o,e,i),0==o.length&&(a[t]=null))},t.prototype.$removeEventBin=function(t,e,i){for(var r=t.length,n=0;n<r;n++){var a=t[n];if(a.listener==e&&a.thisObject==i&&a.target==this)return t.splice(n,1),!0}return!1},t.prototype.hasEventListener=function(t){var e=this.$EventDispatcher;return!(!e[1][t]&&!e[2][t])},t.prototype.willTrigger=function(t){return this.hasEventListener(t)},t.prototype.dispatchEvent=function(t){return t.$currentTarget=this.$EventDispatcher[0],t.$setTarget(t.$currentTarget),this.$notifyListener(t,!1)},t.prototype.$notifyListener=function(t,e){var i=this.$EventDispatcher,r=(e?i[2]:i[1])[t.$type];if(!r)return!0;var n=r.length;if(0==n)return!0;var a=h;i[3]++;for(var o=0;o<n;o++){if((s=r[o]).listener.call(s.thisObject,t),s.dispatchOnce&&a.push(s),t.$isPropagationImmediateStopped)break}for(i[3]--;a.length;){var s;(s=a.pop()).target.removeEventListener(s.type,s.listener,s.thisObject,s.useCapture)}return!t.$isDefaultPrevented},t.prototype.dispatchEventWith=function(t,e,i,r){if(e||this.hasEventListener(t)){var n=c.Event.create(c.Event,t,e,r);n.data=i;var a=this.dispatchEvent(n);return c.Event.release(n),a}return!0},t}(c.HashObject);c.EventDispatcher=t,__reflect(t.prototype,"egret.EventDispatcher",["egret.IEventDispatcher"])}(egret||(egret={})),function(i){var t=function(e){function t(){var t=e.call(this)||this;return t.type=null,t.$id=null,t.paddingTop=0,t.paddingBottom=0,t.paddingLeft=0,t.paddingRight=0,t.$uniforms={},i.nativeRender&&egret_native.NativeDisplayObject.createFilter(t),t}return __extends(t,e),t.prototype.$toJson=function(){return""},t.prototype.updatePadding=function(){},t.prototype.onPropertyChange=function(){var t=this;t.updatePadding(),i.nativeRender&&(egret_native.NativeDisplayObject.setFilterPadding(t.$id,t.paddingTop,t.paddingBottom,t.paddingLeft,t.paddingRight),egret_native.NativeDisplayObject.setDataToFilter(t))},t}(i.HashObject);i.Filter=t,__reflect(t.prototype,"egret.Filter")}(egret||(egret={})),function(y){function a(t){return 180<(t%=360)?t-=360:t<-180&&(t+=360),t}var t=function(h){function c(){var t=h.call(this)||this;return t.$children=null,t.$name="",t.$parent=null,t.$stage=null,t.$nestLevel=0,t.$useTranslate=!1,t.$matrix=new y.Matrix,t.$matrixDirty=!1,t.$x=0,t.$y=0,t.$scaleX=1,t.$scaleY=1,t.$rotation=0,t.$skewX=0,t.$skewXdeg=0,t.$skewY=0,t.$skewYdeg=0,t.$explicitWidth=NaN,t.$explicitHeight=NaN,t.$anchorOffsetX=0,t.$anchorOffsetY=0,t.$visible=!0,t.$displayList=null,t.$cacheAsBitmap=!1,t.$cacheDirty=!1,t.$alpha=1,t.$touchEnabled=c.defaultTouchEnabled,t.$scrollRect=null,t.$blendMode=0,t.$maskedObject=null,t.$mask=null,t.$maskRect=null,t.$parentDisplayList=null,t.$renderNode=null,t.$renderDirty=!1,t.$renderMode=null,y.nativeRender&&t.createNativeDisplayObject(),t}return __extends(c,h),c.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(0)},Object.defineProperty(c.prototype,"name",{get:function(){return this.$name},set:function(t){this.$name=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"parent",{get:function(){return this.$parent},enumerable:!0,configurable:!0}),c.prototype.$setParent=function(t){this.$parent=t},c.prototype.$onAddToStage=function(t,e){this.$stage=t,this.$nestLevel=e,this.$hasAddToStage=!0,y.Sprite.$EVENT_ADD_TO_STAGE_LIST.push(this)},c.prototype.$onRemoveFromStage=function(){this.$nestLevel=0,y.Sprite.$EVENT_REMOVE_FROM_STAGE_LIST.push(this)},c.prototype.$updateUseTransform=function(){var t=this;1==t.$scaleX&&1==t.$scaleY&&0==t.$skewX&&0==t.$skewY?t.$useTranslate=!1:t.$useTranslate=!0},Object.defineProperty(c.prototype,"stage",{get:function(){return this.$stage},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"matrix",{get:function(){return this.$getMatrix().clone()},set:function(t){this.$setMatrix(t)},enumerable:!0,configurable:!0}),c.prototype.$getMatrix=function(){var t=this;return t.$matrixDirty&&(t.$matrixDirty=!1,t.$matrix.$updateScaleAndRotation(t.$scaleX,t.$scaleY,t.$skewX,t.$skewY)),t.$matrix.tx=t.$x,t.$matrix.ty=t.$y,t.$matrix},c.prototype.$setMatrix=function(t,e){void 0===e&&(e=!0);var i=this,r=i.$matrix;r.a=t.a,r.b=t.b,r.c=t.c,r.d=t.d,i.$x=t.tx,i.$y=t.ty,i.$matrixDirty=!1,1==r.a&&0==r.b&&0==r.c&&1==r.d?i.$useTranslate=!1:i.$useTranslate=!0,e&&(i.$scaleX=r.$getScaleX(),i.$scaleY=r.$getScaleY(),i.$skewX=t.$getSkewX(),i.$skewY=t.$getSkewY(),i.$skewXdeg=a(180*i.$skewX/Math.PI),i.$skewYdeg=a(180*i.$skewY/Math.PI),i.$rotation=a(180*i.$skewY/Math.PI)),y.nativeRender&&i.$nativeDisplayObject.setMatrix(t.a,t.b,t.c,t.d,t.tx,t.ty)},c.prototype.$getConcatenatedMatrix=function(){var t=this,e=t.$concatenatedMatrix;e||(e=t.$concatenatedMatrix=new y.Matrix),t.$parent?t.$parent.$getConcatenatedMatrix().$preMultiplyInto(t.$getMatrix(),e):e.copyFrom(t.$getMatrix());var i=t.$anchorOffsetX,r=t.$anchorOffsetY,n=t.$scrollRect;return n?e.$preMultiplyInto(y.$TempMatrix.setTo(1,0,0,1,-n.x-i,-n.y-r),e):0==i&&0==r||e.$preMultiplyInto(y.$TempMatrix.setTo(1,0,0,1,-i,-r),e),t.$concatenatedMatrix},c.prototype.$getInvertedConcatenatedMatrix=function(){var t=this;return t.$invertedConcatenatedMatrix||(t.$invertedConcatenatedMatrix=new y.Matrix),t.$getConcatenatedMatrix().$invertInto(t.$invertedConcatenatedMatrix),t.$invertedConcatenatedMatrix},Object.defineProperty(c.prototype,"x",{get:function(){return this.$getX()},set:function(t){this.$setX(t)},enumerable:!0,configurable:!0}),c.prototype.$getX=function(){return this.$x},c.prototype.$setX=function(t){var e=this;if(e.$x==t)return!1;if(e.$x=t,y.nativeRender)e.$nativeDisplayObject.setX(t);else{var i=e.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=e.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}return!0},Object.defineProperty(c.prototype,"y",{get:function(){return this.$getY()},set:function(t){this.$setY(t)},enumerable:!0,configurable:!0}),c.prototype.$getY=function(){return this.$y},c.prototype.$setY=function(t){var e=this;if(e.$y==t)return!1;if(e.$y=t,y.nativeRender)e.$nativeDisplayObject.setY(t);else{var i=e.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=e.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}return!0},Object.defineProperty(c.prototype,"scaleX",{get:function(){return this.$getScaleX()},set:function(t){this.$setScaleX(t)},enumerable:!0,configurable:!0}),c.prototype.$getScaleX=function(){return this.$scaleX},c.prototype.$setScaleX=function(t){var e=this;if(e.$scaleX!=t)if(e.$scaleX=t,e.$matrixDirty=!0,e.$updateUseTransform(),y.nativeRender)e.$nativeDisplayObject.setScaleX(t);else{var i=e.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=e.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(c.prototype,"scaleY",{get:function(){return this.$getScaleY()},set:function(t){this.$setScaleY(t)},enumerable:!0,configurable:!0}),c.prototype.$getScaleY=function(){return this.$scaleY},c.prototype.$setScaleY=function(t){var e=this;if(e.$scaleY!=t)if(e.$scaleY=t,e.$matrixDirty=!0,e.$updateUseTransform(),y.nativeRender)e.$nativeDisplayObject.setScaleY(t);else{var i=e.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=e.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(c.prototype,"rotation",{get:function(){return this.$getRotation()},set:function(t){this.$setRotation(t)},enumerable:!0,configurable:!0}),c.prototype.$getRotation=function(){return this.$rotation},c.prototype.$setRotation=function(t){var e=this;if((t=a(t))!=e.$rotation){var i=(t-e.$rotation)/180*Math.PI;if(e.$skewX+=i,e.$skewY+=i,e.$rotation=t,e.$matrixDirty=!0,e.$updateUseTransform(),y.nativeRender)e.$nativeDisplayObject.setRotation(t);else{var r=e.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=e.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}}},Object.defineProperty(c.prototype,"skewX",{get:function(){return this.$skewXdeg},set:function(t){this.$setSkewX(t)},enumerable:!0,configurable:!0}),c.prototype.$setSkewX=function(t){var e=this;if(t!=e.$skewXdeg)if(t=(t=a(e.$skewXdeg=t))/180*Math.PI,e.$skewX=t,e.$matrixDirty=!0,e.$updateUseTransform(),y.nativeRender)e.$nativeDisplayObject.setSkewX(e.$skewXdeg);else{var i=e.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=e.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(c.prototype,"skewY",{get:function(){return this.$skewYdeg},set:function(t){this.$setSkewY(t)},enumerable:!0,configurable:!0}),c.prototype.$setSkewY=function(t){var e=this;if(t!=e.$skewYdeg)if(t=(t=a(e.$skewYdeg=t))/180*Math.PI,e.$skewY=t,e.$matrixDirty=!0,e.$updateUseTransform(),y.nativeRender)e.$nativeDisplayObject.setSkewY(e.$skewYdeg);else{var i=e.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=e.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(c.prototype,"width",{get:function(){return this.$getWidth()},set:function(t){this.$setWidth(t)},enumerable:!0,configurable:!0}),c.prototype.$getWidth=function(){return isNaN(this.$explicitWidth)?this.$getOriginalBounds().width:this.$explicitWidth},c.prototype.$setWidth=function(t){t=isNaN(t)?NaN:t,this.$explicitWidth!=t&&(this.$explicitWidth=t)},Object.defineProperty(c.prototype,"height",{get:function(){return this.$getHeight()},set:function(t){this.$setHeight(t)},enumerable:!0,configurable:!0}),c.prototype.$getHeight=function(){return isNaN(this.$explicitHeight)?this.$getOriginalBounds().height:this.$explicitHeight},c.prototype.$setHeight=function(t){t=isNaN(t)?NaN:t,this.$explicitHeight!=t&&(this.$explicitHeight=t)},Object.defineProperty(c.prototype,"measuredWidth",{get:function(){return this.$getOriginalBounds().width},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"measuredHeight",{get:function(){return this.$getOriginalBounds().height},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"anchorOffsetX",{get:function(){return this.$anchorOffsetX},set:function(t){this.$setAnchorOffsetX(t)},enumerable:!0,configurable:!0}),c.prototype.$setAnchorOffsetX=function(t){var e=this;if(e.$anchorOffsetX!=t)if(e.$anchorOffsetX=t,y.nativeRender)e.$nativeDisplayObject.setAnchorOffsetX(t);else{var i=e.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=e.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(c.prototype,"anchorOffsetY",{get:function(){return this.$anchorOffsetY},set:function(t){this.$setAnchorOffsetY(t)},enumerable:!0,configurable:!0}),c.prototype.$setAnchorOffsetY=function(t){var e=this;if(e.$anchorOffsetY!=t)if(e.$anchorOffsetY=t,y.nativeRender)e.$nativeDisplayObject.setAnchorOffsetY(t);else{var i=e.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=e.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(c.prototype,"visible",{get:function(){return this.$visible},set:function(t){this.$setVisible(t)},enumerable:!0,configurable:!0}),c.prototype.$setVisible=function(t){var e=this;if(e.$visible!=t)if(e.$visible=t,y.nativeRender)e.$nativeDisplayObject.setVisible(t);else{e.$updateRenderMode();var i=e.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=e.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(c.prototype,"cacheAsBitmap",{get:function(){return this.$cacheAsBitmap},set:function(t){this.$cacheAsBitmap=t,y.nativeRender?this.$nativeDisplayObject.setCacheAsBitmap(t):this.$setHasDisplayList(t)},enumerable:!0,configurable:!0}),c.prototype.$setHasDisplayList=function(t){var e=this;if(!!e.$displayList!=t)if(t){var i=y.sys.DisplayList.create(e);i&&(e.$displayList=i,e.$cacheDirty=!0)}else e.$displayList=null},c.prototype.$cacheDirtyUp=function(){var t=this.$parent;t&&!t.$cacheDirty&&(t.$cacheDirty=!0,t.$cacheDirtyUp())},Object.defineProperty(c.prototype,"alpha",{get:function(){return this.$alpha},set:function(t){this.$setAlpha(t)},enumerable:!0,configurable:!0}),c.prototype.$setAlpha=function(t){var e=this;if(e.$alpha!=t)if(e.$alpha=t,y.nativeRender)e.$nativeDisplayObject.setAlpha(t);else{e.$updateRenderMode();var i=e.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=e.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(c.prototype,"touchEnabled",{get:function(){return this.$getTouchEnabled()},set:function(t){this.$setTouchEnabled(t)},enumerable:!0,configurable:!0}),c.prototype.$getTouchEnabled=function(){return this.$touchEnabled},c.prototype.$setTouchEnabled=function(t){this.$touchEnabled=!!t},Object.defineProperty(c.prototype,"scrollRect",{get:function(){return this.$scrollRect},set:function(t){this.$setScrollRect(t)},enumerable:!0,configurable:!0}),c.prototype.$setScrollRect=function(t){var e=this;if(t||e.$scrollRect){if(t?(e.$scrollRect||(e.$scrollRect=new y.Rectangle),e.$scrollRect.copyFrom(t),y.nativeRender&&e.$nativeDisplayObject.setScrollRect(t.x,t.y,t.width,t.height)):(e.$scrollRect=null,y.nativeRender&&e.$nativeDisplayObject.setScrollRect(0,0,0,0)),!y.nativeRender){e.$updateRenderMode();var i=e.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=e.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}}else e.$updateRenderMode()},Object.defineProperty(c.prototype,"blendMode",{get:function(){return y.sys.numberToBlendMode(this.$blendMode)},set:function(t){var e=this,i=y.sys.blendModeToNumber(t);if(e.$blendMode!=i)if(e.$blendMode=i,y.nativeRender)e.$nativeDisplayObject.setBlendMode(i);else{e.$updateRenderMode();var r=e.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=e.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"mask",{get:function(){return this.$mask?this.$mask:this.$maskRect},set:function(t){var e=this;if(t!==e){if(t)if(t instanceof c){if(t==e.$mask)return;t.$maskedObject&&(t.$maskedObject.mask=null),(t.$maskedObject=e).$mask=t,y.nativeRender||t.$updateRenderMode(),e.$maskRect&&(y.nativeRender&&e.$nativeDisplayObject.setMaskRect(0,0,0,0),e.$maskRect=null),y.nativeRender&&e.$nativeDisplayObject.setMask(t.$nativeDisplayObject.id)}else e.$maskRect||(e.$maskRect=new y.Rectangle),e.$maskRect.copyFrom(t),y.nativeRender&&e.$nativeDisplayObject.setMaskRect(t.x,t.y,t.width,t.height),e.$mask&&(e.$mask.$maskedObject=null,y.nativeRender||e.$mask.$updateRenderMode()),e.mask&&(y.nativeRender&&e.$nativeDisplayObject.setMask(-1),e.$mask=null);else e.$mask&&(e.$mask.$maskedObject=null,y.nativeRender||e.$mask.$updateRenderMode()),e.mask&&(y.nativeRender&&e.$nativeDisplayObject.setMask(-1),e.$mask=null),e.$maskRect&&(y.nativeRender&&e.$nativeDisplayObject.setMaskRect(0,0,0,0),e.$maskRect=null);y.nativeRender||e.$updateRenderMode()}},enumerable:!0,configurable:!0}),c.prototype.$setMaskRect=function(t){var e=this;(t||e.$maskRect)&&(t?(e.$maskRect||(e.$maskRect=new y.Rectangle),e.$maskRect.copyFrom(t)):e.$maskRect=null)},Object.defineProperty(c.prototype,"filters",{get:function(){return this.$filters},set:function(t){var e,i,r=this;r.$filters||t?(t&&t.length?(t=t.concat(),r.$filters=t,y.nativeRender&&r.$nativeDisplayObject.setFilters(t)):(r.$filters=t,y.nativeRender&&r.$nativeDisplayObject.setFilters(null)),y.nativeRender||(r.$updateRenderMode(),(e=r.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(i=r.$maskedObject)&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp()))):(r.$filters=t,y.nativeRender?r.$nativeDisplayObject.setFilters(null):(r.$updateRenderMode(),(e=r.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(i=r.$maskedObject)&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp())))},enumerable:!0,configurable:!0}),c.prototype.getTransformedBounds=function(t,e){return t=t||this,this.$getTransformedBounds(t,e)},c.prototype.getBounds=function(t,e){void 0===e&&(e=!0);var i=this;return t=i.$getTransformedBounds(i,t),e&&(0!=i.$anchorOffsetX&&(t.x-=i.$anchorOffsetX),0!=i.$anchorOffsetY&&(t.y-=i.$anchorOffsetY)),t},c.prototype.$getTransformedBounds=function(t,e){var i,r=this.$getOriginalBounds();if(e||(e=new y.Rectangle),e.copyFrom(r),t==this)return e;t?(i=y.$TempMatrix,t.$getInvertedConcatenatedMatrix().$preMultiplyInto(this.$getConcatenatedMatrix(),i)):i=this.$getConcatenatedMatrix();return i.$transformBounds(e),e},c.prototype.globalToLocal=function(t,e,i){if(void 0===t&&(t=0),void 0===e&&(e=0),y.nativeRender){egret_native.updateNativeRender();var r=egret_native.nrGlobalToLocal(this.$nativeDisplayObject.id,t,e).split(","),n=parseFloat(r[0]),a=parseFloat(r[1]);return i?i.setTo(n,a):i=new y.Point(n,a),i}return this.$getInvertedConcatenatedMatrix().transformPoint(t,e,i)},c.prototype.localToGlobal=function(t,e,i){if(void 0===t&&(t=0),void 0===e&&(e=0),y.nativeRender){egret_native.updateNativeRender();var r=egret_native.nrLocalToGlobal(this.$nativeDisplayObject.id,t,e).split(","),n=parseFloat(r[0]),a=parseFloat(r[1]);return i?i.setTo(n,a):i=new y.Point(n,a),i}return this.$getConcatenatedMatrix().transformPoint(t,e,i)},c.prototype.$getOriginalBounds=function(){var t=this.$getContentBounds();this.$measureChildBounds(t);var e=this.$measureFiltersOffset(!1);return e&&(t.x+=e.minX,t.y+=e.minY,t.width+=-e.minX+e.maxX,t.height+=-e.minY+e.maxY),t},c.prototype.$measureChildBounds=function(t){},c.prototype.$getContentBounds=function(){var t=y.$TempRectangle;return t.setEmpty(),this.$measureContentBounds(t),t},c.prototype.$measureContentBounds=function(t){},c.prototype.$getRenderNode=function(){var t=this,e=t.$renderNode;return e?(t.$renderDirty&&(e.cleanBeforeRender(),t.$updateRenderNode(),t.$renderDirty=!1,e=t.$renderNode),e):null},c.prototype.$updateRenderMode=function(){var t=this;!t.$visible||t.$alpha<=0||t.$maskedObject?t.$renderMode=1:t.filters&&0<t.filters.length?t.$renderMode=2:0!==t.$blendMode||t.$mask&&t.$mask.$stage?t.$renderMode=3:t.$scrollRect||t.$maskRect?t.$renderMode=4:t.$renderMode=null},c.prototype.$measureFiltersOffset=function(t){for(var e=this,i=0,r=0,n=0,a=0;e;){var o=e.$filters;if(o&&o.length)for(var s=o.length,h=0;h<s;h++){var c=o[h];if("blur"==c.type)i-=l=c.blurX,r-=u=c.blurY,n+=l,a+=u;else if("glow"==c.type){var l,u;i-=l=c.blurX,r-=u=c.blurY,n+=l,a+=u;var p=c.distance||0,d=c.angle||0,f=0,$=0;0!=p&&(i+=f=0<(f=p*y.NumberUtils.cos(d))?Math.ceil(f):Math.floor(f),n+=f,r+=$=0<($=p*y.NumberUtils.sin(d))?Math.ceil($):Math.floor($),a+=$)}else if("custom"==c.type){var g=c.padding;i-=g,r-=g,n+=g,a+=g}}e=t?e.$parent:null}return{minX:i=Math.min(i,0),minY:r=Math.min(r,0),maxX:n=Math.max(n,0),maxY:a=Math.max(a,0)}},c.prototype.$getConcatenatedMatrixAt=function(t,e){var i=t.$getInvertedConcatenatedMatrix();if(0===i.a||0===i.d){var r=this,n=t.$nestLevel;for(e.identity();r.$nestLevel>n;){var a=r.$scrollRect;a&&e.concat(y.$TempMatrix.setTo(1,0,0,1,-a.x,-a.y)),e.concat(r.$getMatrix()),r=r.$parent}}else i.$preMultiplyInto(e,e)},c.prototype.$updateRenderNode=function(){},c.prototype.$hitTest=function(t,e){var i=this;if(!y.nativeRender&&!i.$renderNode||!i.$visible||0==i.$scaleX||0==i.$scaleY)return null;var r=i.$getInvertedConcatenatedMatrix();if(0==r.a&&0==r.b&&0==r.c&&0==r.d)return null;var n=i.$getContentBounds(),a=r.a*t+r.c*e+r.tx,o=r.b*t+r.d*e+r.ty;if(n.contains(a,o)){if(!i.$children){var s=i.$scrollRect?i.$scrollRect:i.$maskRect;if(s&&!s.contains(a,o))return null;if(i.$mask&&!i.$mask.$hitTest(t,e))return null}return i}return null},c.prototype.hitTestPoint=function(t,e,i){var r=this;if(i){l=(h=r.$getInvertedConcatenatedMatrix()).a*t+h.c*e+h.tx,u=h.b*t+h.d*e+h.ty;var n=void 0;if(y.nativeRender){(o=y.sys.customHitTestBuffer).resize(3,3),egret_native.forHitTest=!0,egret_native.activateBuffer(o),egret_native.updateNativeRender(),egret_native.nrRenderDisplayObject2(r.$nativeDisplayObject.id,1-l,1-u,!0);try{n=new Uint8Array(4),egret_native.nrGetPixels(1,1,1,1,n)}catch(t){throw new Error(y.sys.tr(1039))}return egret_native.activateBuffer(null),egret_native.forHitTest=!1,0!==n[3]}var a=r.$displayList;if(a){var o=a.renderBuffer;try{n=o.getPixels(l-a.offsetX,u-a.offsetY)}catch(t){throw new Error(y.sys.tr(1039))}}else{(o=y.sys.customHitTestBuffer).resize(3,3);var s=y.Matrix.create();s.identity(),s.translate(1-l,1-u),y.sys.systemRenderer.render(this,o,s,!0),y.Matrix.release(s);try{n=o.getPixels(1,1)}catch(t){throw new Error(y.sys.tr(1039))}}return 0!==n[3]}if(0==r.$scaleX||0==r.$scaleY)return!1;var h=r.$getInvertedConcatenatedMatrix(),c=r.getBounds(null,!1),l=h.a*t+h.c*e+h.tx,u=h.b*t+h.d*e+h.ty;if(c.contains(l,u)){var p=r.$scrollRect?r.$scrollRect:r.$maskRect;return!(p&&!p.contains(l,u))}return!1},c.prototype.$addListener=function(t,e,i,r,n,a){h.prototype.$addListener.call(this,t,e,i,r,n,a);var o=t==y.Event.ENTER_FRAME;if(o||t==y.Event.RENDER){var s=o?c.$enterFrameCallBackList:c.$renderCallBackList;-1==s.indexOf(this)&&s.push(this)}},c.prototype.removeEventListener=function(t,e,i,r){h.prototype.removeEventListener.call(this,t,e,i,r);var n=t==y.Event.ENTER_FRAME;if((n||t==y.Event.RENDER)&&!this.hasEventListener(t)){var a=n?c.$enterFrameCallBackList:c.$renderCallBackList,o=a.indexOf(this);-1!==o&&a.splice(o,1)}},c.prototype.dispatchEvent=function(t){if(!t.$bubbles)return h.prototype.dispatchEvent.call(this,t);var e=this.$getPropagationList(this),i=.5*e.length;return t.$setTarget(this),this.$dispatchPropagationEvent(t,e,i),!t.$isDefaultPrevented},c.prototype.$getPropagationList=function(t){for(var e=[];t;)e.push(t),t=t.$parent;var i=e.concat();return i.reverse(),e=i.concat(e)},c.prototype.$dispatchPropagationEvent=function(t,e,i){for(var r=e.length,n=i-1,a=0;a<r;a++){var o=e[a];if(t.$currentTarget=o,t.$eventPhase=a<n?1:a==i||a==n?2:3,o.$notifyListener(t,a<i),t.$isPropagationStopped||t.$isPropagationImmediateStopped)return}},c.prototype.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.$parent}return!1},c.defaultTouchEnabled=!1,c.$enterFrameCallBackList=[],c.$renderCallBackList=[],c}(y.EventDispatcher);y.DisplayObject=t,__reflect(t.prototype,"egret.DisplayObject")}(egret||(egret={})),function(p){p.$TextureScaleFactor=1;var t=function(e){function t(){var t=e.call(this)||this;return t.disposeBitmapData=!0,t.$bitmapX=0,t.$bitmapY=0,t.$bitmapWidth=0,t.$bitmapHeight=0,t.$offsetX=0,t.$offsetY=0,t.$textureWidth=0,t.$textureHeight=0,t.$sourceWidth=0,t.$sourceHeight=0,t.$bitmapData=null,t.$rotated=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"textureWidth",{get:function(){return this.$getTextureWidth()},enumerable:!0,configurable:!0}),t.prototype.$getTextureWidth=function(){return this.$textureWidth},Object.defineProperty(t.prototype,"textureHeight",{get:function(){return this.$getTextureHeight()},enumerable:!0,configurable:!0}),t.prototype.$getTextureHeight=function(){return this.$textureHeight},t.prototype.$getScaleBitmapWidth=function(){return this.$bitmapWidth*p.$TextureScaleFactor},t.prototype.$getScaleBitmapHeight=function(){return this.$bitmapHeight*p.$TextureScaleFactor},Object.defineProperty(t.prototype,"bitmapData",{get:function(){return this.$bitmapData},set:function(t){this._setBitmapData(t)},enumerable:!0,configurable:!0}),t.prototype._setBitmapData=function(t){this.$bitmapData=t;var e=p.$TextureScaleFactor,i=t.width*e,r=t.height*e;this.$initData(0,0,i,r,0,0,i,r,t.width,t.height)},t.prototype.$initData=function(t,e,i,r,n,a,o,s,h,c,l){void 0===l&&(l=!1);var u=p.$TextureScaleFactor;this.$bitmapX=t/u,this.$bitmapY=e/u,this.$bitmapWidth=i/u,this.$bitmapHeight=r/u,this.$offsetX=n,this.$offsetY=a,this.$textureWidth=o,this.$textureHeight=s,this.$sourceWidth=h,this.$sourceHeight=c,this.$rotated=l,p.BitmapData.$invalidate(this.$bitmapData)},t.prototype.getPixel32=function(t,e){throw new Error},t.prototype.getPixels=function(t,e,i,r){throw void 0===i&&(i=1),void 0===r&&(r=1),new Error},t.prototype.toDataURL=function(t,e,i){throw new Error},t.prototype.saveToFile=function(t,e,i){throw new Error},t.prototype.dispose=function(){this.$bitmapData&&(this.disposeBitmapData&&this.$bitmapData.$dispose(),this.$bitmapData=null),p.nativeRender&&egret_native.NativeDisplayObject.disposeTexture(this)},t}(p.HashObject);p.Texture=t,__reflect(t.prototype,"egret.Texture")}(egret||(egret={})),function(t){var e=function(a){function s(t,e,i,r){var n=a.call(this)||this;return n.$eventPhase=2,n.$currentTarget=null,n.$target=null,n.$isDefaultPrevented=!1,n.$isPropagationStopped=!1,n.$isPropagationImmediateStopped=!1,n.$type=t,n.$bubbles=!!e,n.$cancelable=!!i,n.data=r,n}return __extends(s,a),Object.defineProperty(s.prototype,"type",{get:function(){return this.$type},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bubbles",{get:function(){return this.$bubbles},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"cancelable",{get:function(){return this.$cancelable},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"eventPhase",{get:function(){return this.$eventPhase},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"currentTarget",{get:function(){return this.$currentTarget},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"target",{get:function(){return this.$target},enumerable:!0,configurable:!0}),s.prototype.$setTarget=function(t){return this.$target=t,!0},s.prototype.isDefaultPrevented=function(){return this.$isDefaultPrevented},s.prototype.preventDefault=function(){this.$cancelable&&(this.$isDefaultPrevented=!0)},s.prototype.stopPropagation=function(){this.$bubbles&&(this.$isPropagationStopped=!0)},s.prototype.stopImmediatePropagation=function(){this.$bubbles&&(this.$isPropagationImmediateStopped=!0)},s.prototype.clean=function(){this.data=this.$currentTarget=null,this.$setTarget(null)},s.dispatchEvent=function(t,e,i,r){void 0===i&&(i=!1);var n=s.create(s,e,i),a=s._getPropertyData(s);null!=r&&(a.data=r);var o=t.dispatchEvent(n);return s.release(n),o},s._getPropertyData=function(t){var e=t._props;return e||(e=t._props={}),e},s.create=function(t,e,i,r){var n;if(t.hasOwnProperty("eventPool")&&(n=t.eventPool),n||(n=t.eventPool=[]),n.length){var a=n.pop();return a.$type=e,a.$bubbles=!!i,a.$cancelable=!!r,a.$isDefaultPrevented=!1,a.$isPropagationStopped=!1,a.$isPropagationImmediateStopped=!1,a.$eventPhase=2,a}return new t(e,i,r)},s.release=function(t){t.clean(),Object.getPrototypeOf(t).constructor.eventPool.push(t)},s.ADDED_TO_STAGE="addedToStage",s.REMOVED_FROM_STAGE="removedFromStage",s.ADDED="added",s.REMOVED="removed",s.ENTER_FRAME="enterFrame",s.RENDER="render",s.RESIZE="resize",s.CHANGE="change",s.CHANGING="changing",s.COMPLETE="complete",s.LOOP_COMPLETE="loopComplete",s.FOCUS_IN="focusIn",s.FOCUS_OUT="focusOut",s.ENDED="ended",s.ACTIVATE="activate",s.DEACTIVATE="deactivate",s.CLOSE="close",s.CONNECT="connect",s.LEAVE_STAGE="leaveStage",s.SOUND_COMPLETE="soundComplete",s}(t.HashObject);t.Event=e,__reflect(e.prototype,"egret.Event")}(egret||(egret={})),global.DEBUG=!0,global.RELEASE=!1,function(n){n.getString=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return n.sys.tr.apply(n.sys,arguments)},n.$error=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var r=n.sys.tr.apply(null,arguments);throw n.sys.$errorToFPS("Error #"+t+": "+r),new Error("#"+t+": "+r)},n.$warn=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var r=n.sys.tr.apply(null,arguments);n.sys.$warnToFPS("Warning #"+t+": "+r),n.warn("Warning #"+t+": "+r)},n.$markCannotUse=function(e,i,t){Object.defineProperty(e.prototype,i,{get:function(){return n.$warn(1009,n.getQualifiedClassName(e),i),t},set:function(t){n.$error(1009,n.getQualifiedClassName(e),i)},enumerable:!0,configurable:!0})}}(egret||(egret={})),function(i){var a=[],o=Math.PI/180,t=function(r){function n(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=r.call(this)||this;return i.x=t,i.y=e,i}return __extends(n,r),n.release=function(t){t&&a.push(t)},n.create=function(t,e){var i=a.pop();return i||(i=new n),i.setTo(t,e)},Object.defineProperty(n.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),n.prototype.setTo=function(t,e){return this.x=t,this.y=e,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},n.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},n.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},n.prototype.add=function(t){return new n(this.x+t.x,this.y+t.y)},n.interpolate=function(t,e,i){var r=1-i;return new n(t.x*i+e.x*r,t.y*i+e.y*r)},n.prototype.normalize=function(t){if(0!=this.x||0!=this.y){var e=t/this.length;this.x*=e,this.y*=e}},n.prototype.offset=function(t,e){this.x+=t,this.y+=e},n.polar=function(t,e){return new n(t*i.NumberUtils.cos(e/o),t*i.NumberUtils.sin(e/o))},n.prototype.subtract=function(t){return new n(this.x-t.x,this.y-t.y)},n.prototype.toString=function(){return"(x="+this.x+", y="+this.y+")"},n}(i.HashObject);i.Point=t,__reflect(t.prototype,"egret.Point"),i.$TempPoint=new t}(egret||(egret={})),function(p){var t=function(u){function l(){var t=u.call(this)||this;return t.$touchChildren=!0,t.$children=[],t}return __extends(l,u),Object.defineProperty(l.prototype,"numChildren",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),l.prototype.addChild=function(t){var e=this.$children.length;return t.$parent==this&&e--,this.$doAddChild(t,e)},l.prototype.addChildAt=function(t,e){return((e=0|+e)<0||e>=this.$children.length)&&(e=this.$children.length,t.$parent==this&&e--),this.$doAddChild(t,e)},l.prototype.$doAddChild=function(t,e,i){void 0===i&&(i=!0);var r=this;t==r?p.$error(1005):t instanceof p.DisplayObjectContainer&&t.contains(r)&&p.$error(1004);var n=t.$parent;if(n==r)return r.doSetChildIndex(t,e),t;n&&n.removeChild(t),r.$children.splice(e,0,t),t.$setParent(r),p.nativeRender&&r.$nativeDisplayObject.addChildAt(t.$nativeDisplayObject.id,e);var a=r.$stage;if(a&&t.$onAddToStage(a,r.$nestLevel+1),i&&t.dispatchEventWith(p.Event.ADDED,!0),a)for(var o=l.$EVENT_ADD_TO_STAGE_LIST;o.length;){var s=o.shift();s.$stage&&i&&s.dispatchEventWith(p.Event.ADDED_TO_STAGE)}if(!p.nativeRender&&(t.$maskedObject&&t.$maskedObject.$updateRenderMode(),!r.$cacheDirty)){r.$cacheDirty=!0;var h=r.$parent;h&&!h.$cacheDirty&&(h.$cacheDirty=!0,h.$cacheDirtyUp());var c=r.$maskedObject;c&&!c.$cacheDirty&&(c.$cacheDirty=!0,c.$cacheDirtyUp())}return this.$childAdded(t,e),t},l.prototype.contains=function(t){for(;t;){if(t==this)return!0;t=t.$parent}return!1},l.prototype.getChildAt=function(t){return 0<=(t=0|+t)&&t<this.$children.length?this.$children[t]:(p.$error(1007),null)},l.prototype.getChildIndex=function(t){return this.$children.indexOf(t)},l.prototype.getChildByName=function(t){for(var e,i=this.$children,r=i.length,n=0;n<r;n++)if((e=i[n]).name==t)return e;return null},l.prototype.removeChild=function(t){var e=this.$children.indexOf(t);return 0<=e?this.$doRemoveChild(e):(p.$error(1006),null)},l.prototype.removeChildAt=function(t){return 0<=(t=0|+t)&&t<this.$children.length?this.$doRemoveChild(t):(p.$error(1007),null)},l.prototype.$doRemoveChild=function(t,e){void 0===e&&(e=!0),t=0|+t;var i=this,r=this.$children,n=r[t];if(this.$childRemoved(n,t),e&&n.dispatchEventWith(p.Event.REMOVED,!0),this.$stage){n.$onRemoveFromStage();for(var a=l.$EVENT_REMOVE_FROM_STAGE_LIST;0<a.length;){var o=a.shift();e&&o.$hasAddToStage&&(o.$hasAddToStage=!1,o.dispatchEventWith(p.Event.REMOVED_FROM_STAGE)),o.$hasAddToStage=!1,o.$stage=null}}this.$displayList||this.$parentDisplayList;n.$setParent(null);var s=r.indexOf(n);if(-1!=s&&r.splice(s,1),p.nativeRender)i.$nativeDisplayObject.removeChild(n.$nativeDisplayObject.id);else if(n.$maskedObject&&n.$maskedObject.$updateRenderMode(),!i.$cacheDirty){i.$cacheDirty=!0;var h=i.$parent;h&&!h.$cacheDirty&&(h.$cacheDirty=!0,h.$cacheDirtyUp());var c=i.$maskedObject;c&&!c.$cacheDirty&&(c.$cacheDirty=!0,c.$cacheDirtyUp())}return n},l.prototype.setChildIndex=function(t,e){((e=0|+e)<0||e>=this.$children.length)&&(e=this.$children.length-1),this.doSetChildIndex(t,e)},l.prototype.doSetChildIndex=function(t,e){var i=this.$children.indexOf(t);if(i<0&&p.$error(1006),i!=e)if(this.$childRemoved(t,i),this.$children.splice(i,1),this.$children.splice(e,0,t),this.$childAdded(t,e),p.nativeRender)this.$nativeDisplayObject.removeChild(t.$nativeDisplayObject.id),this.$nativeDisplayObject.addChildAt(t.$nativeDisplayObject.id,e);else if(!this.$cacheDirty){this.$cacheDirty=!0;var r=this.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=this.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}},l.prototype.swapChildrenAt=function(t,e){e=0|+e,0<=(t=0|+t)&&t<this.$children.length&&0<=e&&e<this.$children.length?this.doSwapChildrenAt(t,e):p.$error(1007)},l.prototype.swapChildren=function(t,e){var i=this.$children.indexOf(t),r=this.$children.indexOf(e);-1==i||-1==r?p.$error(1006):this.doSwapChildrenAt(i,r)},l.prototype.doSwapChildrenAt=function(t,e){if(e<t){var i=e;e=t,t=i}else if(t==e)return;var r=this.$children,n=r[t],a=r[e];if(this.$childRemoved(n,t),this.$childRemoved(a,e),r[t]=a,r[e]=n,this.$childAdded(a,t),this.$childAdded(n,e),p.nativeRender)this.$nativeDisplayObject.swapChild(t,e);else if(!this.$cacheDirty){this.$cacheDirty=!0;var o=this.$parent;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp());var s=this.$maskedObject;s&&!s.$cacheDirty&&(s.$cacheDirty=!0,s.$cacheDirtyUp())}},l.prototype.removeChildren=function(){for(var t=this.$children.length-1;0<=t;t--)this.$doRemoveChild(t)},l.prototype.$childAdded=function(t,e){},l.prototype.$childRemoved=function(t,e){},l.prototype.$onAddToStage=function(t,e){u.prototype.$onAddToStage.call(this,t,e);var i=this.$children.length;e++;for(var r=0;r<i;r++){var n=this.$children[r];n.$onAddToStage(t,e),n.$maskedObject&&n.$maskedObject.$updateRenderMode()}},l.prototype.$onRemoveFromStage=function(){u.prototype.$onRemoveFromStage.call(this);for(var t=this.$children,e=t.length,i=0;i<e;i++){t[i].$onRemoveFromStage()}},l.prototype.$measureChildBounds=function(t){var e=this.$children,i=e.length;if(0!=i){for(var r=0,n=0,a=0,o=0,s=!1,h=-1;h<i;h++){var c=void 0;-1==h?c=t:(e[h].getBounds(p.$TempRectangle),e[h].$getMatrix().$transformBounds(p.$TempRectangle),c=p.$TempRectangle),c.isEmpty()||(s?(r=Math.min(r,c.x),n=Math.max(n,c.x+c.width),a=Math.min(a,c.y),o=Math.max(o,c.y+c.height)):(s=!0,n=(r=c.x)+c.width,o=(a=c.y)+c.height))}t.setTo(r,a,n-r,o-a)}},Object.defineProperty(l.prototype,"touchChildren",{get:function(){return this.$getTouchChildren()},set:function(t){this.$setTouchChildren(!!t)},enumerable:!0,configurable:!0}),l.prototype.$getTouchChildren=function(){return this.$touchChildren},l.prototype.$setTouchChildren=function(t){return this.$touchChildren!=t&&(this.$touchChildren=t,!0)},l.prototype.$hitTest=function(t,e){if(!this.$visible)return null;var i=this.$getInvertedConcatenatedMatrix(),r=i.a*t+i.c*e+i.tx,n=i.b*t+i.d*e+i.ty,a=this.$scrollRect?this.$scrollRect:this.$maskRect;if(a&&!a.contains(r,n))return null;if(this.$mask&&!this.$mask.$hitTest(t,e))return null;for(var o=this.$children,s=!1,h=null,c=o.length-1;0<=c;c--){var l=o[c];if(!l.$maskedObject&&(h=l.$hitTest(t,e))){if(s=!0,h.$touchEnabled)break;h=null}}return h?this.$touchChildren?h:this:s?this:u.prototype.$hitTest.call(this,t,e)},l.$EVENT_ADD_TO_STAGE_LIST=[],l.$EVENT_REMOVE_FROM_STAGE_LIST=[],l}(p.DisplayObject);p.DisplayObjectContainer=t,__reflect(t.prototype,"egret.DisplayObjectContainer")}(egret||(egret={})),function(l){var t=function(i){function t(t){var e=i.call(this)||this;return e._bitmapX=0,e._bitmapY=0,e._textureMap=l.createMap(),e.$texture=t,e._bitmapX=t.$bitmapX-t.$offsetX,e._bitmapY=t.$bitmapY-t.$offsetY,e}return __extends(t,i),t.prototype.getTexture=function(t){return this._textureMap[t]},t.prototype.createTexture=function(t,e,i,r,n,a,o,s,h){void 0===a&&(a=0),void 0===o&&(o=0),void 0===s&&(s=a+r),void 0===h&&(h=o+n);var c=new l.Texture;return c.disposeBitmapData=!1,c.$bitmapData=this.$texture.$bitmapData,c.$initData(this._bitmapX+e,this._bitmapY+i,r,n,a,o,s,h,this.$texture.$sourceWidth,this.$texture.$sourceHeight),this._textureMap[t]=c},t.prototype.dispose=function(){this.$texture&&this.$texture.dispose()},t}(l.HashObject);l.SpriteSheet=t,__reflect(t.prototype,"egret.SpriteSheet")}(egret||(egret={})),function(t){t.$locale_strings=t.$locale_strings||{},t.$language="en_US"}(egret||(egret={})),function(o){(o.sys||(o.sys={})).tr=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var r=o.$locale_strings[o.$language][t];if(!r)return"{"+t+"}";for(var n=e.length,a=0;a<n;a++)r=r.replace("{"+a+"}",e[a]);return r}}(egret||(egret={})),function(c){var t=function(r){function i(t){var e=r.call(this)||this;return e.$texture=null,e.$bitmapData=null,e.$bitmapX=0,e.$bitmapY=0,e.$bitmapWidth=0,e.$bitmapHeight=0,e.$offsetX=0,e.$offsetY=0,e.$textureWidth=0,e.$textureHeight=0,e.$sourceWidth=0,e.$sourceHeight=0,e.$smoothing=i.defaultSmoothing,e.$explicitBitmapWidth=NaN,e.$explicitBitmapHeight=NaN,e.$scale9Grid=null,e.$fillMode="scale",e._pixelHitTest=!1,e.$renderNode=new c.sys.NormalBitmapNode,e.$setTexture(t),t&&(e.$renderNode.rotated=t.$rotated),e}return __extends(i,r),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(1)},i.prototype.$onAddToStage=function(t,e){r.prototype.$onAddToStage.call(this,t,e);var i=this.$texture;i&&i.$bitmapData&&c.BitmapData.$addDisplayObject(this,i.$bitmapData)},i.prototype.$onRemoveFromStage=function(){r.prototype.$onRemoveFromStage.call(this);var t=this.$texture;t&&c.BitmapData.$removeDisplayObject(this,t.$bitmapData)},Object.defineProperty(i.prototype,"texture",{get:function(){return this.$texture},set:function(t){this.$setTexture(t),t&&this.$renderNode&&(this.$renderNode.rotated=t.$rotated)},enumerable:!0,configurable:!0}),i.prototype.$setTexture=function(t){var e=this,i=e.$texture;if(t==i)return!1;if(!(e.$texture=t)){i&&c.BitmapData.$removeDisplayObject(e,i.$bitmapData),e.setImageData(null,0,0,0,0,0,0,0,0,0,0),e.$renderDirty=!0;var r=e.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var n=e.$maskedObject;return n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp()),c.nativeRender&&this.setBitmapDataToWasm(null),!0}if(e.$refreshImageData(),e.$stage){if(i&&i.$bitmapData){if(i.$bitmapData.hashCode==(t.$bitmapData?t.$bitmapData.hashCode:-1)){e.$renderDirty=!0;var a=e.$parent;a&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp());var o=e.$maskedObject;return o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp()),!0}c.BitmapData.$removeDisplayObject(e,i.$bitmapData)}c.BitmapData.$addDisplayObject(e,t.$bitmapData)}e.$renderDirty=!0;var s=e.$parent;s&&!s.$cacheDirty&&(s.$cacheDirty=!0,s.$cacheDirtyUp());var h=e.$maskedObject;return h&&!h.$cacheDirty&&(h.$cacheDirty=!0,h.$cacheDirtyUp()),!0},i.prototype.$setBitmapData=function(t){this.$setTexture(t)},i.prototype.setBitmapDataToWasm=function(t){this.$nativeDisplayObject.setBitmapData(t)},i.prototype.$refreshImageData=function(){var t=this.$texture;t?(c.nativeRender&&this.setBitmapDataToWasm(t),this.setImageData(t.$bitmapData,t.$bitmapX,t.$bitmapY,t.$bitmapWidth,t.$bitmapHeight,t.$offsetX,t.$offsetY,t.$getTextureWidth(),t.$getTextureHeight(),t.$sourceWidth,t.$sourceHeight)):c.nativeRender&&this.setBitmapDataToWasm(null)},i.prototype.setImageData=function(t,e,i,r,n,a,o,s,h,c,l){this.$bitmapData=t,this.$bitmapX=e,this.$bitmapY=i,this.$bitmapWidth=r,this.$bitmapHeight=n,this.$offsetX=a,this.$offsetY=o,this.$textureWidth=s,this.$textureHeight=h,this.$sourceWidth=c,this.$sourceHeight=l},Object.defineProperty(i.prototype,"scale9Grid",{get:function(){return this.$scale9Grid},set:function(t){this.$setScale9Grid(t)},enumerable:!0,configurable:!0}),i.prototype.$setScale9Grid=function(t){var e=this;if(e.$scale9Grid=t,e.$renderDirty=!0,c.nativeRender)t?e.$nativeDisplayObject.setScale9Grid(t.x,t.y,t.width,t.height):e.$nativeDisplayObject.setScale9Grid(0,0,-1,-1);else{var i=e.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=e.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}},Object.defineProperty(i.prototype,"fillMode",{get:function(){return this.$fillMode},set:function(t){this.$setFillMode(t)},enumerable:!0,configurable:!0}),i.prototype.$setFillMode=function(t){var e=this;if(t==e.$fillMode)return!1;if(e.$fillMode=t,c.nativeRender)e.$nativeDisplayObject.setBitmapFillMode(e.$fillMode);else{e.$renderDirty=!0;var i=e.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=e.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}return!0},Object.defineProperty(i.prototype,"smoothing",{get:function(){return this.$smoothing},set:function(t){if(t!=this.$smoothing&&(this.$smoothing=t,this.$renderNode.smoothing=t,!c.nativeRender)){var e=this.$parent;e&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp());var i=this.$maskedObject;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp())}},enumerable:!0,configurable:!0}),i.prototype.$setWidth=function(t){var e=this;if(t<0||t==e.$explicitBitmapWidth)return!1;if(e.$explicitBitmapWidth=t,e.$renderDirty=!0,c.nativeRender)e.$nativeDisplayObject.setWidth(t);else{var i=e.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=e.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}return!0},i.prototype.$setHeight=function(t){var e=this;if(t<0||t==e.$explicitBitmapHeight)return!1;if(e.$explicitBitmapHeight=t,e.$renderDirty=!0,c.nativeRender)e.$nativeDisplayObject.setHeight(t);else{var i=e.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var r=e.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())}return!0},i.prototype.$getWidth=function(){return isNaN(this.$explicitBitmapWidth)?this.$getContentBounds().width:this.$explicitBitmapWidth},i.prototype.$getHeight=function(){return isNaN(this.$explicitBitmapHeight)?this.$getContentBounds().height:this.$explicitBitmapHeight},i.prototype.$measureContentBounds=function(t){if(this.$bitmapData){var e=isNaN(this.$explicitBitmapWidth)?this.$textureWidth:this.$explicitBitmapWidth,i=isNaN(this.$explicitBitmapHeight)?this.$textureHeight:this.$explicitBitmapHeight;t.setTo(0,0,e,i)}else{e=isNaN(this.$explicitBitmapWidth)?0:this.$explicitBitmapWidth,i=isNaN(this.$explicitBitmapHeight)?0:this.$explicitBitmapHeight;t.setTo(0,0,e,i)}},i.prototype.$updateRenderNode=function(){if(this.$texture){var t=isNaN(this.$explicitBitmapWidth)?this.$textureWidth:this.$explicitBitmapWidth,e=isNaN(this.$explicitBitmapHeight)?this.$textureHeight:this.$explicitBitmapHeight,i=this.scale9Grid||this.$texture.scale9Grid;i?(this.$renderNode instanceof c.sys.NormalBitmapNode&&(this.$renderNode=new c.sys.BitmapNode),c.sys.BitmapNode.$updateTextureDataWithScale9Grid(this.$renderNode,this.$bitmapData,i,this.$bitmapX,this.$bitmapY,this.$bitmapWidth,this.$bitmapHeight,this.$offsetX,this.$offsetY,this.$textureWidth,this.$textureHeight,t,e,this.$sourceWidth,this.$sourceHeight,this.$smoothing)):(this.fillMode==c.BitmapFillMode.REPEAT&&this.$renderNode instanceof c.sys.NormalBitmapNode&&(this.$renderNode=new c.sys.BitmapNode),c.sys.BitmapNode.$updateTextureData(this.$renderNode,this.$bitmapData,this.$bitmapX,this.$bitmapY,this.$bitmapWidth,this.$bitmapHeight,this.$offsetX,this.$offsetY,this.$textureWidth,this.$textureHeight,t,e,this.$sourceWidth,this.$sourceHeight,this.$fillMode,this.$smoothing))}},Object.defineProperty(i.prototype,"pixelHitTest",{get:function(){return this._pixelHitTest},set:function(t){this._pixelHitTest=!!t},enumerable:!0,configurable:!0}),i.prototype.$hitTest=function(t,e){var i=r.prototype.$hitTest.call(this,t,e);i&&this._pixelHitTest&&(this.hitTestPoint(t,e,!0)||(i=null));return i},i.defaultSmoothing=!0,i}(c.DisplayObject);c.Bitmap=t,__reflect(t.prototype,"egret.Bitmap")}(egret||(egret={})),function(t){var e,i;e=t.sys||(t.sys={}),i=function(){function t(){this.type=0,this.drawData=[],this.renderCount=0}return t.prototype.cleanBeforeRender=function(){this.drawData.length=0,this.renderCount=0},t.prototype.$getRenderCount=function(){return this.renderCount},t}(),e.RenderNode=i,__reflect(i.prototype,"egret.sys.RenderNode")}(egret||(egret={})),function(t){var e,i;e=t.sys||(t.sys={}),i=function(){function t(){this.type=0,this.$commands=[],this.$data=[],this.commandPosition=0,this.dataPosition=0,this.$lastX=0,this.$lastY=0}return t.prototype.moveTo=function(t,e){this.$commands[this.commandPosition++]=1;var i=this.dataPosition;this.$data[i++]=t,this.$data[i++]=e,this.dataPosition=i},t.prototype.lineTo=function(t,e){this.$commands[this.commandPosition++]=2;var i=this.dataPosition;this.$data[i++]=t,this.$data[i++]=e,this.dataPosition=i},t.prototype.curveTo=function(t,e,i,r){this.$commands[this.commandPosition++]=3;var n=this.dataPosition;this.$data[n++]=t,this.$data[n++]=e,this.$data[n++]=i,this.$data[n++]=r,this.dataPosition=n},t.prototype.cubicCurveTo=function(t,e,i,r,n,a){this.$commands[this.commandPosition++]=4;var o=this.dataPosition;this.$data[o++]=t,this.$data[o++]=e,this.$data[o++]=i,this.$data[o++]=r,this.$data[o++]=n,this.$data[o++]=a,this.dataPosition=o},t.prototype.drawRect=function(t,e,i,r){var n=t+i,a=e+r;this.moveTo(t,e),this.lineTo(n,e),this.lineTo(n,a),this.lineTo(t,a),this.lineTo(t,e)},t.prototype.drawRoundRect=function(t,e,i,r,n,a){var o=.5*n|0,s=a?.5*a|0:o;if(o&&s){var h=.5*i,c=.5*r;if(h<o&&(o=h),c<s&&(s=c),h!==o||c!==s){var l=t+i,u=e+r,p=t+o,d=l-o,f=e+s,$=u-s;this.moveTo(l,$),this.curveTo(l,u,d,u),this.lineTo(p,u),this.curveTo(t,u,t,$),this.lineTo(t,f),this.curveTo(t,e,p,e),this.lineTo(d,e),this.curveTo(l,e,l,f),this.lineTo(l,$)}else o===s?this.drawCircle(t+o,e+s,o):this.drawEllipse(t,e,2*o,2*s)}else this.drawRect(t,e,i,r)},t.prototype.drawCircle=function(t,e,i){this.arcToBezier(t,e,i,i,0,2*Math.PI)},t.prototype.drawEllipse=function(t,e,i,r){var n=.5*i,a=.5*r;t+=n,e+=a,this.arcToBezier(t,e,n,a,0,2*Math.PI)},t.prototype.drawArc=function(t,e,i,r,n,a){a?r<=n&&(n-=2*Math.PI):n<=r&&(n+=2*Math.PI),this.arcToBezier(t,e,i,i,r,n,a)},t.prototype.arcToBezier=function(t,e,i,r,n,a,o){var s=.5*Math.PI,h=n,c=h;o?(c+=-s-h%s)<a&&(c=a):a<(c+=s-h%s)&&(c=a);var l=t+Math.cos(h)*i,u=e+Math.sin(h)*r;this.$lastX==l&&this.$lastY==u||this.moveTo(l,u);for(var p=Math.cos(h),d=Math.sin(h),f=0;f<4;f++){var $=c-h,g=4*Math.tan($/4)/3,y=l-d*g*i,v=u+p*g*r,b=(l=t+(p=Math.cos(c))*i)+(d=Math.sin(c))*g*i,m=(u=e+d*r)-p*g*r;if(this.cubicCurveTo(y,v,b,m,l,u),c===a)break;h=c,o?(c=h-s)<a&&(c=a):a<(c=h+s)&&(c=a)}},t}(),e.Path2D=i,__reflect(i.prototype,"egret.sys.Path2D")}(egret||(egret={})),(egret||(egret={})).fontMapping={},(egret||(egret={})).createMap=function(){var t=Object.create(null);return t.__v8__=void 0,delete t.__v8__,t},function(t){var e=function(l){function t(t,e,i,r,n,a,o,s){void 0===t&&(t=16711680),void 0===e&&(e=1),void 0===i&&(i=6),void 0===r&&(r=6),void 0===n&&(n=2),void 0===a&&(a=1),void 0===o&&(o=!1),void 0===s&&(s=!1);var h=l.call(this)||this,c=h;return c.type="glow",c.$color=t,c.$blue=255&t,c.$green=(65280&t)>>8,c.$red=t>>16,c.$alpha=e,c.$blurX=i,c.$blurY=r,c.$strength=n,c.$quality=a,c.$inner=o,c.$knockout=s,c.$uniforms.color={x:h.$red/255,y:h.$green/255,z:h.$blue/255,w:1},c.$uniforms.alpha=e,c.$uniforms.blurX=i,c.$uniforms.blurY=r,c.$uniforms.strength=n,c.$uniforms.inner=o?1:0,c.$uniforms.knockout=s?0:1,c.$uniforms.dist=0,c.$uniforms.angle=0,c.$uniforms.hideObject=0,c.onPropertyChange(),h}return __extends(t,l),Object.defineProperty(t.prototype,"color",{get:function(){return this.$color},set:function(t){this.$color!=t&&(this.$color=t,this.$blue=255&t,this.$green=(65280&t)>>8,this.$red=t>>16,this.$uniforms.color.x=this.$red/255,this.$uniforms.color.y=this.$green/255,this.$uniforms.color.z=this.$blue/255)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.$alpha},set:function(t){this.$alpha!=t&&(this.$alpha=t,this.$uniforms.alpha=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.$blurX},set:function(t){this.$blurX!=t&&(this.$blurX=t,this.$uniforms.blurX=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.$blurY},set:function(t){this.$blurY!=t&&(this.$blurY=t,this.$uniforms.blurY=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strength",{get:function(){return this.$strength},set:function(t){this.$strength!=t&&(this.$strength=t,this.$uniforms.strength=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.$quality},set:function(t){this.$quality!=t&&(this.$quality=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inner",{get:function(){return this.$inner},set:function(t){this.$inner!=t&&(this.$inner=t,this.$uniforms.inner=t?1:0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"knockout",{get:function(){return this.$knockout},set:function(t){this.$knockout!=t&&(this.$knockout=t,this.$uniforms.knockout=t?0:1)},enumerable:!0,configurable:!0}),t.prototype.$toJson=function(){return'{"color": '+this.$color+', "red": '+this.$red+', "green": '+this.$green+', "blue": '+this.$blue+', "alpha": '+this.$alpha+', "blurX": '+this.$blurX+', "blurY": '+this.blurY+', "strength": '+this.$strength+', "quality": '+this.$quality+', "inner": '+this.$inner+', "knockout": '+this.$knockout+"}"},t.prototype.updatePadding=function(){var t=this;t.paddingLeft=t.blurX,t.paddingRight=t.blurX,t.paddingTop=t.blurY,t.paddingBottom=t.blurY},t}(t.Filter);t.GlowFilter=e,__reflect(e.prototype,"egret.GlowFilter")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.NORMAL="normal",t.ADD="add",t.ERASE="erase",t}();t.BlendMode=e,__reflect(e.prototype,"egret.BlendMode")}(egret||(egret={})),function(t){!function(t){for(var i=["normal","add","erase"],r={},e=i.length,n=0;n<e;n++){var a=i[n];r[a]=n}t.blendModeToNumber=function(t){var e=r[t];return void 0===e?0:e},t.numberToBlendMode=function(t){var e=i[t];return void 0===e?"normal":e}}(t.sys||(t.sys={}))}(egret||(egret={})),(egret||(egret={})).CapsStyle={NONE:"none",ROUND:"round",SQUARE:"square"},function(s){var t=function(){function o(){}return o.compileProgram=function(t,e,i){var r=o.compileFragmentShader(t,i),n=o.compileVertexShader(t,e),a=t.createProgram();return t.attachShader(a,n),t.attachShader(a,r),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||s.$warn(1020),a},o.compileFragmentShader=function(t,e){return o._compileShader(t,e,t.FRAGMENT_SHADER)},o.compileVertexShader=function(t,e){return o._compileShader(t,e,t.VERTEX_SHADER)},o._compileShader=function(t,e,i){var r=t.createShader(i);return t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:null},o.checkCanUseWebGL=function(){if(null==o.canUseWebGL)try{var t=document.createElement("canvas");o.canUseWebGL=!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){o.canUseWebGL=!1}return o.canUseWebGL},o.deleteWebGLTexture=function(t){if(t){var e=t.glContext;e&&e.deleteTexture(t)}},o}();s.WebGLUtils=t,__reflect(t.prototype,"egret.WebGLUtils")}(egret||(egret={})),function(t){var e=function(r){function t(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i=!1),r.call(this,t,e,i)||this}return __extends(t,r),t.FOCUS_IN="focusIn",t.FOCUS_OUT="focusOut",t}(t.Event);t.FocusEvent=e,__reflect(e.prototype,"egret.FocusEvent")}(egret||(egret={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.PERMISSION_DENIED="permissionDenied",e.UNAVAILABLE="unavailable",e}(t.Event);t.GeolocationEvent=e,__reflect(e.prototype,"egret.GeolocationEvent")}(egret||(egret={})),function(o){var t=function(n){function a(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var r=n.call(this,t,e,i)||this;return r._status=0,r}return __extends(a,n),Object.defineProperty(a.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),a.dispatchHTTPStatusEvent=function(t,e){var i=o.Event.create(a,a.HTTP_STATUS);i._status=e;var r=t.dispatchEvent(i);return o.Event.release(i),r},a.HTTP_STATUS="httpStatus",a}(o.Event);o.HTTPStatusEvent=t,__reflect(t.prototype,"egret.HTTPStatusEvent")}(egret||(egret={})),function(a){var t=function(r){function n(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i=!1),r.call(this,t,e,i)||this}return __extends(n,r),n.dispatchIOErrorEvent=function(t){var e=a.Event.create(n,n.IO_ERROR),i=t.dispatchEvent(e);return a.Event.release(e),i},n.IO_ERROR="ioError",n}(a.Event);a.IOErrorEvent=t,__reflect(t.prototype,"egret.IOErrorEvent")}(egret||(egret={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(t.Event);t.MotionEvent=e,__reflect(e.prototype,"egret.MotionEvent")}(egret||(egret={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(t.Event);t.OrientationEvent=e,__reflect(e.prototype,"egret.OrientationEvent")}(egret||(egret={})),function(h){var t=function(o){function s(t,e,i,r,n){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===r&&(r=0),void 0===n&&(n=0);var a=o.call(this,t,e,i)||this;return a.bytesLoaded=0,a.bytesTotal=0,a.bytesLoaded=r,a.bytesTotal=n,a}return __extends(s,o),s.dispatchProgressEvent=function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var n=h.Event.create(s,e);n.bytesLoaded=i,n.bytesTotal=r;var a=t.dispatchEvent(n);return h.Event.release(n),a},s.PROGRESS="progress",s.SOCKET_DATA="socketData",s}(h.Event);h.ProgressEvent=t,__reflect(t.prototype,"egret.ProgressEvent")}(egret||(egret={})),function(a){var t=function(r){function n(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i=!1),r.call(this,t,e,i)||this}return __extends(n,r),n.dispatchStageOrientationEvent=function(t,e){var i=a.Event.create(n,e),r=t.dispatchEvent(i);return a.Event.release(i),r},n.ORIENTATION_CHANGE="orientationChange",n}(a.Event);a.StageOrientationEvent=t,__reflect(t.prototype,"egret.StageOrientationEvent")}(egret||(egret={})),function(s){var t=function(a){function o(t,e,i,r){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===r&&(r="");var n=a.call(this,t,e,i)||this;return n.text=r,n}return __extends(o,a),o.dispatchTextEvent=function(t,e,i){var r=s.Event.create(o,e);r.text=i;var n=t.dispatchEvent(r);return s.Event.release(r),n},o.LINK="link",o}(s.Event);s.TextEvent=t,__reflect(t.prototype,"egret.TextEvent")}(egret||(egret={})),function(s){var t=function(r){function o(t,e,i){return r.call(this,t,e,i)||this}return __extends(o,r),o.prototype.updateAfterEvent=function(){s.sys.$requestRenderingFlag=!0},o.dispatchTimerEvent=function(t,e,i,r){var n=s.Event.create(o,e,i,r),a=t.dispatchEvent(n);return s.Event.release(n),a},o.TIMER="timer",o.TIMER_COMPLETE="timerComplete",o}(s.Event);s.TimerEvent=t,__reflect(t.prototype,"egret.TimerEvent")}(egret||(egret={})),function(h){var t=function(i){function s(t){var e=i.call(this)||this;return e.format="image",e.$deleteSource=!0,e.source=t,e.width=t.width,e.height=t.height,e}return __extends(s,i),s.create=function(t,e,i){var r="",n="image/png";"/"===(r="arraybuffer"===t?h.Base64Util.encode(e):e).charAt(0)?n="image/jpeg":"R"===r.charAt(0)?n="image/gif":"i"===r.charAt(0)&&(n="image/png");var a=new Image;a.src="data:"+n+";base64,"+r,a.crossOrigin="*";var o=new s(a);return a.onload=function(){a.onload=void 0,o.source=a,o.height=a.height,o.width=a.width,i&&i(o)},o},s.prototype.$dispose=function(){"webgl"==h.Capabilities.renderMode&&this.webGLTexture&&(h.WebGLUtils.deleteWebGLTexture(this.webGLTexture),this.webGLTexture=null),this.source&&this.source.dispose&&this.source.dispose(),this.source=null,s.$dispose(this)},s.$addDisplayObject=function(t,e){if(e){var i=e.hashCode;if(i)if(s._displayList[i]){var r=s._displayList[i];r.indexOf(t)<0&&r.push(t)}else s._displayList[i]=[t]}},s.$removeDisplayObject=function(t,e){if(e){var i=e.hashCode;if(i&&s._displayList[i]){var r=s._displayList[i],n=r.indexOf(t);0<=n&&r.splice(n,1)}}},s.$invalidate=function(t){if(t){var e=t.hashCode;if(e&&s._displayList[e])for(var i=s._displayList[e],r=0;r<i.length;r++){i[r]instanceof h.Bitmap&&i[r].$refreshImageData();var n=i[r];n.$renderDirty=!0;var a=n.$parent;a&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp());var o=n.$maskedObject;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp())}}},s.$dispose=function(t){if(t){var e=t.hashCode;if(e&&s._displayList[e]){for(var i=0,r=s._displayList[e];i<r.length;i++){var n=r[i];n instanceof h.Bitmap&&(n.$bitmapData=null),n.$renderDirty=!0;var a=n.$parent;a&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp());var o=n.$maskedObject;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp())}h.nativeRender&&egret_native.NativeDisplayObject.disposeBitmapData(t),delete s._displayList[e]}}},s._displayList=h.createMap(),s}(h.HashObject);h.BitmapData=t,__reflect(t.prototype,"egret.BitmapData")}(egret||(egret={})),function(u){var t=new u.Point,e=function(s){function l(t,e,i,r,n,a){var o=s.call(this,t,e,i)||this;return o.targetChanged=!0,o.touchDown=!1,o.$initTo(r,n,a),o}return __extends(l,s),l.prototype.$initTo=function(t,e,i){this.touchPointID=+i||0,this.$stageX=+t||0,this.$stageY=+e||0},Object.defineProperty(l.prototype,"stageX",{get:function(){return this.$stageX},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"stageY",{get:function(){return this.$stageY},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"localX",{get:function(){return this.targetChanged&&this.getLocalXY(),this._localX},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"localY",{get:function(){return this.targetChanged&&this.getLocalXY(),this._localY},enumerable:!0,configurable:!0}),l.prototype.getLocalXY=function(){this.targetChanged=!1,this.$target.$getInvertedConcatenatedMatrix().transformPoint(this.$stageX,this.$stageY,t),this._localX=t.x,this._localY=t.y},l.prototype.$setTarget=function(t){return this.$target=t,this.targetChanged=!!t,!0},l.prototype.updateAfterEvent=function(){u.sys.$requestRenderingFlag=!0},l.dispatchTouchEvent=function(t,e,i,r,n,a,o,s){if(void 0===s&&(s=!1),!i&&!t.hasEventListener(e))return!0;var h=u.Event.create(l,e,i,r);h.$initTo(n,a,o),h.touchDown=s;var c=t.dispatchEvent(h);return u.Event.release(h),c},l.TOUCH_MOVE="touchMove",l.TOUCH_BEGIN="touchBegin",l.TOUCH_END="touchEnd",l.TOUCH_CANCEL="touchCancel",l.TOUCH_TAP="touchTap",l.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside",l}(u.Event);u.TouchEvent=e,__reflect(e.prototype,"egret.TouchEvent")}(egret||(egret={})),egret||(egret={}),function(r){var t=function(a){function t(t,e,i){void 0===t&&(t=4),void 0===e&&(e=4),void 0===i&&(i=1);var r=a.call(this)||this,n=r;return n.type="blur",n.$blurX=t,n.$blurY=e,n.$quality=i,n.blurXFilter=new o(t),n.blurYFilter=new s(e),n.onPropertyChange(),r}return __extends(t,a),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.$blurX},set:function(t){this.$blurX!=t&&(this.$blurX=t,this.blurXFilter.blurX=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.$blurY},set:function(t){this.$blurY!=t&&(this.$blurY=t,this.blurYFilter.blurY=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),t.prototype.$toJson=function(){return'{"blurX": '+this.$blurX+', "blurY": '+this.$blurY+', "quality": 1}'},t.prototype.updatePadding=function(){var t=this;t.paddingLeft=t.blurX,t.paddingRight=t.blurX,t.paddingTop=t.blurY,t.paddingBottom=t.blurY},t.prototype.onPropertyChange=function(){var t=this;t.updatePadding(),r.nativeRender&&(egret_native.NativeDisplayObject.setFilterPadding(t.blurXFilter.$id,0,0,t.paddingLeft,t.paddingRight),egret_native.NativeDisplayObject.setFilterPadding(t.blurYFilter.$id,t.paddingTop,t.paddingBottom,0,0),egret_native.NativeDisplayObject.setDataToFilter(t))},t}(r.Filter);r.BlurFilter=t,__reflect(t.prototype,"egret.BlurFilter");var o=function(i){function t(t){void 0===t&&(t=4);var e=i.call(this)||this;return r.nativeRender?e.type="blur":e.type="blurX",e.$uniforms.blur={x:t,y:0},e.onPropertyChange(),e}return __extends(t,i),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.$uniforms.blur.x},set:function(t){this.$uniforms.blur.x=t},enumerable:!0,configurable:!0}),t}(r.Filter);__reflect(o.prototype,"BlurXFilter",["egret.IBlurXFilter"]);var s=function(i){function t(t){void 0===t&&(t=4);var e=i.call(this)||this;return r.nativeRender?e.type="blur":e.type="blurY",e.$uniforms.blur={x:0,y:t},e.onPropertyChange(),e}return __extends(t,i),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.$uniforms.blur.y},set:function(t){this.$uniforms.blur.y=t},enumerable:!0,configurable:!0}),t}(r.Filter);__reflect(s.prototype,"BlurYFilter",["egret.IBlurYFilter"])}(egret||(egret={})),function(t){var e=function(i){function t(t){void 0===t&&(t=null);var e=i.call(this)||this;return e.$matrix=[],e.matrix2=[],e.type="colorTransform",e.$uniforms.matrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e.$uniforms.colorAdd={x:0,y:0,z:0,w:0},e.setMatrix(t),e.onPropertyChange(),e}return __extends(t,i),Object.defineProperty(t.prototype,"matrix",{get:function(){for(var t=0;t<20;t++)this.matrix2[t]=this.$matrix[t];return this.matrix2},set:function(t){this.setMatrix(t)},enumerable:!0,configurable:!0}),t.prototype.setMatrix=function(t){if(t)for(var e=0;e<20;e++)this.$matrix[e]=t[e];else for(e=0;e<20;e++)this.$matrix[e]=0==e||6==e||12==e||18==e?1:0;for(var i=this.$matrix,r=this.$uniforms.matrix,n=this.$uniforms.colorAdd,a=(e=0,0);e<i.length;e++)4===e?n.x=i[e]/255:9===e?n.y=i[e]/255:14===e?n.z=i[e]/255:19===e?n.w=i[e]/255:(r[a]=i[e],a++);this.onPropertyChange()},t.prototype.$toJson=function(){return'{"matrix": ['+this.$matrix.toString()+"]}"},t}(t.Filter);t.ColorMatrixFilter=e,__reflect(e.prototype,"egret.ColorMatrixFilter")}(egret||(egret={})),function(e){var i,o={},r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),a=0,s=function(){for(var t=0;t<36;t++)8===t||13===t||18===t||23===t?n[t]="-":14===t?n[t]="4":(a<=2&&(a=33554432+16777216*Math.random()|0),i=15&a,a>>=4,n[t]=r[19===t?3&i|8:i]);return n.join("")},t=function(a){function t(t,e,i){void 0===i&&(i={});var r=a.call(this)||this;r.$padding=0;var n=(r.$vertexSrc=t)+(r.$fragmentSrc=e);return o[n]||(o[n]=s()),r.$shaderKey=o[n],r.$uniforms=i,r.type="custom",r}return __extends(t,a),Object.defineProperty(t.prototype,"padding",{get:function(){return this.$padding},set:function(t){this.$padding!=t&&(this.$padding=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.$uniforms},enumerable:!0,configurable:!0}),t.prototype.onPropertyChange=function(){if(e.nativeRender){var t=this;egret_native.NativeDisplayObject.setFilterPadding(t.$id,t.$padding,t.$padding,t.$padding,t.$padding),egret_native.NativeDisplayObject.setDataToFilter(t)}},t}(e.Filter);e.CustomFilter=t,__reflect(t.prototype,"egret.CustomFilter")}(egret||(egret={})),function(a){var t=function(d){function t(t,e,i,r,n,a,o,s,h,c,l){void 0===t&&(t=4),void 0===e&&(e=45),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=4),void 0===a&&(a=4),void 0===o&&(o=1),void 0===s&&(s=1),void 0===h&&(h=!1),void 0===c&&(c=!1),void 0===l&&(l=!1);var u=d.call(this,i,r,n,a,o,s,h,c)||this,p=u;return p.$distance=t,p.$angle=e,p.$hideObject=l,p.$uniforms.dist=t,p.$uniforms.angle=e/180*Math.PI,p.$uniforms.hideObject=l?1:0,p.onPropertyChange(),u}return __extends(t,d),Object.defineProperty(t.prototype,"distance",{get:function(){return this.$distance},set:function(t){this.$distance!=t&&(this.$distance=t,this.$uniforms.dist=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.$angle},set:function(t){this.$angle!=t&&(this.$angle=t,this.$uniforms.angle=t/180*Math.PI,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideObject",{get:function(){return this.$hideObject},set:function(t){this.$hideObject!=t&&(this.$hideObject=t,this.$uniforms.hideObject=t?1:0)},enumerable:!0,configurable:!0}),t.prototype.$toJson=function(){return'{"distance": '+this.$distance+', "angle": '+this.$angle+', "color": '+this.$color+', "red": '+this.$red+', "green": '+this.$green+', "blue": '+this.$blue+', "alpha": '+this.$alpha+', "blurX": '+this.$blurX+', "blurY": '+this.blurY+', "strength": '+this.$strength+', "quality": '+this.$quality+', "inner": '+this.$inner+', "knockout": '+this.$knockout+', "hideObject": '+this.$hideObject+"}"},t.prototype.updatePadding=function(){var t=this;t.paddingLeft=t.blurX,t.paddingRight=t.blurX,t.paddingTop=t.blurY,t.paddingBottom=t.blurY;var e=t.distance||0,i=t.angle||0,r=0,n=0;0!=e&&(r=0<(r=e*a.NumberUtils.cos(i))?Math.ceil(r):Math.floor(r),n=0<(n=e*a.NumberUtils.sin(i))?Math.ceil(n):Math.floor(n),t.paddingLeft+=r,t.paddingRight+=r,t.paddingTop+=n,t.paddingBottom+=n)},t}(a.GlowFilter);a.DropShadowFilter=t,__reflect(t.prototype,"egret.DropShadowFilter")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.LINEAR="linear",t.RADIAL="radial",t}();t.GradientType=e,__reflect(e.prototype,"egret.GradientType")}(egret||(egret={})),function(f){function l(t){return(t%=2*Math.PI)<0&&(t+=2*Math.PI),t}function u(t,e){for(var i=[],r=0;r<e;r++){var n=a(t,r/e);n&&i.push(n)}return i}function a(t,e){var i=0,r=0,n=0,a=t.length;if(a/2==3){var o=t[i++],s=t[i++],h=t[i++],c=t[i++],l=t[i++],u=t[i++];r=$(o,h,l,e),n=$(s,c,u,e)}else if(a/2==4){o=t[i++],s=t[i++],h=t[i++],c=t[i++],l=t[i++],u=t[i++];var p=t[i++],d=t[i++];r=g(o,h,l,p,e),n=g(s,c,u,d,e)}return f.Point.create(r,n)}function $(t,e,i,r){return Math.pow(1-r,2)*t+2*r*(1-r)*e+Math.pow(r,2)*i}function g(t,e,i,r,n){return Math.pow(1-n,3)*t+3*n*Math.pow(1-n,2)*e+3*(1-n)*Math.pow(n,2)*i+Math.pow(n,3)*r}var t=function(e){function t(){var t=e.call(this)||this;return t.lastX=0,t.lastY=0,t.fillPath=null,t.strokePath=null,t.topLeftStrokeWidth=0,t.bottomRightStrokeWidth=0,t.minX=1/0,t.minY=1/0,t.maxX=-1/0,t.maxY=-1/0,t.includeLastPosition=!0,t.$renderNode=new f.sys.GraphicsNode,t}return __extends(t,e),t.prototype.$setTarget=function(t){this.$targetDisplay&&(this.$targetDisplay.$renderNode=null),t.$renderNode=this.$renderNode,this.$targetDisplay=t,this.$targetIsSprite=t instanceof f.Sprite},t.prototype.setStrokeWidth=function(t){switch(t){case 1:this.topLeftStrokeWidth=0,this.bottomRightStrokeWidth=1;break;case 3:this.topLeftStrokeWidth=1,this.bottomRightStrokeWidth=2;break;default:var e=0|Math.ceil(.5*t);this.topLeftStrokeWidth=e,this.bottomRightStrokeWidth=e}},t.prototype.beginFill=function(t,e){void 0===e&&(e=1),t=+t||0,e=+e||0,f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setBeginFill(t,e),this.fillPath=this.$renderNode.beginFill(t,e,this.strokePath),1<this.$renderNode.drawData.length&&this.fillPath.moveTo(this.lastX,this.lastY)},t.prototype.beginGradientFill=function(t,e,i,r,n){void 0===n&&(n=null),f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setBeginGradientFill(t,e,i,r,n),this.fillPath=this.$renderNode.beginGradientFill(t,e,i,r,n,this.strokePath),1<this.$renderNode.drawData.length&&this.fillPath.moveTo(this.lastX,this.lastY)},t.prototype.endFill=function(){f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setEndFill(),this.fillPath=null},t.prototype.lineStyle=function(t,e,i,r,n,a,o,s,h){void 0===t&&(t=NaN),void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=!1),void 0===n&&(n="normal"),void 0===a&&(a=null),void 0===o&&(o=null),void 0===s&&(s=3),t=+t||0,e=+e||0,i=+i||0,s=+s||0,f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setLineStyle(t,e,i,r,n,a,o,s),t<=0?(this.strokePath=null,this.setStrokeWidth(0)):(this.setStrokeWidth(t),this.strokePath=this.$renderNode.lineStyle(t,e,i,a,o,s,h),1<this.$renderNode.drawData.length&&this.strokePath.moveTo(this.lastX,this.lastY))},t.prototype.drawRect=function(t,e,i,r){t=+t||0,e=+e||0,i=+i||0,r=+r||0,f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawRect(t,e,i,r);var n=this.fillPath,a=this.strokePath;n&&n.drawRect(t,e,i,r),a&&a.drawRect(t,e,i,r),this.extendBoundsByPoint(t+i,e+r),this.updatePosition(t,e),this.dirty()},t.prototype.drawRoundRect=function(t,e,i,r,n,a){t=+t||0,e=+e||0,i=+i||0,r=+r||0,n=+n||0,a=+a||0,f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawRoundRect(t,e,i,r,n,a);var o=this.fillPath,s=this.strokePath;o&&o.drawRoundRect(t,e,i,r,n,a),s&&s.drawRoundRect(t,e,i,r,n,a);var h=t+i,c=e+r,l=c-(a?.5*a|0:.5*n|0);this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(h,c),this.updatePosition(h,l),this.dirty()},t.prototype.drawCircle=function(t,e,i){t=+t||0,e=+e||0,i=+i||0,f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawCircle(t,e,i);var r=this.fillPath,n=this.strokePath;r&&r.drawCircle(t,e,i),n&&n.drawCircle(t,e,i),this.extendBoundsByPoint(t-i-1,e-i-1),this.extendBoundsByPoint(t+i+2,e+i+2),this.updatePosition(t+i,e),this.dirty()},t.prototype.drawEllipse=function(t,e,i,r){t=+t||0,e=+e||0,i=+i||0,r=+r||0,f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawEllipse(t,e,i,r);var n=this.fillPath,a=this.strokePath;n&&n.drawEllipse(t,e,i,r),a&&a.drawEllipse(t,e,i,r),this.extendBoundsByPoint(t-1,e-1),this.extendBoundsByPoint(t+i+2,e+r+2),this.updatePosition(t+i,e+.5*r),this.dirty()},t.prototype.moveTo=function(t,e){t=+t||0,e=+e||0,f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setMoveTo(t,e);var i=this.fillPath,r=this.strokePath;i&&i.moveTo(t,e),r&&r.moveTo(t,e),this.includeLastPosition=!1,this.lastX=t,this.lastY=e,this.dirty()},t.prototype.lineTo=function(t,e){t=+t||0,e=+e||0,f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setLineTo(t,e);var i=this.fillPath,r=this.strokePath;i&&i.lineTo(t,e),r&&r.lineTo(t,e),this.updatePosition(t,e),this.dirty()},t.prototype.curveTo=function(t,e,i,r){t=+t||0,e=+e||0,i=+i||0,r=+r||0,f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setCurveTo(t,e,i,r);var n=this.fillPath,a=this.strokePath;n&&n.curveTo(t,e,i,r),a&&a.curveTo(t,e,i,r);for(var o=u([this.lastX||0,this.lastY||0,t,e,i,r],50),s=0;s<o.length;s++){var h=o[s];this.extendBoundsByPoint(h.x,h.y),f.Point.release(h)}this.extendBoundsByPoint(i,r),this.updatePosition(i,r),this.dirty()},t.prototype.cubicCurveTo=function(t,e,i,r,n,a){t=+t||0,e=+e||0,i=+i||0,r=+r||0,n=+n||0,a=+a||0,f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setCubicCurveTo(t,e,i,r,n,a);var o=this.fillPath,s=this.strokePath;o&&o.cubicCurveTo(t,e,i,r,n,a),s&&s.cubicCurveTo(t,e,i,r,n,a);for(var h=u([this.lastX||0,this.lastY||0,t,e,i,r,n,a],50),c=0;c<h.length;c++){var l=h[c];this.extendBoundsByPoint(l.x,l.y),f.Point.release(l)}this.extendBoundsByPoint(n,a),this.updatePosition(n,a),this.dirty()},t.prototype.drawArc=function(t,e,i,r,n,a){if(!(i<0||r===n)){t=+t||0,e=+e||0,i=+i||0,n=+n||0,a=!!a,r=l(r=+r||0),n=l(n),f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawArc(t,e,i,r,n,a);var o=this.fillPath,s=this.strokePath;o&&(o.$lastX=this.lastX,o.$lastY=this.lastY,o.drawArc(t,e,i,r,n,a)),s&&(s.$lastX=this.lastX,s.$lastY=this.lastY,s.drawArc(t,e,i,r,n,a)),a?this.arcBounds(t,e,i,n,r):this.arcBounds(t,e,i,r,n);var h=t+Math.cos(n)*i,c=e+Math.sin(n)*i;this.updatePosition(h,c),this.dirty()}},t.prototype.dirty=function(){if(this.$renderNode.dirtyRender=!0,!f.nativeRender){var t=this.$targetDisplay;t.$cacheDirty=!0;var e=t.$parent;e&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp());var i=t.$maskedObject;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp())}},t.prototype.arcBounds=function(t,e,i,r,n){var a=Math.PI;if(Math.abs(r-n)<.01)return this.extendBoundsByPoint(t-i,e-i),void this.extendBoundsByPoint(t+i,e+i);n<r&&(n+=2*a);for(var o=Math.cos(r)*i,s=Math.cos(n)*i,h=Math.min(o,s),c=Math.max(o,s),l=Math.sin(r)*i,u=Math.sin(n)*i,p=Math.min(l,u),d=Math.max(l,u),f=r/(.5*a),$=n/(.5*a),g=Math.ceil(f);g<=$;g++)switch(g%4){case 0:c=i;break;case 1:d=i;break;case 2:h=-i;break;case 3:p=-i}h=Math.floor(h),p=Math.floor(p),c=Math.ceil(c),d=Math.ceil(d),this.extendBoundsByPoint(h+t,p+e),this.extendBoundsByPoint(c+t,d+e)},t.prototype.clear=function(){f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setGraphicsClear(),this.$renderNode.clear(),this.updatePosition(0,0),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.dirty()},t.prototype.extendBoundsByPoint=function(t,e){this.extendBoundsByX(t),this.extendBoundsByY(e)},t.prototype.extendBoundsByX=function(t){this.minX=Math.min(this.minX,t-this.topLeftStrokeWidth),this.maxX=Math.max(this.maxX,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},t.prototype.extendBoundsByY=function(t){this.minY=Math.min(this.minY,t-this.topLeftStrokeWidth),this.maxY=Math.max(this.maxY,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},t.prototype.updateNodeBounds=function(){var t=this.$renderNode;t.x=this.minX,t.y=this.minY,t.width=Math.ceil(this.maxX-this.minX),t.height=Math.ceil(this.maxY-this.minY)},t.prototype.updatePosition=function(t,e){this.includeLastPosition||(this.extendBoundsByPoint(this.lastX,this.lastY),this.includeLastPosition=!0),this.lastX=t,this.lastY=e,this.extendBoundsByPoint(t,e)},t.prototype.$measureContentBounds=function(t){this.minX===1/0?t.setEmpty():t.setTo(this.minX,this.minY,this.maxX-this.minX,this.maxY-this.minY)},t.prototype.$hitTest=function(t,e){var i=this.$targetDisplay,r=i.$getInvertedConcatenatedMatrix(),n=r.a*t+r.c*e+r.tx,a=r.b*t+r.d*e+r.ty,o=f.sys.canvasHitTestBuffer;o.resize(3,3);var s=this.$renderNode,h=f.Matrix.create();h.identity(),h.translate(1-n,1-a),f.sys.canvasRenderer.drawNodeToBuffer(s,o,h,!0),f.Matrix.release(h);try{if(0===o.getPixels(1,1)[3])return null}catch(t){throw new Error(f.sys.tr(1039))}return i},t.prototype.$onRemoveFromStage=function(){this.$renderNode&&this.$renderNode.clean(),f.nativeRender&&egret_native.NativeDisplayObject.disposeGraphicData(this)},t}(f.HashObject);f.Graphics=t,__reflect(t.prototype,"egret.Graphics")}(egret||(egret={})),function(c){var t=Math.PI,o=2*t,l=t/180,i=[],e=function(s){function e(t,e,i,r,n,a){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===a&&(a=0);var o=s.call(this)||this;return o.a=t,o.b=e,o.c=i,o.d=r,o.tx=n,o.ty=a,o}return __extends(e,s),e.release=function(t){t&&i.push(t)},e.create=function(){var t=i.pop();return t||(t=new e),t},e.prototype.clone=function(){return new e(this.a,this.b,this.c,this.d,this.tx,this.ty)},e.prototype.concat=function(t){var e=this.a*t.a,i=0,r=0,n=this.d*t.d,a=this.tx*t.a+t.tx,o=this.ty*t.d+t.ty;0===this.b&&0===this.c&&0===t.b&&0===t.c||(e+=this.b*t.c,n+=this.c*t.b,i+=this.a*t.b+this.b*t.d,r+=this.c*t.a+this.d*t.c,a+=this.ty*t.c,o+=this.tx*t.b),this.a=e,this.b=i,this.c=r,this.d=n,this.tx=a,this.ty=o},e.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},e.prototype.identity=function(){this.a=this.d=1,this.b=this.c=this.tx=this.ty=0},e.prototype.invert=function(){this.$invertInto(this)},e.prototype.$invertInto=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,a=this.tx,o=this.ty;if(0==i&&0==r)return t.b=t.c=0,void(0==e||0==n?t.a=t.d=t.tx=t.ty=0:(e=t.a=1/e,n=t.d=1/n,t.tx=-e*a,t.ty=-n*o));var s=e*n-i*r;if(0!=s){s=1/s;var h=t.a=n*s;i=t.b=-i*s,r=t.c=-r*s,n=t.d=e*s,t.tx=-(h*a+r*o),t.ty=-(i*a+n*o)}else t.identity()},e.prototype.rotate=function(t){if(0!==(t=+t)){t/=l;var e=c.NumberUtils.cos(t),i=c.NumberUtils.sin(t),r=this.a,n=this.b,a=this.c,o=this.d,s=this.tx,h=this.ty;this.a=r*e-n*i,this.b=r*i+n*e,this.c=a*e-o*i,this.d=a*i+o*e,this.tx=s*e-h*i,this.ty=s*i+h*e}},e.prototype.scale=function(t,e){1!==t&&(this.a*=t,this.c*=t,this.tx*=t),1!==e&&(this.b*=e,this.d*=e,this.ty*=e)},e.prototype.setTo=function(t,e,i,r,n,a){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=a,this},e.prototype.transformPoint=function(t,e,i){var r=this.a*t+this.c*e+this.tx,n=this.b*t+this.d*e+this.ty;return i?(i.setTo(r,n),i):new c.Point(r,n)},e.prototype.translate=function(t,e){this.tx+=t,this.ty+=e},e.prototype.equals=function(t){return this.a==t.a&&this.b==t.b&&this.c==t.c&&this.d==t.d&&this.tx==t.tx&&this.ty==t.ty},e.prototype.prepend=function(t,e,i,r,n,a){var o=this.tx;if(1!=t||0!=e||0!=i||1!=r){var s=this.a,h=this.c;this.a=s*t+this.b*i,this.b=s*e+this.b*r,this.c=h*t+this.d*i,this.d=h*e+this.d*r}return this.tx=o*t+this.ty*i+n,this.ty=o*e+this.ty*r+a,this},e.prototype.append=function(t,e,i,r,n,a){var o=this.a,s=this.b,h=this.c,c=this.d;return 1==t&&0==e&&0==i&&1==r||(this.a=t*o+e*h,this.b=t*s+e*c,this.c=i*o+r*h,this.d=i*s+r*c),this.tx=n*o+a*h+this.tx,this.ty=n*s+a*c+this.ty,this},e.prototype.deltaTransformPoint=function(t){var e=this.a*t.x+this.c*t.y,i=this.b*t.x+this.d*t.y;return new c.Point(e,i)},e.prototype.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"},e.prototype.createBox=function(t,e,i,r,n){void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0);var a=this;if(0!==i){i/=l;var o=c.NumberUtils.cos(i),s=c.NumberUtils.sin(i);a.a=o*t,a.b=s*e,a.c=-s*t,a.d=o*e}else a.a=t,a.b=0,a.c=0,a.d=e;a.tx=r,a.ty=n},e.prototype.createGradientBox=function(t,e,i,r,n){void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),this.createBox(t/1638.4,e/1638.4,i,r+t/2,n+e/2)},e.prototype.$transformBounds=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,a=this.tx,o=this.ty,s=t.x,h=t.y,c=s+t.width,l=h+t.height,u=e*s+r*h+a,p=i*s+n*h+o,d=e*c+r*h+a,f=i*c+n*h+o,$=e*c+r*l+a,g=i*c+n*l+o,y=e*s+r*l+a,v=i*s+n*l+o,b=0;d<u&&(b=u,u=d,d=b),y<$&&(b=$,$=y,y=b),t.x=Math.floor(u<$?u:$),t.width=Math.ceil((y<d?d:y)-t.x),f<p&&(b=p,p=f,f=b),v<g&&(b=g,g=v,v=b),t.y=Math.floor(p<g?p:g),t.height=Math.ceil((v<f?f:v)-t.y)},e.prototype.getDeterminant=function(){return this.a*this.d-this.b*this.c},e.prototype.$getScaleX=function(){var t=this;if(0==t.b)return t.a;var e=Math.sqrt(t.a*t.a+t.b*t.b);return this.getDeterminant()<0?-e:e},e.prototype.$getScaleY=function(){var t=this;if(0==t.c)return t.d;var e=Math.sqrt(t.c*t.c+t.d*t.d);return this.getDeterminant()<0?-e:e},e.prototype.$getSkewX=function(){return this.d<0?Math.atan2(this.d,this.c)+t/2:Math.atan2(this.d,this.c)-t/2},e.prototype.$getSkewY=function(){return this.a<0?Math.atan2(this.b,this.a)-t:Math.atan2(this.b,this.a)},e.prototype.$updateScaleAndRotation=function(t,e,i,r){if(!(0!=i&&i!=o||0!=r&&r!=o))return this.a=t,this.b=this.c=0,void(this.d=e);i/=l,r/=l;var n=c.NumberUtils.cos(i),a=c.NumberUtils.sin(i);i==r?(this.a=n*t,this.b=a*t):(this.a=c.NumberUtils.cos(r)*t,this.b=c.NumberUtils.sin(r)*t),this.c=-a*e,this.d=n*e},e.prototype.$preMultiplyInto=function(t,e){var i=t.a*this.a,r=0,n=0,a=t.d*this.d,o=t.tx*this.a+this.tx,s=t.ty*this.d+this.ty;0===t.b&&0===t.c&&0===this.b&&0===this.c||(i+=t.b*this.c,a+=t.c*this.b,r+=t.a*this.b+t.b*this.d,n+=t.c*this.a+t.d*this.c,o+=t.ty*this.c,s+=t.tx*this.b),e.a=i,e.b=r,e.c=n,e.d=a,e.tx=o,e.ty=s},e}(c.HashObject);c.Matrix=e,__reflect(e.prototype,"egret.Matrix"),c.$TempMatrix=new e}(egret||(egret={})),function(t){var i=[],e=function(a){function e(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0);var n=a.call(this)||this;return n.x=t,n.y=e,n.width=i,n.height=r,n}return __extends(e,a),e.release=function(t){t&&i.push(t)},e.create=function(){var t=i.pop();return t||(t=new e),t},Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t-this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t-this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new t.Point(this.left,this.top)},set:function(t){this.top=t.y,this.left=t.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new t.Point(this.right,this.bottom)},set:function(t){this.bottom=t.y,this.right=t.x},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.prototype.setTo=function(t,e,i,r){return this.x=t,this.y=e,this.width=i,this.height=r,this},e.prototype.contains=function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e},e.prototype.intersection=function(t){return this.clone().$intersectInPlace(t)},e.prototype.inflate=function(t,e){this.x-=t,this.width+=2*t,this.y-=e,this.height+=2*e},e.prototype.$intersectInPlace=function(t){var e=this.x,i=this.y,r=t.x,n=t.y,a=Math.max(e,r),o=Math.min(e+this.width,r+t.width);if(a<=o){var s=Math.max(i,n),h=Math.min(i+this.height,n+t.height);if(s<=h)return this.setTo(a,s,o-a,h-s),this}return this.setEmpty(),this},e.prototype.intersects=function(t){return Math.max(this.x,t.x)<=Math.min(this.right,t.right)&&Math.max(this.y,t.y)<=Math.min(this.bottom,t.bottom)},e.prototype.isEmpty=function(){return this.width<=0||this.height<=0},e.prototype.setEmpty=function(){this.x=0,this.y=0,this.width=0,this.height=0},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.containsPoint=function(t){return this.x<=t.x&&this.x+this.width>t.x&&this.y<=t.y&&this.y+this.height>t.y},e.prototype.containsRect=function(t){var e=t.x+t.width,i=t.y+t.height,r=this.x+this.width,n=this.y+this.height;return t.x>=this.x&&t.x<r&&t.y>=this.y&&t.y<n&&e>this.x&&e<=r&&i>this.y&&i<=n},e.prototype.equals=function(t){return this===t||this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},e.prototype.inflatePoint=function(t){this.inflate(t.x,t.y)},e.prototype.offset=function(t,e){this.x+=t,this.y+=e},e.prototype.offsetPoint=function(t){this.offset(t.x,t.y)},e.prototype.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"},e.prototype.union=function(t){var e=this.clone();if(t.isEmpty())return e;if(e.isEmpty())return e.copyFrom(t),e;var i=Math.min(e.x,t.x),r=Math.min(e.y,t.y);return e.setTo(i,r,Math.max(e.right,t.right)-i,Math.max(e.bottom,t.bottom)-r),e},e.prototype.$getBaseWidth=function(t){var e=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t));return e*this.width+i*this.height},e.prototype.$getBaseHeight=function(t){var e=Math.abs(Math.cos(t));return Math.abs(Math.sin(t))*this.width+e*this.height},e}(t.HashObject);t.Rectangle=e,__reflect(e.prototype,"egret.Rectangle"),t.$TempRectangle=new e}(egret||(egret={})),function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.en_US=t.$locale_strings.en_US||{};var e=t.$locale_strings.en_US;e[1001]="Could not find Egret entry class: {0}。",e[1002]="Egret entry class '{0}' must inherit from egret.DisplayObject.",e[1003]="Parameter {0} must be non-null.",e[1004]="An object cannot be added as a child to one of it's children (or children's children, etc.).",e[1005]="An object cannot be added as a child of itself.",e[1006]="The supplied DisplayObject must be a child of the caller.",e[1007]="An index specified for a parameter was out of range.",e[1008]="Instantiate singleton error，singleton class {0} can not create multiple instances.",e[1009]='the Class {0} cannot use the property "{1}"',e[1010]='the property "{1}" of the Class "{0}" is readonly',e[1011]="Stream Error. URL: {0}",e[1012]="The type of parameter {0} must be Class.",e[1013]="Variable assignment is NaN, please see the code!",e[1014]='the constant "{1}" of the Class "{0}" is read-only',e[1015]="xml not found!",e[1016]="{0}has been obsoleted",e[1017]="The format of JSON file is incorrect: {0}\ndata: {1}",e[1018]="the scale9Grid is not correct",e[1019]="Network ab:{0}",e[1020]="Cannot initialize Shader",e[1021]="Current browser does not support webgl",e[1022]="{0} ArgumentError",e[1023]="This method is not available in the ScrollView!",e[1025]="end of the file",e[1026]="! EncodingError The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]=". called injection is not configured rule: {0}, please specify configuration during its initial years of injection rule, and then call the corresponding single case.",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="Photos can not be used across domains toDataURL to convert base64",e[1034]='Music file decoding failed: "{0}", please use the standard conversion tool reconversion under mp3.',e[1035]="Native does not support this feature!",e[1036]="Sound has stopped, please recall Sound.play () to play the sound!",e[1037]="Non-load the correct blob!",e[1038]="XML format error!",e[1039]="Cross domains pictures can not get pixel information!",e[1040]="hitTestPoint can not detect crossOrigin images! Please check if the display object has crossOrigin elements.",e[1041]="{0} is deprecated, please use {1} replace",e[1042]="The parameters passed in the region needs is an integer in drawToTexture method. Otherwise, some browsers will draw abnormal.",e[1043]="Compile errors in {0}, the attribute name: {1}, the attribute value: {2}.",e[1044]="The current version of the Runtime does not support video playback, please use the latest version",e[1045]="The resource url is not found",e[1046]="BitmapText no corresponding characters: {0}, please check the configuration file",e[1047]="egret.localStorage.setItem save failed,key={0}&value={1}",e[1048]="Video loading failed",e[1049]="In the absence of sound is not allowed to play after loading",e[1050]="ExternalInterface calls the method without js registration: {0}",e[1051]="runtime only support webgl render mode",e[3e3]="Theme configuration file failed to load: {0}",e[3001]="Cannot find the skin name which is configured in Theme: {0}",e[3002]='Index:"{0}" is out of the collection element index range',e[3003]="Cannot be available in this component. If this component is container, please continue to use",e[3004]="addChild(){0}addElement() replace",e[3005]="addChildAt(){0}addElementAt() replace",e[3006]="removeChild(){0}removeElement() replace",e[3007]="removeChildAt(){0}removeElementAt() replace",e[3008]="setChildIndex(){0}setElementIndex() replace",e[3009]="swapChildren(){0}swapElements() replace",e[3010]="swapChildrenAt(){0}swapElementsAt() replace",e[3011]='Index:"{0}" is out of the visual element index range',e[3012]="This method is not available in Scroller component!",e[3013]="UIStage is GUI root container, and only one such instant is in the display list！",e[3014]="set fullscreen error",e[3100]="Current browser does not support WebSocket",e[3101]="Please connect Socket firstly",e[3102]="Please set the type of binary type",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!"}(egret||(egret={})),(egret||(egret={})).JointStyle={BEVEL:"bevel",MITER:"miter",ROUND:"round"},function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.zh_CN=t.$locale_strings.zh_CN||{};var e=t.$locale_strings.zh_CN;e[1001]="找不到Egret入口类: {0}。",e[1002]="Egret入口类 {0} 必须继承自egret.DisplayObject。",e[1003]="参数 {0} 不能为 null。",e[1004]="无法将对象添加为它的一个子对象（或子对象的子对象等）的子对象。",e[1005]="不能将对象添加为其自身的子对象。",e[1006]="提供的 DisplayObject 必须是调用者的子级。",e[1007]="为参数指定的索引不在范围内。",e[1008]="实例化单例出错，不允许实例化多个 {0} 对象。",e[1009]="类 {0} 不可以使用属性 {1}",e[1010]="类 {0} 属性 {1} 是只读的",e[1011]="流错误。URL: {0}",e[1012]="参数 {0} 的类型必须为 Class。",e[1013]="变量赋值为NaN，请查看代码！",e[1014]="类 {0} 常量 {1} 是只读的",e[1015]="xml not found!",e[1016]="{0}已经废弃",e[1017]="JSON文件格式不正确: {0}\ndata: {1}",e[1018]="9宫格设置错误",e[1019]="网络异常:{0}",e[1020]="无法初始化着色器",e[1021]="当前浏览器不支持webgl",e[1022]="{0} ArgumentError",e[1023]="此方法在ScrollView内不可用!",e[1025]="遇到文件尾",e[1026]="EncodingError! The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]="调用了未配置的注入规则:{0}。 请先在项目初始化里配置指定的注入规则，再调用对应单例。",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="跨域图片不可以使用toDataURL来转换成base64",e[1034]='音乐文件解码失败："{0}"，请使用标准的转换工具重新转换下mp3。',e[1035]="Native 下暂未实现此功能！",e[1036]="声音已停止，请重新调用 Sound.play() 来播放声音！",e[1037]="非正确的blob加载！",e[1038]="XML 格式错误!",e[1039]="跨域图片不能获取像素信息!",e[1040]="hitTestPoint 不能对跨域图片进行检测! 请检查该显示对象内是否含有跨域元素",e[1041]="{0} 已废弃,请使用 {1} 代替",e[1042]="drawToTexture方法传入的区域各个参数需要为整数,否则某些浏览器绘制会出现异常",e[1043]="{0} 中存在编译错误，属性名 : {1}，属性值 : {2}",e[1044]="当前的 runtime 版本不支持视频播放,请使用最新的版本",e[1045]="没有设置要加载的资源地址",e[1046]="BitmapText 找不到对应字符:{0}，请检查配置文件",e[1047]="egret.localStorage.setItem保存失败,key={0}&value={1}",e[1048]="视频加载失败",e[1049]="声音在没有加载完之前不允许播放",e[1050]="ExternalInterface调用了js没有注册的方法: {0}",e[1051]="runtime 只支持 webgl 渲染模式",e[3e3]="主题配置文件加载失败: {0}",e[3001]="找不到主题中所配置的皮肤类名: {0}",e[3002]='索引:"{0}"超出集合元素索引范围',e[3003]="在此组件中不可用，若此组件为容器类，请使用",e[3004]="addChild(){0}addElement()代替",e[3005]="addChildAt(){0}addElementAt()代替",e[3006]="removeChild(){0}removeElement()代替",e[3007]="removeChildAt(){0}removeElementAt()代替",e[3008]="setChildIndex(){0}setElementIndex()代替",e[3009]="swapChildren(){0}swapElements()代替",e[3010]="swapChildrenAt(){0}swapElementsAt()代替",e[3011]='索引:"{0}"超出可视元素索引范围',e[3012]="此方法在Scroller组件内不可用!",e[3013]="UIStage是GUI根容器，只能有一个此实例在显示列表中！",e[3014]="设置全屏模式失败",e[3100]="当前浏览器不支持WebSocket",e[3101]="请先连接WebSocket",e[3102]="请先设置type为二进制类型",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!"}(egret||(egret={})),function(t){t.localStorage||(t.localStorage={})}(egret||(egret={})),function(t){var e,i;e=t.sys||(t.sys={}),i=[],e.$pushSoundChannel=function(t){i.indexOf(t)<0&&i.push(t)},e.$popSoundChannel=function(t){var e=i.indexOf(t);return 0<=e&&(i.splice(e,1),!0)}}(egret||(egret={})),egret||(egret={}),egret||(egret={}),function(t){var e;(e=t.HttpMethod||(t.HttpMethod={})).GET="GET",e.POST="POST"}(egret||(egret={})),egret||(egret={}),function(t){var e=function(){function t(){}return t.TEXT="text",t.ARRAY_BUFFER="arraybuffer",t}();t.HttpResponseType=e,__reflect(e.prototype,"egret.HttpResponseType")}(egret||(egret={})),egret||(egret={}),function(s){var h,t;h=s.sys||(s.sys={}),t=function(i){function o(t){var e=i.call(this)||this;return e.isStage=!1,e.$renderNode=new h.BitmapNode,e.renderBuffer=null,e.offsetX=0,e.offsetY=0,e.offsetMatrix=new s.Matrix,e.$canvasScaleX=1,e.$canvasScaleY=1,e.root=t,e.isStage=t instanceof s.Stage,e}return __extends(o,i),o.create=function(t){var e=new s.sys.DisplayList(t);try{var i=new h.RenderBuffer;e.renderBuffer=i}catch(t){return null}return e.root=t,e},o.prototype.$getRenderNode=function(){return this.$renderNode},o.prototype.setClipRect=function(t,e){t*=o.$canvasScaleX,e*=o.$canvasScaleY,this.renderBuffer.resize(t,e)},o.prototype.drawToSurface=function(){var t;this.$canvasScaleX=this.offsetMatrix.a=o.$canvasScaleX,this.$canvasScaleY=this.offsetMatrix.d=o.$canvasScaleY,this.isStage||this.changeSurfaceSize();var e=this.renderBuffer;if(e.clear(),t=h.systemRenderer.render(this.root,e,this.offsetMatrix),!this.isStage){var i=e.surface,r=this.$renderNode;r.drawData.length=0;var n=i.width,a=i.height;this.bitmapData?(this.bitmapData.source=i,this.bitmapData.width=n,this.bitmapData.height=a):this.bitmapData=new s.BitmapData(i),r.image=this.bitmapData,r.imageWidth=n,r.imageHeight=a,r.drawImage(0,0,n,a,-this.offsetX,-this.offsetY,n/this.$canvasScaleX,a/this.$canvasScaleY)}return t},o.prototype.changeSurfaceSize=function(){this.root;var t=this.offsetX,e=this.offsetY,i=this.root.$getOriginalBounds(),r=this.$canvasScaleX,n=this.$canvasScaleY;this.offsetX=-i.x,this.offsetY=-i.y,this.offsetMatrix.setTo(this.offsetMatrix.a,0,0,this.offsetMatrix.d,this.offsetX,this.offsetY);var a=this.renderBuffer,o=Math.max(257,i.width*r),s=Math.max(257,i.height*n);this.offsetX==t&&this.offsetY==e&&a.surface.width==o&&a.surface.height==s||a.resize(o,s)},o.$setCanvasScale=function(t,e){o.$canvasScaleX=t,o.$canvasScaleY=e,s.nativeRender&&egret_native.nrSetCanvasScaleFactor(o.$canvasScaleFactor,t,e)},o.$canvasScaleFactor=1,o.$canvasScaleX=1,o.$canvasScaleY=1,o}(s.HashObject),h.DisplayList=t,__reflect(t.prototype,"egret.sys.DisplayList")}(egret||(egret={})),egret||(egret={}),egret||(egret={}),function(f){!function(h){var t=function(n){function t(t,e,i){var r=n.call(this)||this;return r.isPlaying=!1,t||f.$error(1003,"buffer"),r.entryClassName=i,r.stage=e,r.screenDisplayList=r.createDisplayList(e,t),r.showFPS=!1,r.showLog=!1,r.stageDisplayList=null,f.nativeRender&&(egret_native.rootWebGLBuffer=t),r}return __extends(t,n),t.prototype.createDisplayList=function(t,e){var i=new h.DisplayList(t);return i.renderBuffer=e,t.$displayList=i},t.prototype.start=function(){!this.isPlaying&&this.stage&&(h.$TempStage=h.$TempStage||this.stage,this.isPlaying=!0,this.root||this.initialize(),f.ticker.$addPlayer(this))},t.prototype.initialize=function(){var t;if(this.entryClassName&&(t=f.getDefinitionByName(this.entryClassName)),t){var e=new t;(this.root=e)instanceof f.DisplayObject?this.stage.addChild(e):f.$error(1002,this.entryClassName)}else f.$error(1001,this.entryClassName)},t.prototype.stop=function(){this.pause(),this.stage=null},t.prototype.pause=function(){this.isPlaying&&(this.isPlaying=!1,f.ticker.$removePlayer(this))},t.prototype.$render=function(t,e){if(f.nativeRender)return egret_native.updateNativeRender(),void egret_native.nrRender();var i=this.stage,r=f.getTimer(),n=i.$displayList.drawToSurface(),a=f.getTimer();t&&this.showFPS&&c.update(n,a-r,e)},t.prototype.updateStageSize=function(t,e){var i=this.stage;i.$stageWidth=t,i.$stageHeight=e,f.nativeRender?egret_native.nrResize(t,e):(this.screenDisplayList.setClipRect(t,e),this.stageDisplayList&&this.stageDisplayList.setClipRect(t,e)),i.dispatchEventWith(f.Event.RESIZE)},t.prototype.displayFPS=function(t,e,i,r){if((e=!!e)&&(f.log=function(){for(var t=arguments.length,e="",i=0;i<t;i++)e+=arguments[i]+" ";h.$logToFPS(e),console.log.apply(console,d(arguments))},f.warn=function(){for(var t=arguments.length,e="",i=0;i<t;i++)e+=arguments[i]+" ";h.$warnToFPS(e),console.warn.apply(console,d(arguments))},f.error=function(){for(var t=arguments.length,e="",i=0;i<t;i++)e+=arguments[i]+" ";h.$errorToFPS(e),console.error.apply(console,d(arguments))}),this.showFPS=!!t,this.showLog=e,!c){c=new FPS(this.stage,t,e,i,r);for(var n=l.length,a=0;a<n;a++)c.updateInfo(l[a]);l=null;var o=u.length;for(a=0;a<o;a++)c.updateWarn(u[a]);u=null;var s=p.length;for(a=0;a<s;a++)c.updateError(p[a]);p=null}},t}(f.HashObject);h.Player=t,__reflect(t.prototype,"egret.sys.Player");var c,l=[],u=[],p=[];h.$logToFPS=function(t){c?c.updateInfo(t):l.push(t)},h.$warnToFPS=function(t){c?c.updateWarn(t):u.push(t)},h.$errorToFPS=function(t){c?c.updateError(t):p.push(t)};var e=function(){function t(t,e,i,r,n){var a;this.showFPS=e,this.showLog=i,this.logFilter=r,this.styles=n,this.infoLines=[],this.totalTime=0,this.totalTick=0,this.lastTime=0,this.drawCalls=0,this.costRender=0,this.costTicker=0,this.infoLines=[],this.totalTime=0,this.totalTick=0,this.lastTime=0,this.drawCalls=0,this.costRender=0,this.costTicker=0,this._stage=t,this.showFPS=e,this.showLog=i,this.logFilter=r,this.styles=n,this.fpsDisplay=new f.FPSDisplay(t,e,i,r,n);try{a=r?new RegExp(r):null}catch(t){f.log(t)}this.filter=function(t){return a?a.test(t):!r||0==t.indexOf(r)}}return t.prototype.update=function(t,e,i){var r=f.getTimer();if(this.totalTime+=r-this.lastTime,this.lastTime=r,this.totalTick++,this.drawCalls+=t,this.costRender+=e,this.costTicker+=i,1e3<=this.totalTime){var n=Math.min(Math.ceil(1e3*this.totalTick/this.totalTime),f.ticker.$frameRate),a=Math.round(this.drawCalls/this.totalTick),o=Math.round(this.costRender/this.totalTick),s=Math.round(this.costTicker/this.totalTick);this.fpsDisplay.update({fps:n,draw:a,costTicker:s,costRender:o}),this.totalTick=0,this.totalTime=this.totalTime%1e3,this.drawCalls=0,this.costRender=0,this.costTicker=0}},t.prototype.updateInfo=function(t){t&&this.showLog&&this.filter(t)&&this.fpsDisplay.updateInfo(t)},t.prototype.updateWarn=function(t){t&&this.showLog&&this.filter(t)&&(this.fpsDisplay.updateWarn?this.fpsDisplay.updateWarn(t):this.fpsDisplay.updateInfo("[Warning]"+t))},t.prototype.updateError=function(t){t&&this.showLog&&this.filter(t)&&(this.fpsDisplay.updateError?this.fpsDisplay.updateError(t):this.fpsDisplay.updateInfo("[Error]"+t))},t}();function d(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e}__reflect(e.prototype,"FPSImpl"),__global.FPS=e,f.warn=function(){console.warn.apply(console,d(arguments))},f.error=function(){console.error.apply(console,d(arguments))},f.assert=function(){console.assert.apply(console,d(arguments))},f.log=function(){console.log.apply(console,d(arguments))}}(f.sys||(f.sys={}))}(egret||(egret={})),function(t){if(t.nativeRender=__global.nativeRender,t.nativeRender){var e=egret_native.nrABIVersion,i=egret_native.nrMinEgretVersion;if(e<4){t.nativeRender=!1;var r="需要升级微端版本到 0.1.8 才可以开启原生渲染加速";t.sys.$warnToFPS(r),t.warn(r)}else if(4<e){t.nativeRender=!1;r="需要升级引擎版本到 "+i+" 才可以开启原生渲染加速";t.sys.$warnToFPS(r),t.warn(r)}}}(egret||(egret={})),function(h){var t=function(i){function t(t){var e=i.call(this,t)||this;return e._verticesDirty=!0,e._bounds=new h.Rectangle,e.$renderNode=new h.sys.MeshNode,e}return __extends(t,i),t.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(12)},t.prototype.setBitmapDataToWasm=function(t){this.$nativeDisplayObject.setBitmapDataToMesh(t)},t.prototype.$updateRenderNode=function(){var t=this.$bitmapData;if(t){h.$TextureScaleFactor;var e=this.$renderNode;e.smoothing=this.$smoothing,e.image=t,e.imageWidth=this.$sourceWidth,e.imageHeight=this.$sourceHeight;var i=isNaN(this.$explicitBitmapWidth)?this.$textureWidth:this.$explicitBitmapWidth,r=isNaN(this.$explicitBitmapHeight)?this.$textureHeight:this.$explicitBitmapHeight,n=i/this.$textureWidth,a=r/this.$textureHeight,o=this.$bitmapWidth,s=this.$bitmapHeight;e.drawMesh(this.$bitmapX,this.$bitmapY,o,s,this.$offsetX*n,this.$offsetY*a,n*o,a*s)}},t.prototype.$updateVertices=function(){if(this._verticesDirty=!0,this.$renderDirty=!0,h.nativeRender){var t=this.$renderNode;this.$nativeDisplayObject.setDataToMesh(t.vertices,t.indices,t.uvs)}else{var e=this.$parent;e&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp());var i=this.$maskedObject;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp())}},t.prototype.$measureContentBounds=function(t){if(this._verticesDirty){this._verticesDirty=!1;var e=this.$renderNode,i=e.vertices;if(i.length){this._bounds.setTo(Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(var r=0,n=i.length;r<n;r+=2){var a=i[r],o=i[r+1];this._bounds.x>a&&(this._bounds.x=a),this._bounds.width<a&&(this._bounds.width=a),this._bounds.y>o&&(this._bounds.y=o),this._bounds.height<o&&(this._bounds.height=o)}this._bounds.width-=this._bounds.x,this._bounds.height-=this._bounds.y}else this._bounds.setTo(0,0,0,0);e.bounds.copyFrom(this._bounds)}t.copyFrom(this._bounds)},t}(h.Bitmap);h.Mesh=t,__reflect(t.prototype,"egret.Mesh")}(egret||(egret={})),function(u){var t,e;t=u.sys||(u.sys={}),e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.calculateStageSize=function(t,e,i,r,n){var a=e,o=i,s=r,h=n,c=e/s||0,l=i/h||0;switch(t){case u.StageScaleMode.EXACT_FIT:break;case u.StageScaleMode.FIXED_HEIGHT:s=Math.round(e/l);break;case u.StageScaleMode.FIXED_WIDTH:h=Math.round(i/c);break;case u.StageScaleMode.NO_BORDER:l<c?o=Math.round(h*c):a=Math.round(s*l);break;case u.StageScaleMode.SHOW_ALL:l<c?a=Math.round(s*l):o=Math.round(h*c);break;case u.StageScaleMode.FIXED_NARROW:l<c?s=Math.round(e/l):h=Math.round(i/c);break;case u.StageScaleMode.FIXED_WIDE:l<c?h=Math.round(i/c):s=Math.round(e/l);break;default:s=e,h=i}return u.Capabilities.runtimeType!=u.RuntimeType.WXGAME&&(s%2!=0&&(s+=1),h%2!=0&&(h+=1),a%2!=0&&(a+=1),o%2!=0&&(o+=1)),{stageWidth:s,stageHeight:h,displayWidth:a,displayHeight:o}},e}(u.HashObject),t.DefaultScreenAdapter=e,__reflect(e.prototype,"egret.sys.DefaultScreenAdapter",["egret.sys.IScreenAdapter"])}(egret||(egret={})),function(t){var e=function(){function t(){}return t.NO_SCALE="noScale",t.SHOW_ALL="showAll",t.NO_BORDER="noBorder",t.EXACT_FIT="exactFit",t.FIXED_WIDTH="fixedWidth",t.FIXED_HEIGHT="fixedHeight",t.FIXED_NARROW="fixedNarrow",t.FIXED_WIDE="fixedWide",t}();t.StageScaleMode=e,__reflect(e.prototype,"egret.StageScaleMode")}(egret||(egret={})),function(t){t.sys||(t.sys={})}(egret||(egret={})),function($){!function(f){f.$START_TIME=0,f.$invalidateRenderFlag=!1,f.$requestRenderingFlag=!1;var t=function(){function t(){this.playerList=[],this.callBackList=[],this.thisObjectList=[],this.$frameRate=30,this.lastTimeStamp=0,this.costEnterFrame=0,this.isPaused=!1,$.ticker&&$.$error(1008,"egret.sys.SystemTicker"),f.$START_TIME=Date.now(),this.frameDeltaTime=1e3/this.$frameRate,this.lastCount=this.frameInterval=Math.round(6e4/this.$frameRate)}return t.prototype.$addPlayer=function(t){-1==this.playerList.indexOf(t)&&(egret_stages.push(t.stage),this.playerList=this.playerList.concat(),this.playerList.push(t))},t.prototype.$removePlayer=function(t){var e=this.playerList.indexOf(t);if(-1!==e){var i=egret_stages.indexOf(t.stage);egret_stages.splice(i,1),this.playerList=this.playerList.concat(),this.playerList.splice(e,1)}},t.prototype.$startTick=function(t,e){-1==this.getTickIndex(t,e)&&(this.concatTick(),this.callBackList.push(t),this.thisObjectList.push(e))},t.prototype.$stopTick=function(t,e){var i=this.getTickIndex(t,e);-1!=i&&(this.concatTick(),this.callBackList.splice(i,1),this.thisObjectList.splice(i,1))},t.prototype.getTickIndex=function(t,e){for(var i=this.callBackList,r=this.thisObjectList,n=i.length-1;0<=n;n--)if(i[n]==t&&r[n]==e)return n;return-1},t.prototype.concatTick=function(){this.callBackList=this.callBackList.concat(),this.thisObjectList=this.thisObjectList.concat()},t.prototype.$setFrameRate=function(t){return!(t<=0)&&(this.$frameRate!=t&&(60<(this.$frameRate=t)&&(t=60),this.frameDeltaTime=1e3/t,this.lastCount=this.frameInterval=Math.round(6e4/t),!0))},t.prototype.pause=function(){this.isPaused=!0},t.prototype.resume=function(){this.isPaused=!1},t.prototype.update=function(){for(var t=$.getTimer(),e=this.callBackList,i=this.thisObjectList,r=e.length,n=f.$requestRenderingFlag,a=$.getTimer(),o=0,s=$.lifecycle.contexts;o<s.length;o++){var h=s[o];h.onUpdate&&h.onUpdate()}if(this.isPaused)this.lastTimeStamp=a;else{this.callLaterAsyncs();for(var c=0;c<r;c++)e[c].call(i[c],a)&&(n=!0);var l=$.getTimer(),u=a-this.lastTimeStamp;if(this.lastTimeStamp=a,u>=this.frameDeltaTime)this.lastCount=this.frameInterval;else{if(this.lastCount-=1e3,0<this.lastCount)return void(n&&this.render(!1,this.costEnterFrame+l-t));this.lastCount+=this.frameInterval}this.render(!0,this.costEnterFrame+l-t);var p=$.getTimer();this.broadcastEnterFrame();var d=$.getTimer();this.costEnterFrame=d-p}},t.prototype.render=function(t,e){var i=this.playerList,r=i.length;if(0!=r){this.callLaters(),f.$invalidateRenderFlag&&(this.broadcastRender(),f.$invalidateRenderFlag=!1);for(var n=0;n<r;n++)i[n].$render(t,e);f.$requestRenderingFlag=!1}},t.prototype.broadcastEnterFrame=function(){var t=$.DisplayObject.$enterFrameCallBackList,e=t.length;if(0!=e){t=t.concat();for(var i=0;i<e;i++)t[i].dispatchEventWith($.Event.ENTER_FRAME)}},t.prototype.broadcastRender=function(){var t=$.DisplayObject.$renderCallBackList,e=t.length;if(0!=e){t=t.concat();for(var i=0;i<e;i++)t[i].dispatchEventWith($.Event.RENDER)}},t.prototype.callLaters=function(){var t,e,i;if(0<$.$callLaterFunctionList.length&&(t=$.$callLaterFunctionList,$.$callLaterFunctionList=[],e=$.$callLaterThisList,$.$callLaterThisList=[],i=$.$callLaterArgsList,$.$callLaterArgsList=[]),t)for(var r=t.length,n=0;n<r;n++){var a=t[n];null!=a&&a.apply(e[n],i[n])}},t.prototype.callLaterAsyncs=function(){if(0<$.$callAsyncFunctionList.length){var t=$.$callAsyncFunctionList,e=$.$callAsyncThisList,i=$.$callAsyncArgsList;$.$callAsyncFunctionList=[],$.$callAsyncThisList=[],$.$callAsyncArgsList=[];for(var r=0;r<t.length;r++){var n=t[r];null!=n&&n.apply(e[r],i[r])}}},t}();f.SystemTicker=t,__reflect(t.prototype,"egret.sys.SystemTicker")}($.sys||($.sys={}))}(egret||(egret={})),function(n){!function(i){i.contexts=[];var e=!0,r=function(){function t(){}return t.prototype.pause=function(){e&&(e=!1,i.stage.dispatchEvent(new n.Event(n.Event.DEACTIVATE)),i.onPause&&i.onPause())},t.prototype.resume=function(){e||(e=!0,i.stage.dispatchEvent(new n.Event(n.Event.ACTIVATE)),i.onResume&&i.onResume())},t}();i.LifecycleContext=r,__reflect(r.prototype,"egret.lifecycle.LifecycleContext"),i.addLifecycleListener=function(t){var e=new r;i.contexts.push(e),t(e)}}(n.lifecycle||(n.lifecycle={})),n.ticker=new n.sys.SystemTicker}(egret||(egret={})),global.egret_stages=[],function(a){var t,e;t=a.sys||(a.sys={}),e=function(i){function t(t){var e=i.call(this)||this;return e.maxTouches=0,e.useTouchesCount=0,e.touchDownTarget={},e.lastTouchX=-1,e.lastTouchY=-1,e.stage=t,e}return __extends(t,i),t.prototype.$initMaxTouches=function(){this.maxTouches=this.stage.$maxTouches},t.prototype.onTouchBegin=function(t,e,i){if(!(this.useTouchesCount>=this.maxTouches)){isNaN(window.sgScreenOffsetY)||(e-=window.sgScreenOffsetY),this.lastTouchX=t,this.lastTouchY=e;var r=this.findTarget(t,e);null==this.touchDownTarget[i]&&(this.touchDownTarget[i]=r,this.useTouchesCount++),a.TouchEvent.dispatchTouchEvent(r,a.TouchEvent.TOUCH_BEGIN,!0,!0,t,e,i,!0)}},t.prototype.onTouchMove=function(t,e,i){if(null!=this.touchDownTarget[i]&&(isNaN(window.sgScreenOffsetY)||(e-=window.sgScreenOffsetY),this.lastTouchX!=t||this.lastTouchY!=e)){this.lastTouchX=t,this.lastTouchY=e;var r=this.findTarget(t,e);a.TouchEvent.dispatchTouchEvent(r,a.TouchEvent.TOUCH_MOVE,!0,!0,t,e,i,!0)}},t.prototype.onTouchEnd=function(t,e,i){if(null!=this.touchDownTarget[i]){isNaN(window.sgScreenOffsetY)||(e-=window.sgScreenOffsetY);var r=this.findTarget(t,e),n=this.touchDownTarget[i];delete this.touchDownTarget[i],this.useTouchesCount--,a.TouchEvent.dispatchTouchEvent(r,a.TouchEvent.TOUCH_END,!0,!0,t,e,i,!1),n==r?a.TouchEvent.dispatchTouchEvent(r,a.TouchEvent.TOUCH_TAP,!0,!0,t,e,i,!1):a.TouchEvent.dispatchTouchEvent(n,a.TouchEvent.TOUCH_RELEASE_OUTSIDE,!0,!0,t,e,i,!1)}},t.prototype.findTarget=function(t,e){var i=this.stage.$hitTest(t,e);return i||(i=this.stage),i},t}(a.HashObject),t.TouchHandler=e,__reflect(e.prototype,"egret.sys.TouchHandler")}(egret||(egret={})),function(X){var t,e;t=X.sys||(X.sys={}),e=function(e){function O(){var t=e.call(this)||this;return t.image=null,t.smoothing=!0,t.blendMode=null,t.alpha=NaN,t.filter=null,t.rotated=!1,t.type=1,t}return __extends(O,e),O.prototype.drawImage=function(t,e,i,r,n,a,o,s){this.drawData.push(t,e,i,r,n,a,o,s),this.renderCount++},O.prototype.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.image=null,this.matrix=null,this.blendMode=null,this.alpha=NaN,this.filter=null},O.$updateTextureData=function(t,e,i,r,n,a,o,s,h,c,l,u,p,d,f,$){if(e){var g=X.$TextureScaleFactor;if(t.smoothing=$,t.image=e,t.imageWidth=p,t.imageHeight=d,f==X.BitmapFillMode.SCALE){var y=l/h*g,v=u/c*g;t.drawImage(i,r,n,a,y*o,v*s,y*n,v*a)}else if(f==X.BitmapFillMode.CLIP){var b=Math.min(h,l),m=Math.min(c,u);O.drawClipImage(t,g,i,r,x=n*g,T=a*g,o,s,b,m)}else for(var x=n*g,T=a*g,_=0;_<l;_+=h)for(var D=0;D<u;D+=c){b=Math.min(l-_,h),m=Math.min(u-D,c);O.drawClipImage(t,g,i,r,x,T,o,s,b,m,_,D)}}},O.$updateTextureDataWithScale9Grid=function(t,e,i,r,n,a,o,s,h,c,l,u,p,d,f,$){t.smoothing=$,t.image=e,t.imageWidth=d,t.imageHeight=f;var g=a,y=o;u-=c-a*X.$TextureScaleFactor,p-=l-o*X.$TextureScaleFactor;var v=i.x-s,b=i.y-h,m=v/X.$TextureScaleFactor,x=b/X.$TextureScaleFactor,T=i.width/X.$TextureScaleFactor,_=i.height/X.$TextureScaleFactor;0==_&&(_=1,y<=x&&x--),0==T&&(T=1,g<=m&&m--);var D=r,O=D+m,w=O+T,E=g-m-T,R=n,S=R+x,F=S+_,C=y-x-_,P=E*X.$TextureScaleFactor,M=C*X.$TextureScaleFactor;if((m+E)*X.$TextureScaleFactor>u||(x+C)*X.$TextureScaleFactor>p)t.drawImage(r,n,a,o,s,h,u,p);else{var N=s,j=N+v,k=N+(u-P),A=u-v-P,B=h,L=B+b,I=B+p-M,U=p-b-M;0<x&&(0<m&&t.drawImage(D,R,m,x,N,B,v,b),0<T&&t.drawImage(O,R,T,x,j,B,A,b),0<E&&t.drawImage(w,R,E,x,k,B,P,b)),0<_&&(0<m&&t.drawImage(D,S,m,_,N,L,v,U),0<T&&t.drawImage(O,S,T,_,j,L,A,U),0<E&&t.drawImage(w,S,E,_,k,L,P,U)),0<C&&(0<m&&t.drawImage(D,F,m,C,N,I,v,M),0<T&&t.drawImage(O,F,T,C,j,I,A,M),0<E&&t.drawImage(w,F,E,C,k,I,P,M))}},O.drawClipImage=function(t,e,i,r,n,a,o,s,h,c,l,u){void 0===l&&(l=0),void 0===u&&(u=0);var p=o+n-h;0<p&&(n-=p),0<(p=s+a-c)&&(a-=p),t.drawImage(i,r,n/e,a/e,l+o,u+s,n,a)},O}(t.RenderNode),t.BitmapNode=e,__reflect(e.prototype,"egret.sys.BitmapNode")}(egret||(egret={})),function(c){var l,h,u,t;l=c.sys||(c.sys={}),h=["none","round","square"],u=["bevel","miter","round"],t=function(e){function t(){var t=e.call(this)||this;return t.dirtyRender=!0,t.type=3,t}return __extends(t,e),t.prototype.beginFill=function(t,e,i){void 0===e&&(e=1);var r=new l.FillPath;if(r.fillColor=t,r.fillAlpha=e,i){var n=this.drawData.lastIndexOf(i);this.drawData.splice(n,0,r)}else this.drawData.push(r);return this.renderCount++,r},t.prototype.beginGradientFill=function(t,e,i,r,n,a){var o=new c.Matrix;n?(o.a=819.2*n.a,o.b=819.2*n.b,o.c=819.2*n.c,o.d=819.2*n.d,o.tx=n.tx,o.ty=n.ty):(o.a=100,o.d=100);var s=new l.GradientFillPath;if(s.gradientType=t,s.colors=e,s.alphas=i,s.ratios=r,s.matrix=o,a){var h=this.drawData.lastIndexOf(a);this.drawData.splice(h,0,s)}else this.drawData.push(s);return this.renderCount++,s},t.prototype.lineStyle=function(t,e,i,r,n,a,o){void 0===i&&(i=1),void 0===a&&(a=3),void 0===o&&(o=[]),-1==h.indexOf(r)&&(r="round"),-1==u.indexOf(n)&&(n="round");var s=new l.StrokePath;return s.lineWidth=t,s.lineColor=e,s.lineAlpha=i,s.caps=r||c.CapsStyle.ROUND,s.joints=n,s.miterLimit=a,s.lineDash=o,this.drawData.push(s),this.renderCount++,s},t.prototype.clear=function(){this.drawData.length=0,this.dirtyRender=!0,this.renderCount=0},t.prototype.cleanBeforeRender=function(){},t.prototype.clean=function(){this.$texture&&(c.WebGLUtils.deleteWebGLTexture(this.$texture),this.$texture=null,this.dirtyRender=!0)},t}(l.RenderNode),l.GraphicsNode=t,__reflect(t.prototype,"egret.sys.GraphicsNode")}(egret||(egret={})),function(t){var e,i;e=t.sys||(t.sys={}),i=function(e){function t(){var t=e.call(this)||this;return t.type=4,t}return __extends(t,e),t.prototype.addNode=function(t){this.drawData.push(t)},t.prototype.cleanBeforeRender=function(){for(var t=this.drawData,e=t.length-1;0<=e;e--)t[e].cleanBeforeRender()},t.prototype.$getRenderCount=function(){for(var t=0,e=this.drawData,i=e.length-1;0<=i;i--)t+=e[i].$getRenderCount();return t},t}(e.RenderNode),e.GroupNode=i,__reflect(i.prototype,"egret.sys.GroupNode")}(egret||(egret={})),function(i){var t,e;t=i.sys||(i.sys={}),e=function(e){function t(){var t=e.call(this)||this;return t.image=null,t.smoothing=!0,t.bounds=new i.Rectangle,t.blendMode=null,t.alpha=NaN,t.filter=null,t.rotated=!1,t.type=5,t.vertices=[],t.uvs=[],t.indices=[],t}return __extends(t,e),t.prototype.drawMesh=function(t,e,i,r,n,a,o,s){this.drawData.push(t,e,i,r,n,a,o,s),this.renderCount++},t.prototype.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.image=null,this.matrix=null},t}(t.RenderNode),t.MeshNode=e,__reflect(e.prototype,"egret.sys.MeshNode")}(egret||(egret={})),function(t){var e,i;e=t.sys||(t.sys={}),i=function(e){function t(){var t=e.call(this)||this;return t.image=null,t.smoothing=!0,t.rotated=!1,t.type=6,t}return __extends(t,e),t.prototype.drawImage=function(t,e,i,r,n,a,o,s){var h=this;h.sourceX=t,h.sourceY=e,h.sourceW=i,h.sourceH=r,h.drawX=n,h.drawY=a,h.drawW=o,h.drawH=s,h.renderCount=1},t.prototype.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.image=null},t}(e.RenderNode),e.NormalBitmapNode=i,__reflect(i.prototype,"egret.sys.NormalBitmapNode")}(egret||(egret={})),(egret||(egret={})).OrientationMode={AUTO:"auto",PORTRAIT:"portrait",LANDSCAPE:"landscape",LANDSCAPE_FLIPPED:"landscapeFlipped"},function(i){var t,e;t=i.sys||(i.sys={}),e=function(e){function t(){var t=e.call(this)||this;return t.textColor=16777215,t.strokeColor=0,t.size=30,t.stroke=0,t.bold=!1,t.italic=!1,t.fontFamily="Arial",t.dirtyRender=!0,t.type=2,t}return __extends(t,e),t.prototype.drawText=function(t,e,i,r){this.drawData.push(t,e,i,r),this.renderCount++,this.dirtyRender=!0},t.prototype.clean=function(){this.$texture&&(i.WebGLUtils.deleteWebGLTexture(this.$texture),this.$texture=null,this.dirtyRender=!0)},t.prototype.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.dirtyRender=!0},t}(t.RenderNode),t.TextNode=e,__reflect(e.prototype,"egret.sys.TextNode")}(egret||(egret={})),function(t){var e,i;e=t.sys||(t.sys={}),i=function(e){function t(){var t=e.call(this)||this;return t.type=1,t}return __extends(t,e),t}(e.Path2D),e.FillPath=i,__reflect(i.prototype,"egret.sys.FillPath")}(egret||(egret={})),function(t){var e,i;e=t.sys||(t.sys={}),i=function(e){function t(){var t=e.call(this)||this;return t.type=2,t}return __extends(t,e),t}(e.Path2D),e.GradientFillPath=i,__reflect(i.prototype,"egret.sys.GradientFillPath")}(egret||(egret={})),function(d){var t=function(i){function t(){var t=i.call(this)||this;t.$renderBuffer=new d.sys.RenderBuffer;var e=new d.BitmapData(t.$renderBuffer.surface);return e.$deleteSource=!1,t._setBitmapData(e),t}return __extends(t,i),t.prototype.drawToTexture=function(t,e,i){if(void 0===i&&(i=1),e&&(0==e.width||0==e.height))return!1;var r=e||t.$getOriginalBounds();if(0==r.width||0==r.height)return!1;i/=d.$TextureScaleFactor;var n=(r.x+r.width)*i,a=(r.y+r.height)*i;e&&(n=r.width*i,a=r.height*i);var o=this.$renderBuffer;if(!o)return!1;if(o.resize(n,a),this.$bitmapData.width=n,this.$bitmapData.height=a,d.nativeRender){egret_native.activateBuffer(this.$renderBuffer);var s=!1,h=0,c=0,l=0,u=0;e&&(s=!0,h=e.x,c=e.y,l=e.width,u=e.height),egret_native.updateNativeRender(),egret_native.nrRenderDisplayObject(t.$nativeDisplayObject.id,i,s,h,c,l,u),egret_native.activateBuffer(null)}else{var p=d.Matrix.create();p.identity(),p.scale(i,i),e&&p.translate(-e.x,-e.y),d.sys.systemRenderer.render(t,o,p,!0),d.Matrix.release(p)}return this.$initData(0,0,n,a,0,0,n,a,n,a),!0},t.prototype.getPixel32=function(t,e){var i;if(this.$renderBuffer){var r=d.$TextureScaleFactor;t=Math.round(t/r),e=Math.round(e/r),i=this.$renderBuffer.getPixels(t,e,1,1)}return i},t.prototype.dispose=function(){i.prototype.dispose.call(this),this.$renderBuffer=null},t}(d.Texture);d.RenderTexture=t,__reflect(t.prototype,"egret.RenderTexture")}(egret||(egret={})),function(t){var e,i;e=t.sys||(t.sys={}),i=function(e){function t(){var t=e.call(this)||this;return t.type=3,t}return __extends(t,e),t}(e.Path2D),e.StrokePath=i,__reflect(i.prototype,"egret.sys.StrokePath")}(egret||(egret={})),function(T){var R=["source-over","lighter","destination-out"],S="source-over",d="#000000",f={none:"butt",square:"square",round:"round"},F=[],_=[],t=function(){function t(){this.nestLevel=0,this.renderingMask=!1}return t.prototype.render=function(t,e,i,r){this.nestLevel++;var n=e.context;n.transform(i.a,i.b,i.c,i.d,0,0);var a=this.drawDisplayObject(t,n,i.tx,i.ty,!0),o=T.Matrix.create();if(i.$invertInto(o),n.transform(o.a,o.b,o.c,o.d,0,0),T.Matrix.release(o),this.nestLevel--,0===this.nestLevel){6<F.length&&(F.length=6);for(var s=F.length,h=0;h<s;h++)F[h].resize(0,0)}return a},t.prototype.drawDisplayObject=function(t,e,i,r,n){var a,o=0,s=t.$displayList;if(s&&!n?((t.$cacheDirty||t.$renderDirty||s.$canvasScaleX!=T.sys.DisplayList.$canvasScaleX||s.$canvasScaleY!=T.sys.DisplayList.$canvasScaleY)&&(o+=s.drawToSurface()),a=s.$renderNode):a=t.$renderDirty?t.$getRenderNode():t.$renderNode,t.$cacheDirty=!1,a){switch(o++,e.$offsetX=i,e.$offsetY=r,a.type){case 1:this.renderBitmap(a,e);break;case 2:this.renderText(a,e);break;case 3:this.renderGraphics(a,e);break;case 4:this.renderGroup(a,e);break;case 5:this.renderMesh(a,e);break;case 6:this.renderNormalBitmap(a,e)}e.$offsetX=0,e.$offsetY=0}if(s&&!n)return o;var h=t.$children;if(h)for(var c=h.length,l=0;l<c;l++){var u=h[l],p=void 0,d=void 0;if(u.$useTranslate){var f=u.$getMatrix();p=i+u.$x,d=r+u.$y,e.save(),e.transform(f.a,f.b,f.c,f.d,p,d),p=-u.$anchorOffsetX,d=-u.$anchorOffsetY}else p=i+u.$x-u.$anchorOffsetX,d=r+u.$y-u.$anchorOffsetY;var $=void 0;switch(1!=u.$alpha&&($=e.globalAlpha,e.globalAlpha*=u.$alpha),u.$renderMode){case 1:break;case 2:o+=this.drawWithFilter(u,e,p,d);break;case 3:o+=this.drawWithClip(u,e,p,d);break;case 4:o+=this.drawWithScrollRect(u,e,p,d);break;default:o+=this.drawDisplayObject(u,e,p,d)}u.$useTranslate?e.restore():$&&(e.globalAlpha=$)}return o},t.prototype.drawWithFilter=function(t,e,i,r){if(t.$children&&0==t.$children.length&&(!t.$renderNode||0==t.$renderNode.$getRenderCount()))return 0;var n,a=0,o=t.$filters,s=o.length,h=0!==t.$blendMode;h&&((n=R[t.$blendMode])||(n=S));var c=t.$getOriginalBounds(),l=c.x,u=c.y,p=c.width,d=c.height;if(p<=0||d<=0)return a;var f=this.createRenderBuffer(p-l,d-u,!0),$=f.context;if(t.$mask?a+=this.drawWithClip(t,$,-l,-u):t.$scrollRect||t.$maskRect?a+=this.drawWithScrollRect(t,$,-l,-u):a+=this.drawDisplayObject(t,$,-l,-u),0<a){h&&(e.globalCompositeOperation=n),a++;for(var g=$.getImageData(0,0,f.surface.width,f.surface.height),y=0;y<s;y++){var v=o[y];if("colorTransform"==v.type)C(g.data,f.surface.width,f.surface.height,v.$matrix);else if("blur"==v.type)D(g.data,f.surface.width,f.surface.height,v.$blurX,v.$blurY);else if("glow"==v.type){var b=v.$red,m=v.$green,x=v.$blue,T=v.$alpha;v.$inner||v.$knockout||v.$hideObject?w(g.data,f.surface.width,f.surface.height,[b/255,m/255,x/255,T],v.$blurX,v.$blurY,v.$angle?v.$angle/180*Math.PI:0,v.$distance||0,v.$strength,v.$inner?1:0,v.$knockout?0:1,v.$hideObject?1:0):O(g.data,f.surface.width,f.surface.height,[b/255,m/255,x/255,T],v.$blurX,v.$blurY,v.$angle?v.$angle/180*Math.PI:0,v.$distance||0,v.$strength)}else v.type}$.putImageData(g,0,0),e.drawImage(f.surface,i+l,r+u),h&&(e.globalCompositeOperation=S)}return _.push(f),a},t.prototype.drawWithClip=function(t,e,i,r){var n,a=0,o=0!==t.$blendMode;o&&((n=R[t.$blendMode])||(n=S));var s=t.$scrollRect?t.$scrollRect:t.$maskRect,h=t.$mask;if(h){var c=h.$getMatrix();if(0==c.a&&0==c.b||0==c.c&&0==c.d)return a}if(!(h||t.$children&&0!=t.$children.length))return s&&(e.save(),e.beginPath(),e.rect(s.x+i,s.y+r,s.width,s.height),e.clip()),o&&(e.globalCompositeOperation=n),a+=this.drawDisplayObject(t,e,i,r),o&&(e.globalCompositeOperation=S),s&&e.restore(),a;if(h){var l=h.$getRenderNode();if((!h.$children||0==h.$children.length)&&l&&3==l.type&&1==l.drawData.length&&1==l.drawData[0].type&&1==l.drawData[0].fillAlpha){this.renderingMask=!0,e.save(),(b=T.Matrix.create()).copyFrom(h.$getConcatenatedMatrix()),h.$getConcatenatedMatrixAt(t,b),b.prepend(1,0,0,1,i,r),e.transform(b.a,b.b,b.c,b.d,b.tx,b.ty);var u=this.drawDisplayObject(h,e,0,0);return this.renderingMask=!1,b.$invertInto(b),e.transform(b.a,b.b,b.c,b.d,b.tx,b.ty),T.Matrix.release(b),s&&(e.beginPath(),e.rect(s.x+i,s.y+r,s.width,s.height),e.clip()),u+=this.drawDisplayObject(t,e,i,r),e.restore(),u}}var p=t.$getOriginalBounds(),d=p.x,f=p.y,$=p.width,g=p.height;if($<=0||g<=0)return a;var y=this.createRenderBuffer($,g),v=y.context;if(!v)return a+=this.drawDisplayObject(t,e,i,r);if(a+=this.drawDisplayObject(t,v,-d,-f),h){var b;l=h.$getRenderNode();if((b=T.Matrix.create()).copyFrom(h.$getConcatenatedMatrix()),h.$getConcatenatedMatrixAt(t,b),b.translate(-d,-f),l&&1==l.$getRenderCount()||h.$displayList)v.globalCompositeOperation="destination-in",v.save(),v.setTransform(b.a,b.b,b.c,b.d,b.tx,b.ty),a+=this.drawDisplayObject(h,v,0,0),v.restore();else{var m=this.createRenderBuffer($,g),x=m.context;x.setTransform(b.a,b.b,b.c,b.d,b.tx,b.ty),a+=this.drawDisplayObject(h,x,0,0),v.globalCompositeOperation="destination-in",v.drawImage(m.surface,0,0),F.push(m)}T.Matrix.release(b)}return 0<a&&(a++,o&&(e.globalCompositeOperation=n),s&&(e.save(),e.beginPath(),e.rect(s.x+i,s.y+r,s.width,s.height),e.clip()),e.drawImage(y.surface,i+d,r+f),s&&e.restore(),o&&(e.globalCompositeOperation=S)),F.push(y),a},t.prototype.drawWithScrollRect=function(t,e,i,r){var n=0,a=t.$scrollRect?t.$scrollRect:t.$maskRect;return a.isEmpty()||(t.$scrollRect&&(i-=a.x,r-=a.y),e.save(),e.beginPath(),e.rect(a.x+i,a.y+r,a.width,a.height),e.clip(),n+=this.drawDisplayObject(t,e,i,r),e.restore()),n},t.prototype.drawNodeToBuffer=function(t,e,i,r){var n=e.context;n.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),this.renderNode(t,n,r)},t.prototype.drawDisplayToBuffer=function(t,e,i){var r,n=e.context;i&&n.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty);var a=0;if(r=t.$renderDirty?t.$getRenderNode():t.$renderNode)switch(a++,r.type){case 1:this.renderBitmap(r,n);break;case 2:this.renderText(r,n);break;case 3:this.renderGraphics(r,n);break;case 4:this.renderGroup(r,n);break;case 5:this.renderMesh(r,n);break;case 6:this.renderNormalBitmap(r,n)}var o=t.$children;if(o)for(var s=o.length,h=0;h<s;h++){var c=o[h];switch(c.$renderMode){case 1:break;case 2:a+=this.drawWithFilter(c,n,0,0);break;case 3:a+=this.drawWithClip(c,n,0,0);break;case 4:a+=this.drawWithScrollRect(c,n,0,0);break;default:a+=this.drawDisplayObject(c,n,0,0)}}return a},t.prototype.renderNode=function(t,e,i){var r=0;switch(t.type){case 1:r=this.renderBitmap(t,e);break;case 2:r=1,this.renderText(t,e);break;case 3:r=this.renderGraphics(t,e,i);break;case 4:r=this.renderGroup(t,e);break;case 5:r=this.renderMesh(t,e);break;case 6:r+=this.renderNormalBitmap(t,e)}return r},t.prototype.renderNormalBitmap=function(t,e){var i=t.image;if(!i||!i.source)return 0;if(e.$imageSmoothingEnabled!=t.smoothing&&(e.imageSmoothingEnabled=t.smoothing,e.$imageSmoothingEnabled=t.smoothing),t.rotated){var r=t.sourceX,n=t.sourceY,a=t.sourceW,o=t.sourceH,s=t.drawX,h=t.drawY,c=t.drawW,l=t.drawH;e.save(),e.transform(0,-1,1,0,0,l),e.drawImage(i.source,r,n,o,a,s+e.$offsetX,h+e.$offsetY,l,c),e.restore()}else e.drawImage(i.source,t.sourceX,t.sourceY,t.sourceW,t.sourceH,t.drawX+e.$offsetX,t.drawY+e.$offsetY,t.drawW,t.drawH);return 1},t.prototype.renderBitmap=function(t,e){var i=t.image;if(!i||!i.source)return 0;e.$imageSmoothingEnabled!=t.smoothing&&(e.imageSmoothingEnabled=t.smoothing,e.$imageSmoothingEnabled=t.smoothing);var r,n,a,o=t.drawData,s=o.length,h=0,c=t.matrix,l=t.blendMode,u=t.alpha,p=!1;c&&(e.save(),p=!0,0==e.$offsetX&&0==e.$offsetY||(e.translate(e.$offsetX,e.$offsetY),r=e.$offsetX,n=e.$offsetY,e.$offsetX=e.$offsetY=0),e.transform(c.a,c.b,c.c,c.d,c.tx,c.ty)),l&&(e.globalCompositeOperation=R[l]),u==u&&(a=e.globalAlpha,e.globalAlpha*=u);var d=0,f=t.filter;if(f&&8==s){var $=o[0],g=o[1],y=o[2],v=o[3],b=o[4],m=o[5],x=o[6],T=o[7];t.rotated&&(y=o[3],v=o[2],x=o[7],T=o[6]);var _=this.createRenderBuffer(x,T),D=_.context;d++,t.rotated&&e.transform(0,-1,1,0,0,x),D.drawImage(i.source,$,g,y,v,0,0,x,T),d++;var O=D.getImageData(0,0,x,T);C(O.data,x,T,f.$matrix),D.putImageData(O,0,0),e.drawImage(_.surface,0,0,x,T,b+e.$offsetX,m+e.$offsetY,x,T),F.push(_)}else for(;h<s;)if(d++,t.rotated){$=o[h++],g=o[h++],v=o[h++],y=o[h++];var w=o[h++],E=o[h++];T=o[h++],x=o[h++];e.save(),e.transform(0,-1,1,0,0,x),e.drawImage(i.source,$,g,y,v,w+e.$offsetX,E+e.$offsetY,x,T),e.restore()}else e.drawImage(i.source,o[h++],o[h++],o[h++],o[h++],o[h++]+e.$offsetX,o[h++]+e.$offsetY,o[h++],o[h++]);return p?e.restore():(l&&(e.globalCompositeOperation=S),u==u&&(e.globalAlpha=a)),r&&(e.$offsetX=r),n&&(e.$offsetY=n),d},t.prototype.renderMesh=function(t,e){return 0},t.prototype.renderText=function(t,e){e.textAlign="left",e.textBaseline="middle",e.lineJoin="round";for(var i=t.drawData,r=i.length,n=0;n<r;){var a=i[n++],o=i[n++],s=i[n++],h=i[n++];e.font=p(t,h);var c=null==h.textColor?t.textColor:h.textColor,l=null==h.strokeColor?t.strokeColor:h.strokeColor,u=null==h.stroke?t.stroke:h.stroke;e.fillStyle=T.toColorString(c),e.strokeStyle=T.toColorString(l),u&&(e.lineWidth=2*u,e.strokeText(s,a+e.$offsetX,o+e.$offsetY)),e.fillText(s,a+e.$offsetX,o+e.$offsetY)}},t.prototype.renderGraphics=function(t,e,i){var r=t.drawData,n=r.length;i=!!i;for(var a=0;a<n;a++){var o=r[a];switch(o.type){case 1:var s=o;e.fillStyle=i?d:$(s.fillColor,s.fillAlpha),this.renderPath(o,e),this.renderingMask?e.clip():e.fill();break;case 2:var h=o;e.fillStyle=i?d:g(e,h.gradientType,h.colors,h.alphas,h.ratios,h.matrix),e.save();var c=h.matrix;this.renderPath(o,e),e.transform(c.a,c.b,c.c,c.d,c.tx,c.ty),e.fill(),e.restore();break;case 3:var l=o,u=l.lineWidth;e.lineWidth=u,e.strokeStyle=i?d:$(l.lineColor,l.lineAlpha),e.lineCap=f[l.caps],e.lineJoin=l.joints,e.miterLimit=l.miterLimit,e.setLineDash&&e.setLineDash(l.lineDash);var p=1===u||3===u;p&&e.translate(.5,.5),this.renderPath(o,e),e.stroke(),p&&e.translate(-.5,-.5)}}return 0==n?0:1},t.prototype.renderPath=function(t,e){e.beginPath();for(var i=t.$data,r=t.$commands,n=r.length,a=0,o=0;o<n;o++){switch(r[o]){case 4:e.bezierCurveTo(i[a++]+e.$offsetX,i[a++]+e.$offsetY,i[a++]+e.$offsetX,i[a++]+e.$offsetY,i[a++]+e.$offsetX,i[a++]+e.$offsetY);break;case 3:e.quadraticCurveTo(i[a++]+e.$offsetX,i[a++]+e.$offsetY,i[a++]+e.$offsetX,i[a++]+e.$offsetY);break;case 2:e.lineTo(i[a++]+e.$offsetX,i[a++]+e.$offsetY);break;case 1:e.moveTo(i[a++]+e.$offsetX,i[a++]+e.$offsetY)}}},t.prototype.renderGroup=function(t,e){var i,r,n=t.matrix,a=!1;n&&(e.save(),a=!0,0==e.$offsetX&&0==e.$offsetY||(e.translate(e.$offsetX,e.$offsetY),i=e.$offsetX,r=e.$offsetY,e.$offsetX=e.$offsetY=0),e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty));for(var o=0,s=t.drawData,h=s.length,c=0;c<h;c++){var l=s[c];o+=this.renderNode(l,e)}return a&&e.restore(),i&&(e.$offsetX=i),r&&(e.$offsetY=r),o},t.prototype.createRenderBuffer=function(t,e,i){var r=i?_.pop():F.pop();return r?r.resize(t,e,!0):r=new T.sys.CanvasRenderBuffer(t,e),r},t}();function p(t,e){var i=(null==e.italic?t.italic:e.italic)?"italic ":"normal ";return i+=(null==e.bold?t.bold:e.bold)?"bold ":"normal ",i+=(null==e.size?t.size:e.size)+"px "+(e.fontFamily||t.fontFamily)}function $(t,e){return"rgba("+(t>>16)+","+(t>>8&255)+","+(255&t)+","+e+")"}function g(t,e,i,r,n,a){var o;o=e==T.GradientType.LINEAR?t.createLinearGradient(-1,0,1,0):t.createRadialGradient(0,0,0,0,0,1);for(var s=i.length,h=0;h<s;h++)o.addColorStop(n[h]/255,$(i[h],r[h]));return o}T.CanvasRenderer=t,__reflect(t.prototype,"egret.CanvasRenderer"),T.getFontString=p,T.getRGBAString=$;var V=!1;try{V=void 0!==typeof Uint8ClampedArray}catch(t){}function q(t,e,i){void 0===i&&(i=0);for(var r=0,n=e.length;r<n;r++)t[r+i]=e[r]}function C(t,e,i,r){for(var n=r[0],a=r[1],o=r[2],s=r[3],h=r[4],c=r[5],l=r[6],u=r[7],p=r[8],d=r[9],f=r[10],$=r[11],g=r[12],y=r[13],v=r[14],b=r[15],m=r[16],x=r[17],T=r[18],_=r[19],D=0,O=e*i*4;D<O;D+=4){var w=t[D+0],E=t[D+1],R=t[D+2],S=t[D+3];t[D+0]=n*w+a*E+o*R+s*S+h,t[D+1]=c*w+l*E+u*R+p*S+d,t[D+2]=f*w+$*E+g*R+y*S+v,t[D+3]=b*w+m*E+x*R+T*S+_}}function D(t,e,i,r,n){!function(t,e,i,r){var n;n=V?new Uint8ClampedArray(4*e):new Array(4*e);for(var a=4*e,o=2*r+1,s=0;s<i;s++){for(var h=s*a,c=0,l=0,u=0,p=0,d=0,f=0,$=4*-r,g=4*r+4;$<g;$+=4){var y=h+$;y<h||h+a<=y||(d=t[y+3],c+=t[y+0]*d,l+=t[y+1]*d,u+=t[y+2]*d,p+=d)}for(var $=h,g=h+a,v=0,b=$-4*r,m=$+4*(r+1);$<g;$+=4,v+=4,m+=4,b+=4)0===p?(n[v+0]=0,n[v+1]=0,n[v+2]=0,n[v+3]=0):(n[v+0]=c/p,n[v+1]=l/p,n[v+2]=u/p,n[v+3]=p/o),d=t[m+3],f=t[b+3],d||0==d?f||0==f?(c+=t[m+0]*d-t[b+0]*f,l+=t[m+1]*d-t[b+1]*f,u+=t[m+2]*d-t[b+2]*f,p+=d-f):(c+=t[m+0]*d,l+=t[m+1]*d,u+=t[m+2]*d,p+=d):(f||0==f)&&(c+=-t[b+0]*f,l+=-t[b+1]*f,u+=-t[b+2]*f,p+=-f);V?t.set(n,h):q(t,n,h)}}(t,e,i,r),function(t,e,i,r){var n;n=V?new Uint8ClampedArray(4*i):new Array(4*i);for(var a=4*e,o=2*r+1,s=0;s<e;s++){for(var h=4*s,c=0,l=0,u=0,p=0,d=0,f=0,$=-r*a,g=r*a+a;$<g;$+=a){var y=h+$;y<h||h+i*a<=y||(d=t[y+3],c+=t[y+0]*d,l+=t[y+1]*d,u+=t[y+2]*d,p+=d)}for(var $=h,g=h+i*a,v=0,b=h-r*a,m=h+(r+1)*a;$<g;$+=a,v+=4,m+=a,b+=a)0===p?(n[v+0]=0,n[v+1]=0,n[v+2]=0,n[v+3]=0):(n[v+0]=c/p,n[v+1]=l/p,n[v+2]=u/p,n[v+3]=p/o),d=t[m+3],f=t[b+3],d||0==d?f||0==f?(c+=t[m+0]*d-t[b+0]*f,l+=t[m+1]*d-t[b+1]*f,u+=t[m+2]*d-t[b+2]*f,p+=d-f):(c+=t[m+0]*d,l+=t[m+1]*d,u+=t[m+2]*d,p+=d):(f||0==f)&&(c+=-t[b+0]*f,l+=-t[b+1]*f,u+=-t[b+2]*f,p+=-f);for(var x=4*s,g=x+i*a,T=0;x<g;x+=a,T+=4)t[x+0]=n[T+0],t[x+1]=n[T+1],t[x+2]=n[T+2],t[x+3]=n[T+3]}}(t,e,i,n)}function O(t,e,i,r,n,a,o,s,h){var c=function(t,e){e||(e=[0,0,0,0]);var i;V?i=new Uint8ClampedArray(t):q(i=new Array(t.length),t);for(var r=e[0],n=e[1],a=e[2],o=e[3],s=0,h=i.length;s<h;s+=4){var c=i[s+3];i[s+0]=r*c,i[s+1]=n*c,i[s+2]=a*c,i[s+3]=o*c}return i}(t,r);!function(t,e,i,r,n){var a,o,s=Math.sin(r)*n|0,h=Math.cos(r)*n|0;if(V){a=new Int32Array(t.buffer),o=new Int32Array(a.length);for(var c=0;c<i;c++){var l=c+s;if(!(l<0||i<l))for(var u=0;u<e;u++){var p=u+h;p<0||e<p||(o[l*e+p]=a[c*e+u])}}a.set(o)}else{a=t,o=new Array(a.length);for(var c=0;c<i;c++){var l=c+s;if(!(l<0||i<l))for(var u=0;u<e;u++){var p=u+h;p<0||e<p||(o[4*(l*e+p)+0]=a[4*(c*e+u)+0],o[4*(l*e+p)+1]=a[4*(c*e+u)+1],o[4*(l*e+p)+2]=a[4*(c*e+u)+2],o[4*(l*e+p)+3]=a[4*(c*e+u)+3])}}q(a,o)}}(c,e,i,o,s),D(c,e,i,n,a),function(t,e){for(var i=0,r=t.length;i<r;i+=4)t[i+3]*=e}(c,h),function(t,e){for(var i=0,r=t.length;i<r;i+=4){var n=t[i+0],a=t[i+1],o=t[i+2],s=t[i+3]/255,h=e[i+0],c=e[i+1],l=e[i+2],u=e[i+3]/255;t[i+0]=h+n*(1-u),t[i+1]=c+a*(1-u),t[i+2]=l+o*(1-u),t[i+3]=255*(u+s*(1-u))}}(c,t),t.set(c),V?t.set(c):q(t,c)}function J(t,e,i){return t*(1-i)+e*i}function w(t,e,i,r,n,a,o,s,h,c,l,u){var p;p=V?new Uint8ClampedArray(t.length):new Array(t.length);for(var d,f,$=r[3],g=0,y=0,v=s*Math.cos(o),b=s*Math.sin(o),m=3.141592653589793,x=n/7,T=a/7,_=0;_<e;_++)for(var D=0;D<i;D++){for(var O=D*e*4+4*_,w=0,E=0,R=t[O+0]/255,S=t[O+1]/255,F=t[O+2]/255,C=t[O+3]/255,P=0;P<=2*m;P+=2*m/12){d=Math.cos(P+0),f=Math.sin(P+0);for(var M=0;M<7;M++){g=M*x*d,y=M*T*f;var N=Math.round(_+g-v),j=Math.round(D+y-b),k=0;if(e<=N||N<0||j<0||i<=j)k=0;else k=t[j*e*4+4*N+3]/255;w+=(7-M)*k,E+=7-M}}C=Math.max(C,1e-4);var A=w/E*h*$*(1-c)*Math.max(Math.min(u,l),1-C),B=(E-w)/E*h*$*c*C,L=B/(B+(C=Math.max(C*l*(1-u),1e-4))),I=J(R,r[0],L),U=J(S,r[1],L),X=J(F,r[2],L),H=A/(B+C+A),Y=J(I,r[0],H),W=J(U,r[1],H),G=J(X,r[2],H),z=Math.min(C+A+B,1);p[O+0]=255*Y,p[O+1]=255*W,p[O+2]=255*G,p[O+3]=255*z}V?t.set(p):q(t,p)}}(egret||(egret={})),(egret||(egret={})).DeviceOrientation=null,egret||(egret={}),egret||(egret={}),function(e){var t;(t=e.RuntimeType||(e.RuntimeType={})).WEB="web",t.NATIVE="native",t.RUNTIME2="runtime2",t.WXGAME="wxgame";var i=function(){function t(){}return t.language="zh-CN",t.os="Unknown",t.runtimeType=e.RuntimeType.WEB,t.engineVersion="5.2.11",t.renderMode="Unknown",t.boundingClientWidth=0,t.boundingClientHeight=0,t}();e.Capabilities=i,__reflect(i.prototype,"egret.Capabilities")}(egret||(egret={})),function(e){var t=function(r){function t(){var t=r.call(this)||this;return t.$graphics=new e.Graphics,t.$graphics.$setTarget(t),t}return __extends(t,r),t.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(8)},Object.defineProperty(t.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),t.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},t.prototype.$hitTest=function(t,e){var i=r.prototype.$hitTest.call(this,t,e);return i==this&&(i=this.$graphics.$hitTest(t,e)),i},t.prototype.$onRemoveFromStage=function(){r.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},t}(e.DisplayObject);e.Shape=t,__reflect(t.prototype,"egret.Shape")}(egret||(egret={})),function(t){var i={};t.registerImplementation=function(t,e){i[t]=e},t.getImplementation=function(t){return i[t]}}(egret||(egret={})),function(u){var t=function(e){function t(){var t=e.call(this)||this;return t.$graphics=new u.Graphics,t.$graphics.$setTarget(t),t}return __extends(t,e),t.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(9)},Object.defineProperty(t.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),t.prototype.$hitTest=function(t,e){if(!this.$visible)return null;var i=this.$getInvertedConcatenatedMatrix(),r=i.a*t+i.c*e+i.tx,n=i.b*t+i.d*e+i.ty,a=this.$scrollRect?this.$scrollRect:this.$maskRect;if(a&&!a.contains(r,n))return null;if(this.$mask&&!this.$mask.$hitTest(t,e))return null;for(var o=this.$children,s=!1,h=null,c=o.length-1;0<=c;c--){var l=o[c];if(!l.$maskedObject&&(h=l.$hitTest(t,e))){if(s=!0,h.$touchEnabled)break;h=null}}return h?this.$touchChildren?h:this:s?this:((h=u.DisplayObject.prototype.$hitTest.call(this,t,e))&&(h=this.$graphics.$hitTest(t,e)),h)},t.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},t.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},t}(u.DisplayObjectContainer);u.Sprite=t,__reflect(t.prototype,"egret.Sprite")}(egret||(egret={})),function(t){var e=function(r){function t(t,e){var i=r.call(this,t)||this;return i.firstCharHeight=0,"string"==typeof e?i.charList=i.parseConfig(e):e&&e.hasOwnProperty("frames")?i.charList=e.frames:i.charList={},i}return __extends(t,r),t.prototype.getTexture=function(t){var e=this._textureMap[t];if(!e){var i=this.charList[t];if(!i)return null;e=this.createTexture(t,i.x,i.y,i.w,i.h,i.offX,i.offY,i.sourceW,i.sourceH),this._textureMap[t]=e}return e},t.prototype.getConfig=function(t,e){return this.charList[t]?this.charList[t][e]:0},t.prototype._getFirstCharHeight=function(){if(0==this.firstCharHeight)for(var t in this.charList){var e=this.charList[t];if(e){var i=e.sourceH;if(void 0===i){var r=e.h;void 0===r&&(r=0);var n=e.offY;void 0===n&&(n=0),i=r+n}if(i<=0)continue;this.firstCharHeight=i;break}}return this.firstCharHeight},t.prototype.parseConfig=function(t){for(var e=(t=t.split("\r\n").join("\n")).split("\n"),i=this.getConfigByKey(e[3],"count"),r={},n=4;n<4+i;n++){var a=e[n],o={};(r[String.fromCharCode(this.getConfigByKey(a,"id"))]=o).x=this.getConfigByKey(a,"x"),o.y=this.getConfigByKey(a,"y"),o.w=this.getConfigByKey(a,"width"),o.h=this.getConfigByKey(a,"height"),o.offX=this.getConfigByKey(a,"xoffset"),o.offY=this.getConfigByKey(a,"yoffset"),o.xadvance=this.getConfigByKey(a,"xadvance")}return r},t.prototype.getConfigByKey=function(t,e){for(var i=t.split(" "),r=0,n=i.length;r<n;r++){var a=i[r];if(e==a.substring(0,e.length)){var o=a.substring(e.length+1);return parseInt(o)}}return 0},t}(t.SpriteSheet);t.BitmapFont=e,__reflect(e.prototype,"egret.BitmapFont")}(egret||(egret={})),function(k){var t=function(e){function j(){var t=e.call(this)||this;return t.$smoothing=k.Bitmap.defaultSmoothing,t.$text="",t.$textFieldWidth=NaN,t.$textLinesChanged=!1,t.$textFieldHeight=NaN,t.$font=null,t.$fontStringChanged=!1,t.$lineSpacing=0,t.$letterSpacing=0,t.$textAlign=k.HorizontalAlign.LEFT,t.$verticalAlign=k.VerticalAlign.TOP,t.$textWidth=NaN,t.$textHeight=NaN,t.$textOffsetX=0,t.$textOffsetY=0,t.$textStartX=0,t.$textStartY=0,t.textLines=[],t.$lineHeights=[],k.nativeRender||(t.$renderNode=new k.sys.BitmapNode),t}return __extends(j,e),j.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(11)},Object.defineProperty(j.prototype,"smoothing",{get:function(){return this.$smoothing},set:function(t){if(t!=this.$smoothing&&(this.$smoothing=t,!k.nativeRender)){var e=this.$parent;e&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp());var i=this.$maskedObject;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp())}},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"text",{get:function(){return this.$text},set:function(t){this.$setText(t)},enumerable:!0,configurable:!0}),j.prototype.$setText=function(t){return(t=null==t?"":String(t))!=this.$text&&(this.$text=t,this.$invalidateContentBounds(),!0)},j.prototype.$getWidth=function(){var t=this.$textFieldWidth;return isNaN(t)?this.$getContentBounds().width:t},j.prototype.$setWidth=function(t){return!(t<0||t==this.$textFieldWidth)&&(this.$textFieldWidth=t,this.$invalidateContentBounds(),!0)},j.prototype.$invalidateContentBounds=function(){this.$renderDirty=!0,this.$textLinesChanged=!0,this.$updateRenderNode()},j.prototype.$getHeight=function(){var t=this.$textFieldHeight;return isNaN(t)?this.$getContentBounds().height:t},j.prototype.$setHeight=function(t){return!(t<0||t==this.$textFieldHeight)&&(this.$textFieldHeight=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(j.prototype,"font",{get:function(){return this.$font},set:function(t){this.$setFont(t)},enumerable:!0,configurable:!0}),j.prototype.$setFont=function(t){return this.$font!=t&&(this.$font=t,this.$fontStringChanged=!0,this.$invalidateContentBounds(),!0)},Object.defineProperty(j.prototype,"lineSpacing",{get:function(){return this.$lineSpacing},set:function(t){this.$setLineSpacing(t)},enumerable:!0,configurable:!0}),j.prototype.$setLineSpacing=function(t){return this.$lineSpacing!=t&&(this.$lineSpacing=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(j.prototype,"letterSpacing",{get:function(){return this.$letterSpacing},set:function(t){this.$setLetterSpacing(t)},enumerable:!0,configurable:!0}),j.prototype.$setLetterSpacing=function(t){return this.$letterSpacing!=t&&(this.$letterSpacing=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(j.prototype,"textAlign",{get:function(){return this.$textAlign},set:function(t){this.$setTextAlign(t)},enumerable:!0,configurable:!0}),j.prototype.$setTextAlign=function(t){return this.$textAlign!=t&&(this.$textAlign=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(j.prototype,"verticalAlign",{get:function(){return this.$verticalAlign},set:function(t){this.$setVerticalAlign(t)},enumerable:!0,configurable:!0}),j.prototype.$setVerticalAlign=function(t){return this.$verticalAlign!=t&&(this.$verticalAlign=t,this.$invalidateContentBounds(),!0)},j.prototype.$updateRenderNode=function(){var t=this,e=this.$getTextLines(),i=e.length;if(0!=i){var r,n=[],a=this.$textLinesWidth,o=t.$font;k.nativeRender||(r=this.$renderNode,o.$texture&&(r.image=o.$texture.$bitmapData),r.smoothing=t.$smoothing);for(var s=o._getFirstCharHeight(),h=Math.ceil(s*j.EMPTY_FACTOR),c=!isNaN(t.$textFieldHeight),l=t.$textWidth,u=t.$textFieldWidth,p=t.$textFieldHeight,d=t.$textAlign,f=this.$textOffsetY+this.$textStartY,$=this.$lineHeights,g=0;g<i;g++){var y=$[g];if(c&&0<g&&p<f+y)break;var v=e[g],b=v.length,m=this.$textOffsetX;if(d!=k.HorizontalAlign.LEFT){var x=l<u?u:l;d==k.HorizontalAlign.RIGHT?m+=x-a[g]:d==k.HorizontalAlign.CENTER&&(m+=Math.floor((x-a[g])/2))}for(var T=0;T<b;T++){var _=v.charAt(T),D=o.getTexture(_);if(D){var O=D.$bitmapWidth,w=D.$bitmapHeight;k.nativeRender?n.push(D.$bitmapX,D.$bitmapY,O,w,m+D.$offsetX,f+D.$offsetY,D.$getScaleBitmapWidth(),D.$getScaleBitmapHeight(),D.$sourceWidth,D.$sourceHeight):(r.imageWidth=D.$sourceWidth,r.imageHeight=D.$sourceHeight,r.drawImage(D.$bitmapX,D.$bitmapY,O,w,m+D.$offsetX,f+D.$offsetY,D.$getScaleBitmapWidth(),D.$getScaleBitmapHeight())),m+=(o.getConfig(_,"xadvance")||D.$getTextureWidth())+t.$letterSpacing}else" "==_?m+=h:k.$warn(1046,_)}f+=y+t.$lineSpacing}if(k.nativeRender){t.$nativeDisplayObject.setDataToBitmapNode(t.$nativeDisplayObject.id,o.$texture,n);var E=t.$getContentBounds();t.$nativeDisplayObject.setWidth(E.width),t.$nativeDisplayObject.setHeight(E.height)}}else k.nativeRender&&t.$font&&(t.$nativeDisplayObject.setDataToBitmapNode(t.$nativeDisplayObject.id,t.$font.$texture,[]),t.$nativeDisplayObject.setWidth(0),t.$nativeDisplayObject.setHeight(0))},j.prototype.$measureContentBounds=function(t){0==this.$getTextLines().length?t.setEmpty():t.setTo(this.$textOffsetX+this.$textStartX,this.$textOffsetY+this.$textStartY,this.$textWidth-this.$textOffsetX,this.$textHeight-this.$textOffsetY)},Object.defineProperty(j.prototype,"textWidth",{get:function(){return this.$getTextLines(),this.$textWidth},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"textHeight",{get:function(){return this.$getTextLines(),this.$textHeight},enumerable:!0,configurable:!0}),j.prototype.$getTextLines=function(){var t=this;if(!t.$textLinesChanged)return t.textLines;var e=[];t.textLines=e;var i=[];t.$textLinesWidth=i,t.$textLinesChanged=!1;var r=[];if(t.$lineHeights=r,!t.$text||!t.$font)return t.$textWidth=0,t.$textHeight=0,e;for(var n,a,o,s,h,c=t.$lineSpacing,l=t.$letterSpacing,u=0,p=0,d=0,f=0,$=!isNaN(t.$textFieldWidth),g=t.$textFieldWidth,y=t.$textFieldHeight,v=t.$font,b=v._getFirstCharHeight(),m=Math.ceil(b*j.EMPTY_FACTOR),x=t.$text.split(/(?:\r\n|\r|\n)/),T=x.length,_=!0,D=0;D<T;D++){var O=x[D],w=O.length;a=!(n=!(s=o=0));for(var E=0;E<w;E++){n||(s+=l);var R=O.charAt(E),S=void 0,F=void 0,C=0,P=0,M=v.getTexture(R);if(M)S=M.$getTextureWidth(),F=M.$getTextureHeight(),C=M.$offsetX,P=M.$offsetY;else{if(" "!=R){k.$warn(1046,R),n&&(n=!1);continue}S=m,F=b}if(n&&(n=!1,d=Math.min(C,d)),_&&(_=!1,f=Math.min(P,f)),$&&0<E&&g<s+S){if(!N(O.substring(0,E)))break;w=(O=O.substring(E)).length,s=(E=0)==w-1?S:v.getConfig(R,"xadvance")||S,o=F}else s+=E==w-1?S:v.getConfig(R,"xadvance")||S,o=Math.max(F,o)}if(y&&0<D&&y<p)break;if(a=!0,!N(O))break}function N(t){return!(y&&0<e.length&&y<p)&&(p+=o+c,n||a||(s-=l),e.push(t),r.push(o),i.push(s),u=Math.max(s,u),!0)}return p-=c,t.$textWidth=u,t.$textHeight=p,this.$textOffsetX=d,this.$textOffsetY=f,this.$textStartX=0,this.$textStartY=0,u<g&&((h=t.$textAlign)==k.HorizontalAlign.RIGHT?this.$textStartX=g-u:h==k.HorizontalAlign.CENTER&&(this.$textStartX=Math.floor((g-u)/2))),p<y&&((h=t.$verticalAlign)==k.VerticalAlign.BOTTOM?this.$textStartY=y-p:h==k.VerticalAlign.MIDDLE&&(this.$textStartY=Math.floor((y-p)/2))),e},j.EMPTY_FACTOR=.33,j}(k.DisplayObject);k.BitmapText=t,__reflect(t.prototype,"egret.BitmapText")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.HorizontalAlign=e,__reflect(e.prototype,"egret.HorizontalAlign")}(egret||(egret={})),function(a){var t=function(){function t(){this.replaceArr=[],this.resutlArr=[],this.initReplaceArr()}return t.prototype.initReplaceArr=function(){this.replaceArr=[],this.replaceArr.push([/&lt;/g,"<"]),this.replaceArr.push([/&gt;/g,">"]),this.replaceArr.push([/&amp;/g,"&"]),this.replaceArr.push([/&quot;/g,'"']),this.replaceArr.push([/&apos;/g,"'"])},t.prototype.replaceSpecial=function(t){for(var e=0;e<this.replaceArr.length;e++){var i=this.replaceArr[e][0],r=this.replaceArr[e][1];t=t.replace(i,r)}return t},t.prototype.parse=function(t){this.stackArray=[],this.resutlArr=[];for(var e=0,i=t.length;e<i;){var r=t.indexOf("<",e);if(r<0)this.addToResultArr(t.substring(e)),e=i;else{this.addToResultArr(t.substring(e,r));var n=t.indexOf(">",r);-1==n?(a.$error(1038),n=r):"/"==t.charAt(r+1)?this.stackArray.pop():this.addToArray(t.substring(r+1,n)),e=n+1}}return this.resutlArr},t.prototype.parser=function(t){return this.parse(t)},t.prototype.addToResultArr=function(t){""!=t&&(t=this.replaceSpecial(t),0<this.stackArray.length?this.resutlArr.push({text:t,style:this.stackArray[this.stackArray.length-1]}):this.resutlArr.push({text:t}))},t.prototype.changeStringToObject=function(t){var e={},i=[];if("i"==(t=t.trim()).charAt(0)||"b"==t.charAt(0)||"u"==t.charAt(0))this.addProperty(e,t,"true");else if(i=t.match(/^(font|a)\s/))for(var r=0,n=void 0;n=(t=t.substring(i[0].length).trim()).match(this.getHeadReg());){var a=n[0],o="";'"'==(t=t.substring(a.length).trim()).charAt(0)?(r=t.indexOf('"',1),o=t.substring(1,r),r+=1):"'"==t.charAt(0)?(r=t.indexOf("'",1),o=t.substring(1,r),r+=1):r=(o=t.match(/(\S)+/)[0]).length,this.addProperty(e,a.substring(0,a.length-1).trim(),o.trim()),t=t.substring(r).trim()}return e},t.prototype.getHeadReg=function(){return/^(color|textcolor|strokecolor|stroke|b|bold|i|italic|u|size|fontfamily|href|target)(\s)*=/},t.prototype.addProperty=function(t,e,i){switch(e.toLowerCase()){case"color":case"textcolor":i=i.replace(/#/,"0x"),t.textColor=parseInt(i);break;case"strokecolor":i=i.replace(/#/,"0x"),t.strokeColor=parseInt(i);break;case"stroke":t.stroke=parseInt(i);break;case"b":case"bold":t.bold="true"==i;break;case"u":t.underline="true"==i;break;case"i":case"italic":t.italic="true"==i;break;case"size":t.size=parseInt(i);break;case"fontfamily":t.fontFamily=i;break;case"href":t.href=this.replaceSpecial(i);break;case"target":t.target=this.replaceSpecial(i)}},t.prototype.addToArray=function(t){var e=this.changeStringToObject(t);if(0==this.stackArray.length)this.stackArray.push(e);else{var i=this.stackArray[this.stackArray.length-1];for(var r in i)null==e[r]&&(e[r]=i[r]);this.stackArray.push(e)}},t}();a.HtmlTextParser=t,__reflect(t.prototype,"egret.HtmlTextParser")}(egret||(egret={})),function(o){var t=function(e){function t(){var t=e.call(this)||this;return t.stageTextAdded=!1,t._text=null,t._isFocus=!1,t}return __extends(t,e),t.prototype.init=function(t){this._text=t,this.stageText=new o.StageText,this.stageText.$setTextField(this._text)},t.prototype._addStageText=function(){this.stageTextAdded||(this._text.$inputEnabled||(this._text.$touchEnabled=!0),this.tempStage=this._text.stage,this.stageText.$addToStage(),this.stageText.addEventListener("updateText",this.updateTextHandler,this),this._text.addEventListener(o.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.stageText.addEventListener("blur",this.blurHandler,this),this.stageText.addEventListener("focus",this.focusHandler,this),this.stageTextAdded=!0)},t.prototype._removeStageText=function(){this.stageTextAdded&&(this._text.$inputEnabled||(this._text.$touchEnabled=!1),this.stageText.$removeFromStage(),this.stageText.removeEventListener("updateText",this.updateTextHandler,this),this._text.removeEventListener(o.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.tempStage.removeEventListener(o.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this.stageText.removeEventListener("blur",this.blurHandler,this),this.stageText.removeEventListener("focus",this.focusHandler,this),this.stageTextAdded=!1)},t.prototype._getText=function(){return this.stageText.$getText()},t.prototype._setText=function(t){this.stageText.$setText(t)},t.prototype._setColor=function(t){this.stageText.$setColor(t)},t.prototype.focusHandler=function(t){this._isFocus||(this._isFocus=!0,t.showing||this._text.$setIsTyping(!0),this._text.dispatchEvent(new o.FocusEvent(o.FocusEvent.FOCUS_IN,!0)))},t.prototype.blurHandler=function(t){this._isFocus&&(this._isFocus=!1,this.tempStage.removeEventListener(o.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this._text.$setIsTyping(!1),this.stageText.$onBlur(),this._text.dispatchEvent(new o.FocusEvent(o.FocusEvent.FOCUS_OUT,!0)))},t.prototype.onMouseDownHandler=function(t){this.$onFocus()},t.prototype.$onFocus=function(){var t=this;this._text.visible&&(this._isFocus||(this.tempStage.removeEventListener(o.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),o.callLater(function(){t.tempStage.addEventListener(o.TouchEvent.TOUCH_BEGIN,t.onStageDownHandler,t)},this),o.nativeRender&&this.stageText.$setText(this._text.$TextField[13]),this.stageText.$show()))},t.prototype.onStageDownHandler=function(t){t.$target!=this._text&&this.stageText.$hide()},t.prototype.updateTextHandler=function(t){var e,i,r=this._text.$TextField,n=this.stageText.$getText(),a=!1;null!=r[35]&&(e=new RegExp("["+r[35]+"]","g"),n=(i=n.match(e))?i.join(""):"",a=!0),null!=r[36]&&(e=new RegExp("[^"+r[36]+"]","g"),n=(i=n.match(e))?i.join(""):"",a=!0),a&&this.stageText.$getText()!=n&&this.stageText.$setText(n),this.resetText(),this._text.dispatchEvent(new o.Event(o.Event.CHANGE,!0))},t.prototype.resetText=function(){this._text.$setBaseText(this.stageText.$getText())},t.prototype._hideInput=function(){this.stageText.$removeFromStage()},t.prototype.updateInput=function(){!this._text.$visible&&this.stageText&&this._hideInput()},t.prototype._updateProperties=function(){if(this._isFocus)return this.stageText.$resetStageText(),void this.updateInput();this.stageText.$setText(this._text.$TextField[13]),this.stageText.$resetStageText(),this.updateInput()},t}(o.HashObject);o.InputController=t,__reflect(t.prototype,"egret.InputController")}(egret||(egret={})),egret||(egret={}),function(N){var j=new RegExp("(?=[\\u00BF-\\u1FFF\\u2C00-\\uD7FF]|\\b|\\s)(?![。，！、》…）)}”】\\.\\,\\!\\?\\]\\:])");function k(t,e,i){var r=null==(i=i||{}).italic?e[16]:i.italic,n=null==i.bold?e[15]:i.bold,a=null==i.size?e[0]:i.size,o=i.fontFamily||e[8]||s.default_fontFamily;return N.sys.measureText(t,o,a,n,r)}var s=function(i){function b(){var t=i.call(this)||this;t.$inputEnabled=!1,t.inputUtils=null,t.$graphicsNode=null,t.isFlow=!1,t.textArr=[],t.linesArr=[],t.$isTyping=!1;var e=new N.sys.TextNode;return e.fontFamily=b.default_fontFamily,t.textNode=e,t.$renderNode=e,t.$TextField={0:b.default_size,1:0,2:b.default_textColor,3:NaN,4:NaN,5:0,6:0,7:0,8:b.default_fontFamily,9:"left",10:"top",11:"#ffffff",12:"",13:"",14:[],15:!1,16:!1,17:!0,18:!1,19:!1,20:!1,21:0,22:0,23:0,24:N.TextFieldType.DYNAMIC,25:0,26:"#000000",27:0,28:-1,29:0,30:!1,31:!1,32:0,33:!1,34:16777215,35:null,36:null,37:N.TextFieldInputType.TEXT,38:!1},t}return __extends(b,i),b.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(7)},b.prototype.isInput=function(){return this.$TextField[24]==N.TextFieldType.INPUT},b.prototype.$setTouchEnabled=function(t){i.prototype.$setTouchEnabled.call(this,t),this.isInput()&&(this.$inputEnabled=!0)},Object.defineProperty(b.prototype,"fontFamily",{get:function(){return this.$TextField[8]},set:function(t){this.$setFontFamily(t)},enumerable:!0,configurable:!0}),b.prototype.$setFontFamily=function(t){var e=this.$TextField;return e[8]!=t&&(e[8]=t,this.invalidateFontString(),N.nativeRender&&this.$nativeDisplayObject.setFontFamily(t),!0)},Object.defineProperty(b.prototype,"size",{get:function(){return this.$TextField[0]},set:function(t){this.$setSize(t)},enumerable:!0,configurable:!0}),b.prototype.$setSize=function(t){var e=this.$TextField;return e[0]!=t&&(e[0]=t,this.invalidateFontString(),N.nativeRender&&this.$nativeDisplayObject.setFontSize(t),!0)},Object.defineProperty(b.prototype,"bold",{get:function(){return this.$TextField[15]},set:function(t){this.$setBold(t)},enumerable:!0,configurable:!0}),b.prototype.$setBold=function(t){var e=this.$TextField;return t!=e[15]&&(e[15]=t,this.invalidateFontString(),N.nativeRender&&this.$nativeDisplayObject.setBold(t),!0)},Object.defineProperty(b.prototype,"italic",{get:function(){return this.$TextField[16]},set:function(t){this.$setItalic(t)},enumerable:!0,configurable:!0}),b.prototype.$setItalic=function(t){var e=this.$TextField;return t!=e[16]&&(e[16]=t,this.invalidateFontString(),N.nativeRender&&this.$nativeDisplayObject.setItalic(t),!0)},b.prototype.invalidateFontString=function(){this.$TextField[17]=!0,this.$invalidateTextField()},Object.defineProperty(b.prototype,"textAlign",{get:function(){return this.$TextField[9]},set:function(t){this.$setTextAlign(t)},enumerable:!0,configurable:!0}),b.prototype.$setTextAlign=function(t){var e=this.$TextField;return e[9]!=t&&(e[9]=t,this.$invalidateTextField(),N.nativeRender&&this.$nativeDisplayObject.setTextAlign(t),!0)},Object.defineProperty(b.prototype,"verticalAlign",{get:function(){return this.$TextField[10]},set:function(t){this.$setVerticalAlign(t)},enumerable:!0,configurable:!0}),b.prototype.$setVerticalAlign=function(t){var e=this.$TextField;return e[10]!=t&&(e[10]=t,this.$invalidateTextField(),N.nativeRender&&this.$nativeDisplayObject.setVerticalAlign(t),!0)},Object.defineProperty(b.prototype,"lineSpacing",{get:function(){return this.$TextField[1]},set:function(t){this.$setLineSpacing(t)},enumerable:!0,configurable:!0}),b.prototype.$setLineSpacing=function(t){var e=this.$TextField;return e[1]!=t&&(e[1]=t,this.$invalidateTextField(),N.nativeRender&&this.$nativeDisplayObject.setLineSpacing(t),!0)},Object.defineProperty(b.prototype,"textColor",{get:function(){return this.$TextField[2]},set:function(t){this.$setTextColor(t)},enumerable:!0,configurable:!0}),b.prototype.$setTextColor=function(t){var e=this.$TextField;return e[2]!=t&&(e[2]=t,this.inputUtils&&this.inputUtils._setColor(this.$TextField[2]),this.$invalidateTextField(),N.nativeRender&&this.$nativeDisplayObject.setTextColor(t),!0)},Object.defineProperty(b.prototype,"wordWrap",{get:function(){return this.$TextField[19]},set:function(t){this.$setWordWrap(t)},enumerable:!0,configurable:!0}),b.prototype.$setWordWrap=function(t){var e=this.$TextField;t!=e[19]&&(e[20]||(e[19]=t,this.$invalidateTextField(),N.nativeRender&&this.$nativeDisplayObject.setWordWrap(t)))},Object.defineProperty(b.prototype,"type",{get:function(){return this.$TextField[24]},set:function(t){this.$setType(t)},enumerable:!0,configurable:!0}),b.prototype.$setType=function(t){var e=this.$TextField;return e[24]!=t&&(e[24]=t,N.nativeRender&&this.$nativeDisplayObject.setType(t),t==N.TextFieldType.INPUT?(isNaN(e[3])&&this.$setWidth(100),isNaN(e[4])&&this.$setHeight(30),this.$setTouchEnabled(!0),null==this.inputUtils&&(this.inputUtils=new N.InputController),this.inputUtils.init(this),this.$invalidateTextField(),this.$stage&&this.inputUtils._addStageText()):(this.inputUtils&&(this.inputUtils._removeStageText(),this.inputUtils=null),this.$setTouchEnabled(!1)),!0)},Object.defineProperty(b.prototype,"inputType",{get:function(){return this.$TextField[37]},set:function(t){this.$TextField[37]!=t&&(this.$TextField[37]=t,N.nativeRender&&this.$nativeDisplayObject.setInputType(t))},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"text",{get:function(){return this.$getText()},set:function(t){this.$setText(t)},enumerable:!0,configurable:!0}),b.prototype.$getText=function(){return this.$TextField[24]==N.TextFieldType.INPUT?this.inputUtils._getText():this.$TextField[13]},b.prototype.$setBaseText=function(t){t=null==t?"":t.toString(),this.isFlow=!1;var e=this.$TextField;if(e[13]!=t){this.$invalidateTextField(),e[13]=t;var i="";return i=e[20]?this.changeToPassText(t):t,N.nativeRender&&this.$nativeDisplayObject.setText(i),this.setMiddleStyle([{text:i}]),!0}return!1},b.prototype.$setText=function(t){null==t&&(t="");var e=this.$setBaseText(t);return this.inputUtils&&this.inputUtils._setText(this.$TextField[13]),e},Object.defineProperty(b.prototype,"displayAsPassword",{get:function(){return this.$TextField[20]},set:function(t){this.$setDisplayAsPassword(t)},enumerable:!0,configurable:!0}),b.prototype.$setDisplayAsPassword=function(t){var e=this.$TextField;if(e[20]!=t){e[20]=t,this.$invalidateTextField();var i="";return i=t?this.changeToPassText(e[13]):e[13],N.nativeRender&&this.$nativeDisplayObject.setText(i),this.setMiddleStyle([{text:i}]),!0}return!1},Object.defineProperty(b.prototype,"strokeColor",{get:function(){return this.$TextField[25]},set:function(t){this.$setStrokeColor(t)},enumerable:!0,configurable:!0}),b.prototype.$setStrokeColor=function(t){var e=this.$TextField;return e[25]!=t&&(this.$invalidateTextField(),e[25]=t,N.nativeRender&&this.$nativeDisplayObject.setStrokeColor(t),e[26]=N.toColorString(t),!0)},Object.defineProperty(b.prototype,"stroke",{get:function(){return this.$TextField[27]},set:function(t){this.$setStroke(t)},enumerable:!0,configurable:!0}),b.prototype.$setStroke=function(t){return this.$TextField[27]!=t&&(this.$invalidateTextField(),this.$TextField[27]=t,N.nativeRender&&this.$nativeDisplayObject.setStroke(t),!0)},Object.defineProperty(b.prototype,"maxChars",{get:function(){return this.$TextField[21]},set:function(t){this.$setMaxChars(t)},enumerable:!0,configurable:!0}),b.prototype.$setMaxChars=function(t){return this.$TextField[21]!=t&&(this.$TextField[21]=t,N.nativeRender&&this.$nativeDisplayObject.setMaxChars(t),!0)},Object.defineProperty(b.prototype,"scrollV",{get:function(){return Math.min(Math.max(this.$TextField[28],1),this.maxScrollV)},set:function(t){(t=Math.max(t,1))!=this.$TextField[28]&&(this.$TextField[28]=t,N.nativeRender&&this.$nativeDisplayObject.setScrollV(t),this.$invalidateTextField())},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"maxScrollV",{get:function(){return this.$getLinesArr(),Math.max(this.$TextField[29]-N.TextFieldUtils.$getScrollNum(this)+1,1)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"selectionBeginIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"selectionEndIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"caretIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),b.prototype.$setSelection=function(t,e){return!1},b.prototype.$getLineHeight=function(){return this.$TextField[1]+this.$TextField[0]},Object.defineProperty(b.prototype,"numLines",{get:function(){return this.$getLinesArr(),this.$TextField[29]},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"multiline",{get:function(){return this.$TextField[30]},set:function(t){this.$setMultiline(t)},enumerable:!0,configurable:!0}),b.prototype.$setMultiline=function(t){return this.$TextField[30]!=t&&(this.$TextField[30]=t,this.$invalidateTextField(),N.nativeRender&&this.$nativeDisplayObject.setMultiline(t),!0)},Object.defineProperty(b.prototype,"restrict",{get:function(){var t=this.$TextField,e=null;return null!=t[35]&&(e=t[35]),null!=t[36]&&(null==e&&(e=""),e+="^"+t[36]),e},set:function(t){var e=this.$TextField;if(null==t)e[35]=null,e[36]=null;else{for(var i=-1;i<t.length&&0!=(i=t.indexOf("^",i))&&0<i&&"\\"==t.charAt(i-1);)i++;0==i?(e[35]=null,e[36]=t.substring(i+1)):0<i?(e[35]=t.substring(0,i),e[36]=t.substring(i+1)):(e[35]=t,e[36]=null)}},enumerable:!0,configurable:!0}),b.prototype.$setWidth=function(t){N.nativeRender&&this.$nativeDisplayObject.setTextFieldWidth(t);var e=this.$TextField;if(isNaN(t)){if(isNaN(e[3]))return!1;e[3]=NaN}else{if(e[3]==t)return!1;e[3]=t}return!((t=+t)<0)&&(this.$invalidateTextField(),!0)},b.prototype.$setHeight=function(t){N.nativeRender&&this.$nativeDisplayObject.setTextFieldHeight(t);var e=this.$TextField;if(isNaN(t)){if(isNaN(e[4]))return!1;e[4]=NaN}else{if(e[4]==t)return!1;e[4]=t}return!((t=+t)<0)&&(this.$invalidateTextField(),!0)},b.prototype.$getWidth=function(){var t=this.$TextField;return isNaN(t[3])?this.$getContentBounds().width:t[3]},b.prototype.$getHeight=function(){var t=this.$TextField;return isNaN(t[4])?this.$getContentBounds().height:t[4]},Object.defineProperty(b.prototype,"border",{get:function(){return this.$TextField[31]},set:function(t){this.$setBorder(t)},enumerable:!0,configurable:!0}),b.prototype.$setBorder=function(t){t=!!t,this.$TextField[31]!=t&&(this.$TextField[31]=t,this.$invalidateTextField(),N.nativeRender&&this.$nativeDisplayObject.setBorder(t))},Object.defineProperty(b.prototype,"borderColor",{get:function(){return this.$TextField[32]},set:function(t){this.$setBorderColor(t)},enumerable:!0,configurable:!0}),b.prototype.$setBorderColor=function(t){t=+t||0,this.$TextField[32]!=t&&(this.$TextField[32]=t,this.$invalidateTextField(),N.nativeRender&&this.$nativeDisplayObject.setBorderColor(t))},Object.defineProperty(b.prototype,"background",{get:function(){return this.$TextField[33]},set:function(t){this.$setBackground(t)},enumerable:!0,configurable:!0}),b.prototype.$setBackground=function(t){this.$TextField[33]!=t&&(this.$TextField[33]=t,this.$invalidateTextField(),N.nativeRender&&this.$nativeDisplayObject.setBackground(t))},Object.defineProperty(b.prototype,"backgroundColor",{get:function(){return this.$TextField[34]},set:function(t){this.$setBackgroundColor(t)},enumerable:!0,configurable:!0}),b.prototype.$setBackgroundColor=function(t){this.$TextField[34]!=t&&(this.$TextField[34]=t,this.$invalidateTextField(),N.nativeRender&&this.$nativeDisplayObject.setBackgroundColor(t))},b.prototype.fillBackground=function(t){var e=this.$graphicsNode;e&&e.clear();var i=this.$TextField;if(i[33]||i[31]||t&&0<t.length){if(!e)if(e=this.$graphicsNode=new N.sys.GraphicsNode,N.nativeRender)this.$renderNode=this.textNode;else{var r=new N.sys.GroupNode;r.addNode(e),r.addNode(this.textNode),this.$renderNode=r}var n=void 0;if(i[33]&&e.beginFill(i[34]).drawRect(0,0,this.$getWidth(),this.$getHeight()),i[31]&&(n=e.lineStyle(1,i[32])).drawRect(0,0,this.$getWidth()-1,this.$getHeight()-1),t&&0<t.length)for(var a=i[2],o=-1,s=t.length,h=0;h<s;h+=4){var c=t[h],l=t[h+1],u=t[h+2],p=t[h+3]||a;(o<0||o!=p)&&(o=p,n=e.lineStyle(2,p,1,N.CapsStyle.NONE)),n.moveTo(c,l),n.lineTo(c+u,l)}}if(e){var d=this.$getRenderBounds();e.x=d.x,e.y=d.y,e.width=d.width,e.height=d.height,N.Rectangle.release(d)}},b.prototype.setFocus=function(){this.type==N.TextFieldType.INPUT&&this.$stage&&this.inputUtils.$onFocus()},b.prototype.$onRemoveFromStage=function(){i.prototype.$onRemoveFromStage.call(this),this.removeEvent(),this.$TextField[24]==N.TextFieldType.INPUT&&this.inputUtils._removeStageText(),this.textNode&&(this.textNode.clean(),N.nativeRender&&egret_native.NativeDisplayObject.disposeTextData(this))},b.prototype.$onAddToStage=function(t,e){i.prototype.$onAddToStage.call(this,t,e),this.addEvent(),this.$TextField[24]==N.TextFieldType.INPUT&&this.inputUtils._addStageText()},b.prototype.$invalidateTextField=function(){var t=this;if(t.$renderDirty=!0,t.$TextField[18]=!0,t.$TextField[38]=!0,N.nativeRender);else{var e=t.$parent;e&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp());var i=t.$maskedObject;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp())}},b.prototype.$getRenderBounds=function(){var t=this.$getContentBounds(),e=N.Rectangle.create();e.copyFrom(t),this.$TextField[31]&&(e.width+=2,e.height+=2);var i=2*this.$TextField[27];return 0<i&&(e.width+=2*i,e.height+=2*i),e.x-=i+2,e.y-=i+2,e.width=Math.ceil(e.width)+4,e.height=Math.ceil(e.height)+4,e},b.prototype.$measureContentBounds=function(t){this.$getLinesArr();var e=0,i=0;N.nativeRender?(e=egret_native.nrGetTextFieldWidth(this.$nativeDisplayObject.id),i=egret_native.nrGetTextFieldHeight(this.$nativeDisplayObject.id)):(e=isNaN(this.$TextField[3])?this.$TextField[5]:this.$TextField[3],i=isNaN(this.$TextField[4])?N.TextFieldUtils.$getTextHeight(this):this.$TextField[4]),t.setTo(0,0,e,i)},b.prototype.$updateRenderNode=function(){if(this.$TextField[24]==N.TextFieldType.INPUT){if(this.inputUtils._updateProperties(),this.$isTyping)return void this.fillBackground()}else if(0==this.$TextField[3]){var t=this.$graphicsNode;return void(t&&t.clear())}var e=this.drawText();this.fillBackground(e);var i=this.$getRenderBounds(),r=this.textNode;r.x=i.x,r.y=i.y,r.width=Math.ceil(i.width),r.height=Math.ceil(i.height),N.Rectangle.release(i)},Object.defineProperty(b.prototype,"textFlow",{get:function(){return this.textArr},set:function(t){this.isFlow=!0;var e="";null==t&&(t=[]);for(var i=0;i<t.length;i++){e+=t[i].text}this.$TextField[20]?this.$setBaseText(e):(this.$TextField[13]=e,this.setMiddleStyle(t),N.nativeRender&&this.$nativeDisplayObject.setTextFlow(t))},enumerable:!0,configurable:!0}),b.prototype.changeToPassText=function(t){if(this.$TextField[20]){for(var e="",i=0,r=t.length;i<r;i++)switch(t.charAt(i)){case"\n":e+="\n";break;case"\r":break;default:e+="*"}return e}return t},b.prototype.setMiddleStyle=function(t){this.$TextField[18]=!0,this.$TextField[38]=!0,this.textArr=t,this.$invalidateTextField()},Object.defineProperty(b.prototype,"textWidth",{get:function(){return this.$getLinesArr(),N.nativeRender?egret_native.nrGetTextWidth(this.$nativeDisplayObject.id):this.$TextField[5]},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"textHeight",{get:function(){return this.$getLinesArr(),N.nativeRender?egret_native.nrGetTextHeight(this.$nativeDisplayObject.id):N.TextFieldUtils.$getTextHeight(this)},enumerable:!0,configurable:!0}),b.prototype.appendText=function(t){this.appendElement({text:t})},b.prototype.appendElement=function(t){var e=this.$TextField[13]+t.text;if(N.nativeRender)return this.textArr.push(t),this.$TextField[13]=e,this.$TextField[18]=!0,this.$TextField[38]=!0,void this.$nativeDisplayObject.setTextFlow(this.textArr);this.$TextField[20]?this.$setBaseText(e):(this.$TextField[13]=e,this.textArr.push(t),this.setMiddleStyle(this.textArr))},b.prototype.$getLinesArr=function(){var t=this.$TextField;return N.nativeRender&&t[38]?(egret_native.updateNativeRender(),void(t[38]=!1)):this.$getLinesArr2()},b.prototype.$getLinesArr2=function(){var t=this.$TextField;if(!t[18])return this.linesArr;t[18]=!1;var e=this.textArr;this.linesArr.length=0,t[6]=0,t[5]=0;var i=t[3];if(!isNaN(i)&&0==i)return[{width:t[29]=0,height:0,charNum:0,elements:[],hasNextLine:!1}];for(var r,n=this.linesArr,a=0,o=0,s=0,h=0,c=0,l=e.length;c<l;c++){var u=e[c];if(u.text){u.style=u.style||{};for(var p=u.text.toString().split(/(?:\r\n|\r|\n)/),d=0,f=p.length;d<f;d++){null==n[h]&&(r={width:0,height:0,elements:[],charNum:0,hasNextLine:!1},n[h]=r,o=s=a=0),s=t[24]==N.TextFieldType.INPUT?t[0]:Math.max(s,u.style.size||t[0]);var $=!0;if(""==p[d])d==f-1&&($=!1);else{var g=k(p[d],t,u.style);if(isNaN(i))a+=g,o+=p[d].length,r.elements.push({width:g,text:p[d],style:u.style}),d==f-1&&($=!1);else if(a+g<=i)r.elements.push({width:g,text:p[d],style:u.style}),a+=g,o+=p[d].length,d==f-1&&($=!1);else{for(var y=0,v=0,b=p[d],m=void 0,x=(m=t[19]?b.split(j):b.match(/./g)).length,T=0;y<x;y++){var _=!1;if(1==(S=m[y].length)&&y<x-1){var D=m[y].charCodeAt(0),O=m[y+1].charCodeAt(0);if(55296<=D&&D<=56319&&56320==(64512&O))S=2,_=!0,g=k(m[y]+m[y+1],t,u.style);else g=k(m[y],t,u.style)}else g=k(m[y],t,u.style);if(0!=a&&i<a+g&&a+y!=0)break;if(i<v+g)for(var w=m[y].match(/./g),E=0,R=w.length;E<R;E++){var S,F=!1;if(1==(S=w[E].length)&&E<R-1){D=w[E].charCodeAt(0),O=w[E+1].charCodeAt(0);if(55296<=D&&D<=56319&&56320==(64512&O))S=2,F=!0,g=k(w[E]+w[E+1],t,u.style);else g=k(w[E],t,u.style)}else g=k(w[E],t,u.style);if(0<E&&i<a+g)break;v+=g,a+=g,o+=T+=S,F&&E++}else v+=g,a+=g,o+=T+=S;_&&y++}if(0<y){r.elements.push({width:v,text:b.substring(0,T),style:u.style});var C=b.substring(T),P=void 0,M=C.length;for(P=0;P<M&&" "==C.charAt(P);P++);p[d]=C.substring(P)}""!=p[d]&&(d--,$=!1)}}$&&(o++,r.hasNextLine=!0),d<p.length-1&&(r.width=a,r.height=s,r.charNum=o,t[5]=Math.max(t[5],a),t[6]+=s,h++)}c==e.length-1&&r&&(r.width=a,r.height=s,r.charNum=o,t[5]=Math.max(t[5],a),t[6]+=s)}else r&&(r.width=a,r.height=s,r.charNum=o,t[5]=Math.max(t[5],a),t[6]+=s)}return t[29]=n.length,n},b.prototype.$setIsTyping=function(t){this.$isTyping=t,this.$invalidateTextField(),N.nativeRender&&this.$nativeDisplayObject.setIsTyping(t)},b.prototype.drawText=function(){var t=this.textNode,e=this.$TextField;t.bold=e[15],t.fontFamily=e[8]||b.default_fontFamily,t.italic=e[16],t.size=e[0],t.stroke=e[27],t.strokeColor=e[25],t.textColor=e[2];var i=this.$getLinesArr();if(0==e[5])return[];var r=isNaN(e[3])?e[5]:e[3],n=N.TextFieldUtils.$getTextHeight(this),a=0,o=N.TextFieldUtils.$getStartLine(this),s=e[4];!isNaN(s)&&n<s&&(a+=N.TextFieldUtils.$getValign(this)*(s-n));a=Math.round(a);for(var h=N.TextFieldUtils.$getHalign(this),c=0,l=[],u=o,p=e[29];u<p;u++){var d=i[u],f=d.height;if(a+=f/2,u!=o){if(e[24]==N.TextFieldType.INPUT&&!e[30])break;if(!isNaN(s)&&s<a)break}c=Math.round((r-d.width)*h);for(var $=0,g=d.elements.length;$<g;$++){var y=d.elements[$],v=y.style.size||e[0];t.drawText(c,a+(f-v)/2,y.text,y.style),y.style.underline&&l.push(c,a+f/2,y.width,y.style.textColor),c+=y.width}a+=f/2+e[1]}return l},b.prototype.addEvent=function(){this.addEventListener(N.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},b.prototype.removeEvent=function(){this.removeEventListener(N.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},b.prototype.onTapHandler=function(t){if(this.$TextField[24]!=N.TextFieldType.INPUT){var e=N.TextFieldUtils.$getTextElement(this,t.localX,t.localY);if(null!=e){var i=e.style;if(i&&i.href)if(i.href.match(/^event:/)){var r=i.href.match(/^event:/)[0];N.TextEvent.dispatchTextEvent(this,N.TextEvent.LINK,i.href.substring(r.length))}else open(i.href,i.target||"_blank")}}},b.default_fontFamily="Arial",b.default_size=30,b.default_textColor=16777215,b}(N.DisplayObject);N.TextField=s,__reflect(s.prototype,"egret.TextField")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.TEXT="text",t.TEL="tel",t.PASSWORD="password",t}();t.TextFieldInputType=e,__reflect(e.prototype,"egret.TextFieldInputType")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.DYNAMIC="dynamic",t.INPUT="input",t}();t.TextFieldType=e,__reflect(e.prototype,"egret.TextFieldType")}(egret||(egret={})),function(n){var t=function(){function $(){}return $.$getStartLine=function(t){var e=t.$TextField,i=$.$getTextHeight(t),r=0,n=e[4];return isNaN(n)||(i<n||n<i&&(r=Math.max(e[28]-1,0),r=Math.min(e[29]-1,r)),e[30]||(r=Math.max(e[28]-1,0),0<e[29]&&(r=Math.min(e[29]-1,r)))),r},$.$getHalign=function(t){var e=t.$getLinesArr2(),i=0;return t.$TextField[9]==n.HorizontalAlign.CENTER?i=.5:t.$TextField[9]==n.HorizontalAlign.RIGHT&&(i=1),t.$TextField[24]==n.TextFieldType.INPUT&&!t.$TextField[30]&&1<e.length&&(i=0),i},$.$getTextHeight=function(t){return n.TextFieldType.INPUT!=t.$TextField[24]||t.$TextField[30]?t.$TextField[6]+(t.$TextField[29]-1)*t.$TextField[1]:t.$TextField[0]},$.$getValign=function(t){var e=$.$getTextHeight(t),i=t.$TextField[4];if(!isNaN(i)&&e<i){var r=0;return t.$TextField[10]==n.VerticalAlign.MIDDLE?r=.5:t.$TextField[10]==n.VerticalAlign.BOTTOM&&(r=1),r}return 0},$.$getTextElement=function(t,e,i){var r=$.$getHit(t,e,i),n=t.$getLinesArr2();return r&&n[r.lineIndex]&&n[r.lineIndex].elements[r.textElementIndex]?n[r.lineIndex].elements[r.textElementIndex]:null},$.$getHit=function(t,e,i){var r=t.$getLinesArr2();if(0==t.$TextField[3])return null;var n=0,a=$.$getTextHeight(t),o=0,s=t.$TextField[4];!isNaN(s)&&a<s&&(0!=(o=$.$getValign(t)*(s-a))&&(i-=o));for(var h=0,c=$.$getStartLine(t);c<r.length;c++){var l=r[c];if(h+l.height>=i){h<i&&(n=c+1);break}if((h+=l.height)+t.$TextField[1]>i)return null;h+=t.$TextField[1]}if(0==n)return null;var u=r[n-1],p=t.$TextField[3];isNaN(p)&&(p=t.textWidth),e-=$.$getHalign(t)*(p-u.width);var d=0;for(c=0;c<u.elements.length;c++){var f=u.elements[c];if(d+f.width<=e)d+=f.width;else if(d<e)return{lineIndex:n-1,textElementIndex:c}}return null},$.$getScrollNum=function(t){var e=1;if(t.$TextField[30]){var i=t.height,r=t.size,n=t.lineSpacing;r/2<i-(r+n)*(e=Math.floor(i/(r+n)))&&e++}return e},$}();n.TextFieldUtils=t,__reflect(t.prototype,"egret.TextFieldUtils")}(egret||(egret={})),function(t){t.sys||(t.sys={})}(egret||(egret={})),function(t){var e=function(){function t(){}return t.TOP="top",t.BOTTOM="bottom",t.MIDDLE="middle",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.VerticalAlign=e,__reflect(e.prototype,"egret.VerticalAlign")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.encode=function(t){for(var e=new Uint8Array(t),i=e.length,r="",n=0;n<i;n+=3)r+=chars[e[n]>>2],r+=chars[(3&e[n])<<4|e[n+1]>>4],r+=chars[(15&e[n+1])<<2|e[n+2]>>6],r+=chars[63&e[n+2]];return i%3==2?r=r.substring(0,r.length-1)+"=":i%3==1&&(r=r.substring(0,r.length-2)+"=="),r},t.decode=function(t){var e=.75*t.length,i=t.length,r=0,n=0,a=0,o=0,s=0;"="===t[t.length-1]&&(e--,"="===t[t.length-2]&&e--);for(var h=new ArrayBuffer(e),c=new Uint8Array(h),l=0;l<i;l+=4)n=lookup[t.charCodeAt(l)],a=lookup[t.charCodeAt(l+1)],o=lookup[t.charCodeAt(l+2)],s=lookup[t.charCodeAt(l+3)],c[r++]=n<<2|a>>4,c[r++]=(15&a)<<4|o>>2,c[r++]=(3&o)<<6|63&s;return h},t}();t.Base64Util=e,__reflect(e.prototype,"egret.Base64Util")}(egret||(egret={}));for(var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=new Uint8Array(256),i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;!function(o){var a=function(){function t(){}return t.LITTLE_ENDIAN="littleEndian",t.BIG_ENDIAN="bigEndian",t}();o.Endian=a,__reflect(a.prototype,"egret.Endian");var t=function(){function t(t,e){void 0===e&&(e=0),this.bufferExtSize=0,this.EOF_byte=-1,this.EOF_code_point=-1,e<0&&(e=0),this.bufferExtSize=e;var i,r=0;if(t){var n=void 0;if(t instanceof Uint8Array?r=(n=t).length:(r=t.byteLength,n=new Uint8Array(t)),0==e)i=new Uint8Array(r);else i=new Uint8Array((1+(r/e|0))*e);i.set(n)}else i=new Uint8Array(e);this.write_position=r,this._position=0,this._bytes=i,this.data=new DataView(i.buffer),this.endian=a.BIG_ENDIAN}return Object.defineProperty(t.prototype,"endian",{get:function(){return 0==this.$endian?a.LITTLE_ENDIAN:a.BIG_ENDIAN},set:function(t){this.$endian=t==a.LITTLE_ENDIAN?0:1},enumerable:!0,configurable:!0}),t.prototype.setArrayBuffer=function(t){},Object.defineProperty(t.prototype,"readAvailable",{get:function(){return this.write_position-this._position},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this.data.buffer.slice(0,this.write_position)},set:function(t){var e,i=t.byteLength,r=new Uint8Array(t),n=this.bufferExtSize;0==n?e=new Uint8Array(i):e=new Uint8Array((1+(i/n|0))*n);e.set(r),this.write_position=i,this._bytes=e,this.data=new DataView(e.buffer)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rawBuffer",{get:function(){return this.data.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bytes",{get:function(){return this._bytes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataView",{get:function(){return this.data},set:function(t){this.buffer=t.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){(this._position=t)>this.write_position&&(this.write_position=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.write_position},set:function(t){this.write_position=t,this.data.byteLength>t&&(this._position=t),this._validateBuffer(t)},enumerable:!0,configurable:!0}),t.prototype._validateBuffer=function(t){if(this.data.byteLength<t){var e=this.bufferExtSize,i=void 0;if(0==e)i=new Uint8Array(t);else i=new Uint8Array((1+(t/e>>0))*e);i.set(this._bytes),this._bytes=i,this.data=new DataView(i.buffer)}},Object.defineProperty(t.prototype,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!0,configurable:!0}),t.prototype.clear=function(){var t=new ArrayBuffer(this.bufferExtSize);this.data=new DataView(t),this._bytes=new Uint8Array(t),this._position=0,this.write_position=0},t.prototype.readBoolean=function(){if(this.validate(1))return!!this._bytes[this.position++]},t.prototype.readByte=function(){if(this.validate(1))return this.data.getInt8(this.position++)},t.prototype.readBytes=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),t){var r=this._position,n=this.write_position-r;if(n<0)o.$error(1025);else{if(0==i)i=n;else if(n<i)return void o.$error(1025);var a=t._position;t._position=0,t.validateBuffer(e+i),t._position=a,t._bytes.set(this._bytes.subarray(r,r+i),e),this.position+=i}}},t.prototype.readDouble=function(){if(this.validate(8)){var t=this.data.getFloat64(this._position,0==this.$endian);return this.position+=8,t}},t.prototype.readFloat=function(){if(this.validate(4)){var t=this.data.getFloat32(this._position,0==this.$endian);return this.position+=4,t}},t.prototype.readInt=function(){if(this.validate(4)){var t=this.data.getInt32(this._position,0==this.$endian);return this.position+=4,t}},t.prototype.readShort=function(){if(this.validate(2)){var t=this.data.getInt16(this._position,0==this.$endian);return this.position+=2,t}},t.prototype.readUnsignedByte=function(){if(this.validate(1))return this._bytes[this.position++]},t.prototype.readUnsignedInt=function(){if(this.validate(4)){var t=this.data.getUint32(this._position,0==this.$endian);return this.position+=4,t}},t.prototype.readUnsignedShort=function(){if(this.validate(2)){var t=this.data.getUint16(this._position,0==this.$endian);return this.position+=2,t}},t.prototype.readUTF=function(){var t=this.readUnsignedShort();return 0<t?this.readUTFBytes(t):""},t.prototype.readUTFBytes=function(t){if(this.validate(t)){var e=this.data,i=new Uint8Array(e.buffer,e.byteOffset+this._position,t);return this.position+=t,this.decodeUTF8(i)}},t.prototype.writeBoolean=function(t){this.validateBuffer(1),this._bytes[this.position++]=+t},t.prototype.writeByte=function(t){this.validateBuffer(1),this._bytes[this.position++]=255&t},t.prototype.writeBytes=function(t,e,i){var r;void 0===e&&(e=0),void 0===i&&(i=0),e<0||i<0||0<(r=0==i?t.length-e:Math.min(t.length-e,i))&&(this.validateBuffer(r),this._bytes.set(t._bytes.subarray(e,e+r),this._position),this.position=this._position+r)},t.prototype.writeDouble=function(t){this.validateBuffer(8),this.data.setFloat64(this._position,t,0==this.$endian),this.position+=8},t.prototype.writeFloat=function(t){this.validateBuffer(4),this.data.setFloat32(this._position,t,0==this.$endian),this.position+=4},t.prototype.writeInt=function(t){this.validateBuffer(4),this.data.setInt32(this._position,t,0==this.$endian),this.position+=4},t.prototype.writeShort=function(t){this.validateBuffer(2),this.data.setInt16(this._position,t,0==this.$endian),this.position+=2},t.prototype.writeUnsignedInt=function(t){this.validateBuffer(4),this.data.setUint32(this._position,t,0==this.$endian),this.position+=4},t.prototype.writeUnsignedShort=function(t){this.validateBuffer(2),this.data.setUint16(this._position,t,0==this.$endian),this.position+=2},t.prototype.writeUTF=function(t){var e=this.encodeUTF8(t),i=e.length;this.validateBuffer(2+i),this.data.setUint16(this._position,i,0==this.$endian),this.position+=2,this._writeUint8Array(e,!1)},t.prototype.writeUTFBytes=function(t){this._writeUint8Array(this.encodeUTF8(t))},t.prototype.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},t.prototype._writeUint8Array=function(t,e){void 0===e&&(e=!0);var i=this._position,r=i+t.length;e&&this.validateBuffer(r),this.bytes.set(t,i),this.position=r},t.prototype.validate=function(t){var e=this._bytes.length;if(0<e&&this._position+t<=e)return!0;o.$error(1025)},t.prototype.validateBuffer=function(t){this.write_position=t>this.write_position?t:this.write_position,t+=this._position,this._validateBuffer(t)},t.prototype.encodeUTF8=function(t){for(var e=0,i=this.stringToCodePoints(t),r=[];i.length>e;){var n=i[e++];if(this.inRange(n,55296,57343))this.encoderError(n);else if(this.inRange(n,0,127))r.push(n);else{var a=void 0,o=void 0;for(this.inRange(n,128,2047)?(a=1,o=192):this.inRange(n,2048,65535)?(a=2,o=224):this.inRange(n,65536,1114111)&&(a=3,o=240),r.push(this.div(n,Math.pow(64,a))+o);0<a;){var s=this.div(n,Math.pow(64,a-1));r.push(128+s%64),a-=1}}}return new Uint8Array(r)},t.prototype.decodeUTF8=function(t){for(var e,i=0,r="",n=0,a=0,o=0,s=0;t.length>i;){var h=t[i++];if(h==this.EOF_byte)e=0!=a?this.decoderError(!1):this.EOF_code_point;else if(0==a)this.inRange(h,0,127)?e=h:(this.inRange(h,194,223)?(a=1,s=128,n=h-192):this.inRange(h,224,239)?(a=2,s=2048,n=h-224):this.inRange(h,240,244)?(a=3,s=65536,n=h-240):this.decoderError(!1),n*=Math.pow(64,a),e=null);else if(this.inRange(h,128,191))if(o+=1,n+=(h-128)*Math.pow(64,a-o),o!==a)e=null;else{var c=n,l=s;s=o=a=n=0,e=this.inRange(c,l,1114111)&&!this.inRange(c,55296,57343)?c:this.decoderError(!1,h)}else s=o=a=n=0,i--,e=this.decoderError(!1,h);null!==e&&e!==this.EOF_code_point&&(e<=65535?0<e&&(r+=String.fromCharCode(e)):(e-=65536,r+=String.fromCharCode(55296+(e>>10&1023)),r+=String.fromCharCode(56320+(1023&e))))}return r},t.prototype.encoderError=function(t){o.$error(1026,t)},t.prototype.decoderError=function(t,e){return t&&o.$error(1027),e||65533},t.prototype.inRange=function(t,e,i){return e<=t&&t<=i},t.prototype.div=function(t,e){return Math.floor(t/e)},t.prototype.stringToCodePoints=function(t){for(var e=[],i=0,r=t.length;i<t.length;){var n=t.charCodeAt(i);if(this.inRange(n,55296,57343))if(this.inRange(n,56320,57343))e.push(65533);else if(i==r-1)e.push(65533);else{var a=t.charCodeAt(i+1);if(this.inRange(a,56320,57343)){var o=1023&n,s=1023&a;i+=1,e.push(65536+(o<<10)+s)}else e.push(65533)}else e.push(n);i+=1}return e},t}();o.ByteArray=t,__reflect(t.prototype,"egret.ByteArray")}(egret||(egret={})),(egret||(egret={})).BitmapFillMode={REPEAT:"repeat",SCALE:"scale",CLIP:"clip"},function(c){c.registerClass=function(t,e,i){t||c.$error(1003,"classDefinition"),t.prototype||c.$error(1012,"classDefinition"),void 0===e&&c.$error(1003,"className");var r=t.prototype,n=[r.__class__=e];i&&(n=n.concat(i));var a=r.__types__;if(r.__types__)for(var o=a.length,s=0;s<o;s++){var h=a[s];-1==n.indexOf(h)&&n.push(h)}r.__types__=n}}(egret||(egret={})),function(i){var t=function(e){function t(){var t=e.call(this)||this;return t.$stageWidth=0,t.$stageHeight=0,t.$scaleMode=i.StageScaleMode.SHOW_ALL,t.$orientation=i.OrientationMode.AUTO,t.$maxTouches=99,(t.$stage=t).$nestLevel=1,t}return __extends(t,e),t.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(13)},Object.defineProperty(t.prototype,"frameRate",{get:function(){return i.ticker.$frameRate},set:function(t){i.ticker.$setFrameRate(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stageWidth",{get:function(){return this.$stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stageHeight",{get:function(){return this.$stageHeight},enumerable:!0,configurable:!0}),t.prototype.invalidate=function(){i.sys.$invalidateRenderFlag=!0},t.prototype.registerImplementation=function(t,e){i.registerImplementation(t,e)},t.prototype.getImplementation=function(t){return i.getImplementation(t)},Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this.$scaleMode},set:function(t){this.$scaleMode!=t&&(this.$scaleMode=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this.$orientation},set:function(t){this.$orientation!=t&&(this.$orientation=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textureScaleFactor",{get:function(){return i.$TextureScaleFactor},set:function(t){i.$TextureScaleFactor=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxTouches",{get:function(){return this.$maxTouches},set:function(t){this.$maxTouches!=t&&(this.$maxTouches=t,this.$screen.updateMaxTouches())},enumerable:!0,configurable:!0}),t.prototype.setContentSize=function(t,e){this.$screen.setContentSize(t,e)},t}(i.DisplayObjectContainer);i.Stage=t,__reflect(t.prototype,"egret.Stage"),i.$markCannotUse(t,"alpha",1),i.$markCannotUse(t,"visible",!0),i.$markCannotUse(t,"x",0),i.$markCannotUse(t,"y",0),i.$markCannotUse(t,"scaleX",1),i.$markCannotUse(t,"scaleY",1),i.$markCannotUse(t,"rotation",0),i.$markCannotUse(t,"cacheAsBitmap",!1),i.$markCannotUse(t,"scrollRect",null),i.$markCannotUse(t,"filters",null),i.$markCannotUse(t,"blendMode",null),i.$markCannotUse(t,"touchEnabled",!0),i.$markCannotUse(t,"matrix",null)}(egret||(egret={})),function(t){var e=function(){function t(){}return Object.defineProperty(t,"logLevel",{set:function(t){},enumerable:!0,configurable:!0}),t.ALL="all",t.DEBUG="debug",t.INFO="info",t.WARN="warn",t.ERROR="error",t.OFF="off",t}();t.Logger=e,__reflect(e.prototype,"egret.Logger")}(egret||(egret={})),function(t){var e=function(){function n(){}return n.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},n.sin=function(t){var e=Math.floor(t),i=e+1,r=n.sinInt(e);return e==t?r:(t-e)*n.sinInt(i)+(i-t)*r},n.sinInt=function(t){return(t%=360)<0&&(t+=360),egret_sin_map[t]},n.cos=function(t){var e=Math.floor(t),i=e+1,r=n.cosInt(e);return e==t?r:(t-e)*n.cosInt(i)+(i-t)*r},n.cosInt=function(t){return(t%=360)<0&&(t+=360),egret_cos_map[t]},n}();t.NumberUtils=e,__reflect(e.prototype,"egret.NumberUtils")}(egret||(egret={}));for(var egret,egret_sin_map={},egret_cos_map={},DEG_TO_RAD=Math.PI/180,NumberUtils_i=0;NumberUtils_i<360;NumberUtils_i++)egret_sin_map[NumberUtils_i]=Math.sin(NumberUtils_i*DEG_TO_RAD),egret_cos_map[NumberUtils_i]=Math.cos(NumberUtils_i*DEG_TO_RAD);egret_sin_map[90]=1,egret_cos_map[90]=0,egret_sin_map[180]=0,egret_cos_map[180]=-1,egret_sin_map[270]=-1,egret_cos_map[270]=0,Function.prototype.bind||(Function.prototype.bind=function(t){"function"!=typeof this&&egret.$error(1029);var e=Array.prototype.slice.call(arguments,1),i=this,r=function(){},n=function(){return i.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,n.prototype=new r,n}),function(i){var t=function(r){function t(t,e){void 0===e&&(e=0);var i=r.call(this)||this;return i._delay=0,i._currentCount=0,i._running=!1,i.updateInterval=1e3,i.lastCount=1e3,i.lastTimeStamp=0,i.delay=t,i.repeatCount=0|+e,i}return __extends(t,r),Object.defineProperty(t.prototype,"delay",{get:function(){return this._delay},set:function(t){t<1&&(t=1),this._delay!=t&&(this._delay=t,this.lastCount=this.updateInterval=Math.round(60*t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.stop(),this._currentCount=0},t.prototype.start=function(){this._running||(this.lastCount=this.updateInterval,this.lastTimeStamp=i.getTimer(),i.ticker.$startTick(this.$update,this),this._running=!0)},t.prototype.stop=function(){this._running&&(i.stopTick(this.$update,this),this._running=!1)},t.prototype.$update=function(t){if(t-this.lastTimeStamp>=this._delay)this.lastCount=this.updateInterval;else{if(this.lastCount-=1e3,0<this.lastCount)return!1;this.lastCount+=this.updateInterval}this.lastTimeStamp=t,this._currentCount++;var e=0<this.repeatCount&&this._currentCount>=this.repeatCount;return i.TimerEvent.dispatchTimerEvent(this,i.TimerEvent.TIMER),e&&(this.stop(),i.TimerEvent.dispatchTimerEvent(this,i.TimerEvent.TIMER_COMPLETE)),!1},t}(i.EventDispatcher);i.Timer=t,__reflect(t.prototype,"egret.Timer")}(egret||(egret={})),egret||(egret={}),function(n){n.$callLaterFunctionList=[],n.$callLaterThisList=[],n.$callLaterArgsList=[],n.callLater=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];n.$callLaterFunctionList.push(t),n.$callLaterThisList.push(e),n.$callLaterArgsList.push(i)},n.$callAsyncFunctionList=[],n.$callAsyncThisList=[],n.$callAsyncArgsList=[],n.$callAsync=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];n.$callAsyncFunctionList.push(t),n.$callAsyncThisList.push(e),n.$callAsyncArgsList.push(i)}}(egret||(egret={})),function(t){t.superSetter=function(t,e,i){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];var a,o=t.prototype;t.hasOwnProperty("__sets__")||Object.defineProperty(t,"__sets__",{value:{}});var s=(a=t.__sets__)[i];if(s)return s.apply(e,r);var h=Object.getPrototypeOf(o);if(null!=h){for(;!h.hasOwnProperty(i);)if(null==(h=Object.getPrototypeOf(h)))return;s=Object.getOwnPropertyDescriptor(h,i).set,(a[i]=s).apply(e,r)}},t.superGetter=function(t,e,i){var r,n=t.prototype;t.hasOwnProperty("__gets__")||Object.defineProperty(t,"__gets__",{value:{}});var a=(r=t.__gets__)[i];if(a)return a.call(e);var o=Object.getPrototypeOf(n);if(null!=o){for(;!o.hasOwnProperty(i);)if(null==(o=Object.getPrototypeOf(o)))return;return a=Object.getOwnPropertyDescriptor(o,i).get,(r[i]=a).call(e)}}}(egret||(egret={})),function(t){var a={};t.getDefinitionByName=function(t){if(!t)return null;var e=a[t];if(e)return e;var i=t.split("."),r=i.length;e=global;for(var n=0;n<r;n++)if(!(e=e[i[n]]))return null;return a[t]=e},t.cleanCache=function(){a={}}}(egret||(egret={})),egret||(egret={}),(egret||(egret={})).getQualifiedClassName=function(t){var e=typeof t;if(!t||"object"!=e&&!t.prototype)return e;var i=t.prototype?t.prototype:Object.getPrototypeOf(t);if(i.hasOwnProperty("__class__"))return i.__class__;var r=i.constructor.toString().trim(),n=r.indexOf("("),a=r.substring(9,n);return Object.defineProperty(i,"__class__",{value:a,enumerable:!1,writable:!0}),a},function(n){n.getQualifiedSuperclassName=function(t){if(!t||"object"!=typeof t&&!t.prototype)return null;var e=t.prototype?t.prototype:Object.getPrototypeOf(t),i=Object.getPrototypeOf(e);if(!i)return null;var r=n.getQualifiedClassName(i.constructor);return r||null}}(egret||(egret={})),function(t){t.getTimer=function(){return Date.now()-t.sys.$START_TIME}}(egret||(egret={})),function(e){e.hasDefinition=function(t){return!!e.getDefinitionByName(t)}}(egret||(egret={})),(egret||(egret={})).is=function(t,e){if(!t||"object"!=typeof t)return!1;var i=Object.getPrototypeOf(t),r=i?i.__types__:null;return!!r&&-1!==r.indexOf(e)},function(i){i.startTick=function(t,e){t||i.$error(1003,"callBack"),i.ticker.$startTick(t,e)}}(egret||(egret={})),function(i){i.stopTick=function(t,e){t||i.$error(1003,"callBack"),i.ticker.$stopTick(t,e)}}(egret||(egret={})),(egret||(egret={})).toColorString=function(t){t<0&&(t=0),16777215<t&&(t=16777215);for(var e=t.toString(16).toUpperCase();6<e.length;)e=e.slice(1,e.length);for(;e.length<6;)e="0"+e;return"#"+e},function(t){t.sys||(t.sys={})}(egret||(egret={}));